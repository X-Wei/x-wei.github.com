<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>mx's blog</title><link href="https://x-wei.github.io/" rel="alternate"></link><link href="https://x-wei.github.io/feeds/tag-flutter.atom.xml" rel="self"></link><id>https://x-wei.github.io/</id><updated>2021-03-21T00:00:00+01:00</updated><entry><title>é€šè¿‡Flutter hooksç®€åŒ–ä»£ç </title><link href="https://x-wei.github.io/tech/note-on-flutter-hooks.html" rel="alternate"></link><published>2021-03-21T00:00:00+01:00</published><updated>2021-03-21T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-03-21:tech/note-on-flutter-hooks.html</id><summary type="html">&lt;p&gt;çœ‹äº†Resocoderå’ŒRobert Brunhageçš„ä¸¤ä¸ªè§†é¢‘, è¿™ç¯‡æ€»ç»“ä¸€ä¸‹å…¶ä¸­çš„å†…å®¹(æˆ‘å…¶å®è¿˜æ²¡å®è·µè¿‡).&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å‚è€ƒè‡ª:
- &lt;a href="https://pub.dev/packages/flutter_hooks"&gt;pub package&lt;/a&gt;
- &lt;a href="https://www.youtube.com/watch?v=A1DUBgIsCv8"&gt;Video by Robert Brunhage&lt;/a&gt;
- &lt;a href="https://resocoder.com/2020/01/21/flutter-hooks-hide-fab-animation-100-widget-code-reuse/"&gt;Tutorial by Resocoder&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="the-problem"&gt;The problem&lt;/h2&gt;
&lt;p&gt;Flutter hooksæƒ³è§£å†³çš„é—®é¢˜æ˜¯&lt;code&gt;StatefulWidget&lt;/code&gt;çš„ä¸€äº›å¸¸è§patternå¤ªå¤æ‚, å‡å°‘äº†ä»£ç çš„å¯è¯»æ€§("readability").&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹ä¾‹å­å°±æ˜¯animation controller:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;StatefulWidget&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;_MyPageState&lt;/span&gt; &lt;span class="n"&gt;createState&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_MyPageState&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;_MyPageState&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;MyPage&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="n"&gt;SingleTickerProviderStateMixin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;AnimationController&lt;/span&gt; &lt;span class="n"&gt;_animController&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;initState&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;initState&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_animController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;AnimationController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;vsync:&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;duration:&lt;/span&gt; &lt;span class="n"&gt;kThemeAnimationDuration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;value:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// initially visible&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// use _animController here&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_animController&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ç§patternåœ¨vanilla flutteré‡Œç»å¸¸è¢«ä½¿ç”¨, ä½†æ˜¯å¯¹åŒä¸€ä¸ªcontrolleråœ¨å¥½å‡ ä¸ªåœ°æ–¹æ“ä½œ(&lt;code&gt;initiState()&lt;/code&gt;/&lt;code&gt;setState()&lt;/code&gt;/&lt;code&gt;dispose()&lt;/code&gt;), çœŸçš„ä¸å¥½è¯».&lt;/p&gt;
&lt;p&gt;Flutter hookså°±å¯ä»¥æŠŠè¿™ç§é‡å¤çš„patternæŠ½ç¦»å‡ºæ¥, æŠŠ&lt;code&gt;StatefulWidget&lt;/code&gt;å˜æˆç±»ä¼¼&lt;code&gt;StatelessWidget&lt;/code&gt;çš„&lt;code&gt;HookWidget&lt;/code&gt;, ç®€åŒ–ä»£ç , å¤§å¤§æé«˜å¯è¯»æ€§.&lt;/p&gt;
&lt;p&gt;(btw è¿™ä¸ªåŒ…çš„ä½œè€…æ˜¯RÃ©mi Rousseletå¤§ç¥, è´¨é‡æœ‰ä¿éšœğŸ‘Œ)&lt;/p&gt;
&lt;h2 id="shi-yong-xian-cheng-de-hooks"&gt;ä½¿ç”¨ç°æˆçš„Hooks&lt;/h2&gt;
&lt;p&gt;å¯¹äºå¸¸ç”¨çš„patternæœ‰ç°æˆçš„hookså¯ä»¥ç›´æ¥å¥—ç”¨. æ¯”å¦‚ä¸Šé¢çš„animation controllerä¾‹å­, ç”¨flutter hookså¯ä»¥å†™æˆè¿™æ ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HookWidget&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;//! StatelessWidget =&amp;gt; HookWidget&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;animController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;useAnimationController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;duration:&lt;/span&gt; &lt;span class="n"&gt;kThemeAnimationDuration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;initialValue:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// use _animController here&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;âš¡ï¸Flutter hooksè‡ªå¸¦äº†ä¸å°‘&lt;a href="https://pub.dev/packages/flutter_hooks#existing-hooks"&gt;ç°æˆçš„hooks&lt;/a&gt;, æœ‰çš„é¢å‘Animation, æœ‰çš„é¢å‘Streamç­‰ç­‰, æœ‰æ—¶é—´å¯ä»¥å¥½å¥½çœ‹ä¸€çœ‹...&lt;/p&gt;
&lt;h2 id="zi-ding-yi-hook"&gt;è‡ªå®šä¹‰Hook&lt;/h2&gt;
&lt;p&gt;cf. Resocoderçš„&lt;a href="https://resocoder.com/2020/01/21/flutter-hooks-hide-fab-animation-100-widget-code-reuse/#t-1616317538465"&gt;æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç°æˆçš„hookä¸æ»¡è¶³æ¡ä»¶, å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿéå¸¸å®¹æ˜“, åŸºæœ¬å°±æ˜¯æŠŠåŸæ¥&lt;code&gt;StatefulWidget/State&amp;lt;Foo&amp;gt;&lt;/code&gt;çš„å†…å®¹å˜æˆ&lt;code&gt;Hook&amp;lt;R&amp;gt;/HookState&amp;lt;R,Foo&amp;gt;&lt;/code&gt;. å…¶ä¸­&lt;code&gt;Foo&lt;/code&gt;æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»å, &lt;code&gt;R&lt;/code&gt;åˆ™æ˜¯stateçš„ç±»å‹. æ¯”å¦‚å¯¹äºä¹‹å‰çš„ä¾‹å­: &lt;code&gt;Foo&lt;/code&gt;=&lt;code&gt;MyPage&lt;/code&gt;, &lt;code&gt;R&lt;/code&gt;=&lt;code&gt;AnimationController&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œåˆ—ä¸€ä¸‹äºŒè€…çš„åŒºåˆ«, åŸºæœ¬æ˜¯ä¸€ä¸€å¯¹åº”çš„, æ‰€ä»¥è¿ç§»èµ·æ¥ä¸éš¾:&lt;/p&gt;
&lt;table class=" table-striped table table-hover"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;StatefulWidget&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Hook&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;class Foo extends StatefulWidget&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class Foo extends Hook&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;createState() =&amp;gt; State&amp;lt;Foo&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;createState() =&amp;gt; HookState&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class=" table-striped table table-hover"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;State&amp;lt;Foo&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;HookState&amp;lt;R, Foo&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;R _data;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;R _data;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;initState() {_data=...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;initHook() {_data=...}&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;build(ctx) =&amp;gt; Widget&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;build(ctx) =&amp;gt; R&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;dispose()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dispose()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;widget.xxx&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;hook.xxx&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å½“è‡ªå®šä¹‰çš„&lt;code&gt;Hook/HookState&lt;/code&gt;å†™å¥½ä»¥å, æ ¹æ®Flutter hooksçš„æƒ¯ä¾‹, éœ€è¦å†™ä¸€ä¸ª&lt;code&gt;useXxHooks&lt;/code&gt;çš„å‡½æ•°, è¿”å›ç±»å‹æ˜¯&lt;code&gt;R&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt; &lt;span class="n"&gt;useMyHooks&lt;/span&gt;&lt;span class="p"&gt;(...)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Hook&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_FooHook&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="usestateuseeffect"&gt;useState/useEffect&lt;/h2&gt;
&lt;p&gt;cf. Robert Brunhageçš„&lt;a href="https://www.youtube.com/watch?v=A1DUBgIsCv8"&gt;è§†é¢‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;strong&gt;ä¸è¿½æ±‚é€»è¾‘å¤ç”¨&lt;/strong&gt;, åªæƒ³å»æ‰&lt;code&gt;initState()&lt;/code&gt;/&lt;code&gt;dispose()&lt;/code&gt;çš„åœºæ™¯, å¯ä»¥è€ƒè™‘ç›´æ¥æŠŠä¸€ä¸ª&lt;code&gt;StatefulWidget&lt;/code&gt;å˜æˆ&lt;code&gt;HookWiget&lt;/code&gt;. Flutter hooksæä¾›äº†&lt;code&gt;useState&lt;/code&gt;å’Œ&lt;code&gt;useEffect&lt;/code&gt;, è®©æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨&lt;code&gt;HookWiget.build()&lt;/code&gt;å‡½æ•°é‡Œé¢åˆ›å»º/ä¿®æ”¹çŠ¶æ€.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºçŠ¶æ€&lt;/strong&gt;: ç”¨&lt;a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/useState.html"&gt;&lt;code&gt;useState(R initialVal)&lt;/code&gt;&lt;/a&gt;.\
æ³¨æ„è¿”å›å€¼çš„æ˜¯ä¸€ä¸ª&lt;code&gt;ValueNotifier&amp;lt;R&amp;gt;&lt;/code&gt; (cf. [[202102212026 ChangeNotifier, ValueNotifier and StateNotifier|å„ç§notifier]]), è·å¾—åŒ…å«çš„å€¼éœ€è¦&lt;code&gt;.value&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹çŠ¶æ€&lt;/strong&gt;: &lt;a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/useEffect.html"&gt;&lt;code&gt;useEffect()&lt;/code&gt;&lt;/a&gt;, æœ‰ä¸¤ä¸ªå‚æ•°:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªå‚æ•°(&lt;code&gt;effect()&lt;/code&gt;)æ˜¯ä¸€ä¸ªå‡½æ•°&lt;code&gt;Dispose? Function()&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;å¯ä»¥æŠŠä¿®æ”¹çŠ¶æ€çš„å†…å®¹(æ¯”å¦‚åŸå…ˆ&lt;code&gt;setState&lt;/code&gt;çš„å†…å®¹)æ”¾åœ¨è¿™é‡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;effect&lt;/code&gt;å¯ä»¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°(&lt;code&gt;Dispose?&lt;/code&gt;), è¿™ä¸ªå‡½æ•°ä¼š_åœ¨&lt;code&gt;effect()&lt;/code&gt;ä¸‹æ¬¡ä¸€è¢«è°ƒç”¨æˆ–è€…å½“widget disposeçš„æ—¶å€™è¿è¡Œ_.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªå¯é€‰å‚æ•°&lt;code&gt;keys&lt;/code&gt;æ˜¯ä¸€ä¸ªlist, æ§åˆ¶&lt;code&gt;effect()&lt;/code&gt;ä½•æ—¶è¢«è°ƒç”¨:&lt;ul&gt;
&lt;li&gt;å¦‚æœä¸ºnull(é»˜è®¤), åˆ™_æ¯æ¬¡&lt;code&gt;build()&lt;/code&gt;_ éƒ½ä¼šè°ƒç”¨&lt;code&gt;effect()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœénull, åˆ™åªåœ¨_ç¬¬ä¸€æ¬¡&lt;code&gt;build()&lt;/code&gt;, ä»¥åŠå½“ä»»ä½•keyså…ƒç´ æ”¹å˜æ—¶_æ‰è°ƒç”¨&lt;code&gt;effect()&lt;/code&gt;\
   &lt;strong&gt;æ³¨æ„: &lt;code&gt;keys&lt;/code&gt;å¯ä»¥æ˜¯ç©ºlist, ä½†énull&lt;/strong&gt;, æ¯”å¦‚&lt;code&gt;keys=[]&lt;/code&gt;, æ­¤æ—¶effectåªè¿è¡Œä¸€æ¬¡.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ª&lt;code&gt;StatefulWidget&lt;/code&gt;ç®€åŒ–ä¸ºç±»ä¼¼&lt;code&gt;StatelessWidget&lt;/code&gt;çš„&lt;code&gt;HookWidget&lt;/code&gt;, ç®€åŒ–ä»£ç . ä¾‹å¦‚ç”¨useState/useEffectå†™ä¸€ä¸ªç®€å•è®¡æ—¶å™¨, ä»£ç ç›¸æ¯”vanilla flutterè¦ç®€æ´è®¸å¤š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyTimerPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HookWidget&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;_numberNotifier&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;useState&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;//! Create state&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;useEffect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;  &lt;span class="c1"&gt;//! Change state&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="cm"&gt;/*effect=*/&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="c1"&gt;//! ~= initState()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;timer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Timer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;periodic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="n"&gt;Duration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nl"&gt;seconds:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="c1"&gt;//! ~= setState()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_numberNotifier&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;timer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cancel&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;//! ~= dispose()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;},&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="cm"&gt;/*keys=*/&lt;/span&gt;&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt;  &lt;span class="c1"&gt;//! =&amp;gt; effect() is called only once&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Scaffold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;body:&lt;/span&gt; &lt;span class="n"&gt;Center&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_numberNotifier&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“ç„¶è¿™æ ·å†™çš„ç¼ºç‚¹å°±æ˜¯é€»è¾‘æ— æ³•å¤ç”¨, è¦å¤ç”¨é€»è¾‘çš„è¯å¯ä»¥å‚è€ƒä¸Šä¸€èŠ‚"è‡ªå®šä¹‰Hook":&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æŠŠuseState/useEffectçš„å†…å®¹æ”¾è¿›ä¸€ä¸ª&lt;code&gt;_MyTimerHook extends Hook&amp;lt;int&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®šä¹‰&lt;code&gt;int useMyTimer()&lt;/code&gt;å‡½æ•°:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dart
int useMyTimer() {
  return Hook.use(_MyTimerHook());
}&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨&lt;code&gt;HookWidget&lt;/code&gt;é‡Œä½¿ç”¨&lt;code&gt;useMyTimerHook&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dart
class MyTimerPage extends HookWidget {
  @override
  Widget build(BuildContext context) {
    final number = useMyTimer();
    return Text(number.toString());
  }
}&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="zui-jia-shi-jian"&gt;æœ€ä½³å®è·µ&lt;/h2&gt;
&lt;p&gt;pubä¸Šåˆ—å‡ºäº†å‡ æ¡&lt;a href="https://pub.dev/packages/flutter_hooks#rules"&gt;æœ€ä½³å®è·µ&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰hookçš„å‡½æ•°éƒ½ä»¥'use'å¼€å¤´:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// starts with `use`, good name&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// doesn't start with `use`, could confuse people into thinking that this isn't a hook&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;myHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸è¦åœ¨åˆ†æ”¯æ¡ä»¶é‡Œä½¿ç”¨hook:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;//! Good: DO call hooks unconditionally&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;//! BAD: DON'T wrap use into a condition&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Flutter"></category></entry><entry><title>æå‡Flutter Appçš„è®¾è®¡ç»†èŠ‚</title><link href="https://x-wei.github.io/tech/flutter-improve-UI-details.html" rel="alternate"></link><published>2021-03-20T00:00:00+01:00</published><updated>2021-03-20T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-03-20:tech/flutter-improve-UI-details.html</id><summary type="html">&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦æ€»ç»“äº†FlutterEngageé‡Œçš„è¿™ä¸ªtalk:&lt;/p&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="embed-responsive-item" frameborder="0" height="315" src="https://www.youtube.com/embed/MIepaf7ks40" title="YouTube video player" width="560"&gt;&lt;/iframe&gt;
&lt;p&gt;(è¿™ä¸ªtalkçš„åå­—çš„ä¸­æ–‡ç¿»è¯‘æŒºç‰›çš„: "å°äº‹ä¸€æ¡©ï¼šæˆä¸ºå¼€å‘å’Œè®¾è®¡ä¿±ä½³çš„ç¥çº§äººç‰©")&lt;/p&gt;
&lt;p&gt;talké‡Œä»£ç åœ°å€åœ¨: &lt;a href="https://github.com/filiph/little_things"&gt;https://github.com/filiph/little_things&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªtalkè¿˜æ˜¯æŒºæœ‰æ„æ€çš„, ä»‹ç»äº†å¦‚ä½•æå‡Appçš„è®¾è®¡ç»†èŠ‚ä»è€Œè·å¾—æ›´é«˜çš„ &lt;strong&gt;"Perceived value"&lt;/strong&gt;: 
æœ‰æ—¶å€™appæœ¬èº«çš„åŠŸèƒ½æ€§å’ŒæŠ€æœ¯æ€§æ˜¯ä¸€æ–¹é¢, ä½†æ˜¯å‘ˆç°ç»™ç”¨æˆ·çš„æ„Ÿè§‰å´æœ‰å¯èƒ½å› ä¸ºä¸€ç‚¹ç‚¹ç»†èŠ‚è€Œå®Œå…¨ä¸åŒ. è¿™ä¸€ç‚¹æˆ‘ä¹‹å‰ä¸å¤ªé‡è§†, ç»†æƒ³ä¸€ä¸‹ç¡®å®æœ‰é“ç†.&lt;/p&gt;
&lt;h2 id="1-white-space"&gt;1. White space&lt;/h2&gt;
&lt;p&gt;å¤šä½¿ç”¨paddingæ·»åŠ ç©ºéš™å’Œç•™ç™½, ä½“ç°ä¸€ç§é«˜çº§æ„Ÿ~
ç»“åˆFlutterçš„hot reloadå¯ä»¥å¿«çš„å®éªŒ æ‰¾åˆ°åˆé€‚çš„padding.&lt;/p&gt;
&lt;h2 id="2-typography"&gt;2. Typography&lt;/h2&gt;
&lt;p&gt;æ¢ä¸ªå¥½çœ‹çš„å­—ä½“ä¹Ÿå¯ä»¥è®©åº”ç”¨çœ‹èµ·æ¥éå¸¸é«˜çº§.&lt;/p&gt;
&lt;p&gt;GoogleFonté…åˆhot reloadæ¥é€‰æ‹©å¥½çš„å­—ä½“&lt;/p&gt;
&lt;h2 id="3-color"&gt;3. Color&lt;/h2&gt;
&lt;p&gt;ç»™appæ·»åŠ ç‰¹åˆ«çš„é…è‰².&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä»ç½‘ä¸Šæ‰¾ä¸€äº›é…è‰²æ–¹æ¡ˆ(color palette), æ¯”å¦‚:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://coolors.co/palettes/trending&lt;/li&gt;
&lt;li&gt;https://undesign.learn.uno/colors/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŠŠé€‰å¥½çš„ColorPaletteæ”¾åœ¨&lt;code&gt;MaterialApp.theme&lt;/code&gt;é‡Œå¤´: &lt;a href="https://github.com/filiph/little_things/blob/main/lib/main.dart#L27-L55"&gt;https://github.com/filiph/little_things/blob/main/lib/main.dart#L27-L55&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="4-iconography"&gt;4. Iconography&lt;/h2&gt;
&lt;p&gt;æ„æ€å°±æ˜¯é¼“åŠ±å¤šç»™appå¤šåŠ ä¸€äº›å›¾ç‰‡/å›¾æ ‡.&lt;/p&gt;
&lt;p&gt;Filipçš„ä¾‹å­ä»–ç”¨åˆ°äº†BoxDecoration(å¯ä»¥é…ç½®gradientä»¥åŠimage): &lt;a href="https://github.com/filiph/little_things/blob/main/lib/src/list.dart#L18-L32"&gt;https://github.com/filiph/little_things/blob/main/lib/src/list.dart#L18-L32&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Container&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;decoration:&lt;/span&gt; &lt;span class="n"&gt;BoxDecoration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;gradient:&lt;/span&gt; &lt;span class="n"&gt;LinearGradient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;colors:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF96E3FF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9EECFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FEBFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FEEFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FECFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;],&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;image:&lt;/span&gt; &lt;span class="n"&gt;DecorationImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;image:&lt;/span&gt; &lt;span class="n"&gt;AssetImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'assets/meditation.jpg'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;alignment:&lt;/span&gt; &lt;span class="n"&gt;Alignment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bottomCenter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="n"&gt;Scaffold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="cm"&gt;/*...*/&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="5-animation"&gt;5. Animation&lt;/h2&gt;
&lt;p&gt;åŠ¨ç”»ä¹Ÿå¯ä»¥å¾ˆå¤§æå‡ç”¨æˆ·å¯¹appçš„è¯„ä»·.&lt;/p&gt;
&lt;p&gt;é»˜è®¤animationçš„curveæ˜¯linear, ä¸€èˆ¬è¿™ç§curveéƒ½ä¼šè®©äººæ„Ÿè§‰å¾ˆä¸è‡ªç„¶. å¯ä»¥å°è¯•ä¸€ä¸‹&lt;code&gt;easeIn&lt;/code&gt;/&lt;code&gt;easeOut&lt;/code&gt;è¿™ç§.&lt;/p&gt;
&lt;p&gt;å¦å¤–è¿˜å¯ä»¥åŒæ—¶æä¾›å¤šä¸ªanimation (slideTransition / resize / text ç­‰ç­‰), è¿™æ—¶å€™å¦‚æœæ‰€æœ‰animationä¸€èµ·è·‘å…¶å®ä¼šå¾ˆä¹±, æˆ‘ä»¬åº”è¯¥ç”¨ &lt;strong&gt;"Staggered Animation"&lt;/strong&gt;, å°±æ˜¯ä¸€ä¸ªanimationæ¥å¦ä¸€ä¸ªanimation.&lt;/p&gt;
&lt;p&gt;ç”¨&lt;code&gt;curve: Interval(0.2, 0.6)&lt;/code&gt;, å¯ä»¥è®©è¿™ä¸ªanimationåœ¨æ•´ä¸ªanimation(&lt;code&gt;parent&lt;/code&gt;)çš„20%~60%çš„æ—¶é—´æ®µè¿è¡Œ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/flutter-improve-UI-details/Pasted%20image%2020210320221018.png"/&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ScaleTransition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;scale:&lt;/span&gt; &lt;span class="n"&gt;CurvedAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;curve:&lt;/span&gt; &lt;span class="n"&gt;Interval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="m"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="m"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;curve:&lt;/span&gt; &lt;span class="n"&gt;Curves&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;elasticOut&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;parent:&lt;/span&gt; &lt;span class="n"&gt;_controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="cm"&gt;/*...*/&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡ŒFilipè‡ªå·±å®ç°äº†ä¸€ä¸ªæ˜¾ç¤ºæ–‡å­—çš„widget(&lt;code&gt;TrackedOutText&lt;/code&gt;), cf. &lt;a href="https://github.com/filiph/little_things/blob/main/lib/src/congrats.dart"&gt;https://github.com/filiph/little_things/blob/main/lib/src/congrats.dart&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="zui-zhong-xiao-guo-dui-bi"&gt;æœ€ç»ˆæ•ˆæœå¯¹æ¯”&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/flutter-improve-UI-details/ui-before-and-after.gif"/&gt;&lt;/p&gt;
&lt;p&gt;Appè´¨æ„Ÿçš„æå‡è¿˜æ˜¯æŒºæ˜æ˜¾çš„!&lt;/p&gt;
&lt;p&gt;å¦å¤–åŸè§†é¢‘çš„ç®€ä»‹é‡Œä¹Ÿæä¾›äº†ä¸€äº›UIè®¾è®¡çš„è§†é¢‘å¯ä»¥å‚è€ƒå…¥é—¨.&lt;/p&gt;</summary><category term="Flutter"></category></entry><entry><title>ç”¨analyzeræé«˜Flutteré¡¹ç›®çš„ä»£ç è´¨é‡</title><link href="https://x-wei.github.io/tech/flutter-use-analyzer.html" rel="alternate"></link><published>2020-10-18T00:00:00+02:00</published><updated>2020-10-18T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2020-10-18:tech/flutter-use-analyzer.html</id><summary type="html">&lt;p&gt;Darté»˜è®¤çš„linteré…ç½®æœ‰ç‚¹å¼±, æœ‰å¾ˆå¤šæœ‰é—®é¢˜ä»£ç ä¹Ÿä¸æŠ¥é”™æˆ–è­¦å‘Š.
æ·»åŠ ä¸€ä¸ªanalyzerå¯ä»¥åº”ç”¨dartçš„æœ€ä½³ä»£ç å®è·µ, å¯¹ä¸€äº›ä¸å¥½çš„ä»£ç é£æ ¼æå‡ºè­¦å‘Šæˆ–è€…ç›´æ¥æŠ¥é”™, ä»è€Œæé«˜ä»£ç è´¨é‡.&lt;/p&gt;
&lt;p&gt;Cf. resocoderçš„ä»‹ç»&lt;a href="https://resocoder.com/2020/01/17/dart-linting-tutorial-healthy-flutter-codebase-with-analysis_options-yaml/"&gt;æ–‡ç« &lt;/a&gt; (å’Œè§†é¢‘)&lt;/p&gt;
&lt;h2 id="use-an-analyzer"&gt;Use an analyzer&lt;/h2&gt;
&lt;p&gt;Resocoderæ¨è&lt;a href="https://pub.dev/packages/lint"&gt;lint&lt;/a&gt;, é‡Œé¢æä¾›äº†ä¸€äº›æœ€ä½³çš„dartå’Œflutterä»£ç é£æ ¼. ç±»ä¼¼çš„é€‰æ‹©è¿˜æœ‰pandenticå’Œeffective_dart.&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ–¹å¼å°±æ˜¯, å…ˆåœ¨pubsepc.yamlé‡Œæ·»åŠ ä¾èµ–:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# pubspec.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;dependency_overrides&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;lint&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;^1.3.0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªanalysis_options.yamlæ–‡ä»¶:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;package:lint/analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="exclude-folders-disable-rules"&gt;Exclude folders / disable rules&lt;/h3&gt;
&lt;p&gt;analyzeré»˜è®¤ä¼šæ‰«ææ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„dartä»£ç , æœ‰æ—¶å€™ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æˆ–è€…åœ¨&lt;code&gt;build/&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹çš„ä»£ç å¹¶ä¸éœ€è¦è¢«åˆ†æ, å¯ä»¥ç”¨&lt;code&gt;exclude&lt;/code&gt;æŠŠå®ƒä»¬æ’é™¤åœ¨å¤–.&lt;/p&gt;
&lt;p&gt;å¦å¤–æœ‰äº›é»˜è®¤çš„è§„åˆ™å¯èƒ½ä¸é€‚ç”¨äºè‡ªå·±çš„ä»£ç , æ¯”å¦‚æˆ‘å°±æ¯”è¾ƒå–œæ¬¢åŠ &lt;code&gt;this&lt;/code&gt;, è®¤ä¸ºè¿™æ ·æ›´å®¹æ˜“åŒºåˆ†æˆå‘˜å˜é‡å’Œæ™®é€šå˜é‡, è€Œè¿™ä¸ªæ˜¯&lt;a href="https://dart-lang.github.io/linter/lints/unnecessary_this.html"&gt;ä¸è¢«æ¨è&lt;/a&gt;çš„(æ¯•ç«Ÿdartçš„IDEæ•´åˆçš„éå¸¸æ£’). å¦‚æœè¦å…³é—­è¿™ä¸€é¡¹æ£€æŸ¥, åªéœ€è¦åœ¨linter ruleé‡ŒæŠŠå®ƒè®¾ä¸ºfalse.&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Š, æˆ‘çš„analysis_options.yamlé•¿è¿™æ ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;package:lint/analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;analyzer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;exclude&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;build/**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;linter&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;rules&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# Rationale: in our app, the codes are for reading on mobile phones. Adding&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# `this` makes it easier for readers to understand which variables class&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# members and which ones are not.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nt"&gt;unnecessary_this&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;false&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="auto-fix-suggestions_1"&gt;Auto-fix suggestions&lt;/h2&gt;
&lt;p&gt;ä¸è¿‡åœ¨åŠ äº†analyzerä»¥åæˆ‘å‘ç°VSCodeå‡ºç°äº†å‡ ç™¾ä¸ªwarning, å¤§éƒ¨åˆ†warningéƒ½æœ‰ç®€å•çš„fixæ–¹æ³•(æ¯”å¦‚ç»™&lt;code&gt;Text("foo")&lt;/code&gt;åŠ ä¸ª&lt;code&gt;const&lt;/code&gt;ä¹‹ç±»çš„). è™½ç„¶åªè¦ç‚¹ä¸€ä¸‹å°±èƒ½fix, ç‚¹å‡ ç™¾ä¸‹ä¹Ÿå®åœ¨æ˜¯å¤ªéº»çƒ¦äº†...&lt;/p&gt;
&lt;p&gt;æœç´¢ä¸€ä¸‹ä»¥åå‘ç°äº†è§£å†³åŠæ³•: &lt;a href="https://stackoverflow.com/a/62664168"&gt;https://stackoverflow.com/a/62664168&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;é¦–å…ˆç”¨&lt;code&gt;dartfmt&lt;/code&gt;å¯ä»¥è§£å†³ä¸€äº›ç®€å•çš„æ ¼å¼é—®é¢˜:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# simple style/format fixes&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfmt --fix --overwrite --follow-links .&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¦åº”ç”¨analyzerçš„fix, éœ€è¦ä½¿ç”¨&lt;a href="https://pub.dev/packages/dartfix"&gt;dartfix&lt;/a&gt;. ä¸è¿‡å®ƒç›®å‰åªæ”¯æŒpedantic, ä¸èƒ½ç›´æ¥ç”¨analysis_options.yamlçš„é…ç½®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# install dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ pub global activate dartfix&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;# Use dartfix to auto-apply pedantic suggestions:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix --pedantic --excludeFix unnecessary_this lib/ --fix prefer_const_declarations --overwrite&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æˆ‘å‘ç°pedanticçš„æ£€æŸ¥ç¡®å®ä¸å¦‚lintä¸¥æ ¼(cf. &lt;a href="https://github.com/passsy/dart-lint#comparison-to-packagepedantic"&gt;äºŒè€…çš„æ¯”è¾ƒ&lt;/a&gt;), æ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰ç›´æ¥ç”¨&lt;code&gt;--pedantic&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯, æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”¨dartfixæ¥fixæŸä¸€ç±»é—®é¢˜(éœ€è¦å…ˆç¡®è®¤æŸä¸ªfixæ˜¯å¦è¢«dartfixæ”¯æŒ). æ¯”å¦‚æˆ‘çœ‹åˆ°å¾ˆå¤š&lt;code&gt;sort_child_properties_last&lt;/code&gt;çš„å»ºè®®, äºæ˜¯å¯ä»¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# Check if the "sort_child_properties_last" lint is supported by dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix -h | grep sort_&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¢ sort_child_properties_last&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;# This fix is available ==&amp;gt; Apply it with dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix --fix sort_child_properties_last  lib/ --overwrite&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨ç±»ä¼¼çš„æ–¹å¼, å°±å¯ä»¥å¿«é€Ÿåº”ç”¨linterçš„å»ºè®®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ dartfix --fix prefer_const_constructors  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_const_declarations  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_final_locals  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# Or apply multiple fixes at once:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_const_declarations,avoid_redundant_argument_values,prefer_collection_literals,curly_braces_in_flow_control_structures,prefer_if_elements_to_conditional_expressions,annotate_overrides,prefer_const_constructors_in_immutables,unnecessary_const,prefer_is_empty,prefer_final_fields &lt;span class="se"&gt;\&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    lib/ --overwrite&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Flutter"></category></entry><entry><title>ç”¨fvmç®¡ç†å¤šä¸ªFlutter SDK</title><link href="https://x-wei.github.io/tech/flutter-use-fvm.html" rel="alternate"></link><published>2020-10-16T00:00:00+02:00</published><updated>2020-10-16T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2020-10-16:tech/flutter-use-fvm.html</id><summary type="html">&lt;h2 id="background"&gt;background&lt;/h2&gt;
&lt;p&gt;flutteræœ‰å¾ˆå¤šchannel: stable/beta/dev/master, è€Œç›®å‰æœ‰äº›åŠŸèƒ½åªåœ¨æŸä¸ªchannelä¸Šå¯ç”¨, æ¯”å¦‚Linux supportç›®å‰åªåœ¨dev channelæ”¯æŒ.&lt;/p&gt;
&lt;p&gt;æˆ‘æ—¥å¸¸ç”¨çš„æ˜¯beta channel, ä½†æ˜¯æƒ³å†™Linuxç¨‹åºæ—¶æ¯æ¬¡&lt;code&gt;flutter channel dev&lt;/code&gt;çš„è¯ éœ€è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´--å› ä¸ºè¦ä¸‹è½½æ–°channelçš„å†…å®¹, switchå›å»çš„æ—¶å€™åˆè¦ç­‰åŠå¤©(å› ä¸ºè¦ä»æ–°ä¸‹è½½).&lt;/p&gt;
&lt;p&gt;ä»Šå¤©çœ‹åˆ°Flutter Explainedçš„è§†é¢‘: &lt;a href="https://youtu.be/R6vKde1vIGQ"&gt;https://youtu.be/R6vKde1vIGQ&lt;/a&gt; è¿™æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„! å®ƒå¯ä»¥cacheä¸åŒç‰ˆæœ¬çš„flutterSDK ç„¶åæ¯ä¸ªrepoå¯ä»¥è®¾ç½®ä¸åŒçš„ç‰ˆæœ¬å·, è€Œä¸”VSCodeä¹Ÿåªéœ€è¦ç®€å•é…ç½®.&lt;/p&gt;
&lt;h2 id="enable-fvm"&gt;enable fvm&lt;/h2&gt;
&lt;p&gt;ä¸€è¡Œå‘½ä»¤å³å¯å¼€å¯fvm:
&lt;code&gt;$ pub global activate fvm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨æ³•:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;fvm flutter&lt;/code&gt;: Proxies flutter commands ç”¨äºé€‰æ‹©åˆé€‚çš„flutterç‰ˆæœ¬&lt;ul&gt;
&lt;li&gt;ä¹Ÿå°±æ˜¯è¯´ç”¨&lt;code&gt;fvm flutter&lt;/code&gt;æ¥ä»£æ›¿flutterå‘½ä»¤ â€” ä¼šè‡ªåŠ¨pickå½“å‰repoæ‰€ç”¨çš„SDK&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚: &lt;code&gt;fvm flutter doctor&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm list&lt;/code&gt;: æŸ¥çœ‹ç›®å‰å®‰è£…çš„flutter ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm use&lt;/code&gt;: é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªSDKç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm install dev/beta/stable/...&lt;/code&gt;: å®‰è£…SDK &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="use-fvm"&gt;use fvm&lt;/h2&gt;
&lt;p&gt;åœ¨flutteræ–‡ä»¶å¤¹é‡Œè¿è¡Œ&lt;code&gt;fvm use xxx&lt;/code&gt;å³å¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; my_flutter_proj&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm use dev&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm list&lt;/span&gt;
&lt;span class="code-line"&gt;Versions path:  /home/xwei/fvm/versions&lt;/span&gt;
&lt;span class="code-line"&gt;beta&lt;/span&gt;
&lt;span class="code-line"&gt;dev âœ”&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª&lt;code&gt;.fvm&lt;/code&gt;çš„æ–‡ä»¶å¤¹, é‡Œé¢åŒ…å«äº†åˆ°æŒ‡å®šSDKçš„è½¯é“¾æ¥ ä»¥åŠä¸€ä¸ªjson config:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ ls .fvm&lt;/span&gt;
&lt;span class="code-line"&gt;flutter_sdk@  fvm_config.json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«çš„ç”¨flutter devå¼€å‘linux appäº†:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ fvm flutter config --enable-linux-desktop&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter devices&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;2&lt;/span&gt; connected devices:&lt;/span&gt;
&lt;span class="code-line"&gt;Android SDK built &lt;span class="k"&gt;for&lt;/span&gt; x86 &lt;span class="o"&gt;(&lt;/span&gt;mobile&lt;span class="o"&gt;)&lt;/span&gt; â€¢ emulator-5554 â€¢ android-x86 â€¢ Android &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;API &lt;span class="m"&gt;29&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;emulator&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Linux &lt;span class="o"&gt;(&lt;/span&gt;desktop&lt;span class="o"&gt;)&lt;/span&gt;                    â€¢ linux         â€¢ linux-x64   â€¢ Linux&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter create .&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter run -d linux&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="vscode-config"&gt;VScode config&lt;/h2&gt;
&lt;p&gt;cf. &lt;a href="https://github.com/leoafarias/fvm#vscode"&gt;https://github.com/leoafarias/fvm#vscode&lt;/a&gt;
è®©vscodeä½¿ç”¨fvm flutter (è€Œä¸æ˜¯é»˜è®¤flutter), åªè¦ä¿®æ”¹settings.jsonæŠŠé‚£ä¸ªflutter_sdkçš„è½¯é“¾æ¥å³å¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ cat .vscode/settings.json &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="s2"&gt;"dart.flutterSdkPaths"&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;".fvm/flutter_sdk"&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨VSCodeçš„command paletteé‡Œè¾“å…¥&lt;code&gt;Flutter: Change SDK&lt;/code&gt;, å°±å¯ä»¥é€‰æ‹©flutter SDKäº†&lt;/p&gt;
&lt;h2 id="other-config"&gt;other config&lt;/h2&gt;
&lt;h3 id="change-cache-path"&gt;change cache path&lt;/h3&gt;
&lt;p&gt;fvmé»˜è®¤cacheåœ¨&lt;code&gt;~/fvm&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹, å¯ä»¥ä¿®æ”¹&lt;code&gt;FVM_HOME&lt;/code&gt;ç¯å¢ƒå˜é‡æ”¹åˆ°åˆ«çš„ä½ç½®.
cf. &lt;a href="https://github.com/leoafarias/fvm#change-fvm-cache-directory"&gt;https://github.com/leoafarias/fvm#change-fvm-cache-directory&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="bashfish-alias"&gt;bash/fish alias&lt;/h3&gt;
&lt;p&gt;æ¯æ¬¡éƒ½å†™&lt;code&gt;fvm flutter&lt;/code&gt;æœ‰ç‚¹éº»çƒ¦ å¯ä»¥åœ¨bashrc/config.fishé‡ŒåŠ ä¸Šä¸€è¡Œ &lt;code&gt;alias ff=fvm flutter&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Š, åªéœ€è¦åœ¨.bashrcé‡ŒåŠ ä¸Š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;alias ff='fvm flutter'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;export FVM_HOME="$HOME/.local/fvm"&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä¸€èˆ¬ç”¨fish, æ˜¯åœ¨&lt;code&gt;config.fish&lt;/code&gt;é‡ŒåŠ ä¸Š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;alias ff='fvm flutter'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;set FVM_HOME "$HOME/.local/fvm"&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Flutter"></category></entry></feed>