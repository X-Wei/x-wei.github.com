<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>mx's blog</title><link href="https://x-wei.github.io/" rel="alternate"></link><link href="https://x-wei.github.io/feeds/tech.atom.xml" rel="self"></link><id>https://x-wei.github.io/</id><updated>2021-04-03T00:00:00+02:00</updated><entry><title>FlutterçŠ¶æ€ç®¡ç† - ä¸‰ç§Notifierçš„æ¯”è¾ƒ</title><link href="https://x-wei.github.io/tech/flutter-notifiers-compare.html" rel="alternate"></link><published>2021-04-03T00:00:00+02:00</published><updated>2021-04-03T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-04-03:tech/flutter-notifiers-compare.html</id><summary type="html">&lt;p&gt;Flutter(æˆ–è€…æ›´å®½æ³›çš„appå¼€å‘)å¯ä»¥ä¸€å¥è¯æ€»ç»“ä¸º:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;UI = f(state)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å³appçš„å½“å‰ç•Œé¢(UI)åæ˜ äº†å½“å‰ç¨‹åºçŠ¶æ€(state). Flutterçš„çŠ¶æ€ç®¡ç†å°±æ˜¯appæ ¹æ®&lt;strong&gt;å½“å‰appçš„state&lt;/strong&gt;çš„æ˜¾ç¤ºå’Œæ›´æ–°UI.&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å‡è®¾stateæ˜¯ä¸€ä¸ªç±»å‹ä¸º&lt;code&gt;T&lt;/code&gt;çš„object, åœ¨ä¸‹æ–‡çš„è´­ç‰©è½¦ä¾‹å­ä¸­, stateæ˜¯å½“å‰è´­ç‰©è½¦çš„å†…å®¹(ç±»å‹&lt;code&gt;T&lt;/code&gt;=&lt;code&gt;List&amp;lt;Item&amp;gt;&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;å…³äºå¦‚ä½•åœ¨widget treeé‡Œè·å–state, å¯ä»¥æœ‰provider/riverpodç­‰é€‰é¡¹, e.g.&lt;code&gt;Provider&amp;lt;T&amp;gt;&lt;/code&gt;. ä½†æ˜¯å¦‚æœç›´æ¥ç”¨&lt;code&gt;T&lt;/code&gt;ä½œä¸ºçŠ¶æ€ä¼šæœ‰é—®é¢˜: å°±æ˜¯å½“stateçš„å€¼è¢«ä¿®æ”¹ä»¥å, &lt;strong&gt;å¯¹åº”çš„UIå¹¶ä¸ä¼šè‡ªåŠ¨rebuild&lt;/strong&gt;(é™¤éå…¶ä»–é€»è¾‘å¦‚&lt;code&gt;setState&lt;/code&gt;è§¦å‘äº†rebuild).&lt;/p&gt;
&lt;p&gt;å¦‚æœå¸Œæœ›åœ¨stateä¿®æ”¹ä»¥å, UIè‡ªåŠ¨è§¦å‘ç›‘å¬å®ƒçš„UIæ›´æ–°, åˆ™éœ€è¦&lt;strong&gt;ç”¨å„ç§Notifieræ¥åŒ…è£¹state&lt;/strong&gt;. ä¾‹å¦‚æˆ‘ä»¬ä¸ç”¨&lt;code&gt;T&lt;/code&gt;ä½œä¸ºstate, è€Œæ˜¯ç”¨&lt;code&gt;ValueNotifier&amp;lt;T&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¸»è¦ä»‹ç»å’Œæ¯”è¾ƒä¸‰ç§å¸¸ç”¨çš„Notifier: &lt;code&gt;ChangeNotifier&lt;/code&gt;, &lt;code&gt;ValueNotifier&lt;/code&gt; å’Œ &lt;code&gt;StateNotifier&lt;/code&gt;. 
æœ¬æ–‡å‚è€ƒäº†&lt;a href="https://resocoder.com/2020/12/11/flutter-statenotifier-riverpod-tutorial-immutable-state-management/"&gt;Resocoder&lt;/a&gt;, &lt;a href="https://codewithandrea.com/videos/flutter-state-management-setstate-freezed-state-notifier-provider/"&gt;Andrea Bizzotto&lt;/a&gt;ä»¥åŠ&lt;a href="https://blog.funwith.app/posts/provider-with-statenotifier"&gt;FunWithFlutter&lt;/a&gt;çš„tutorial.&lt;/p&gt;
&lt;h2 id="changenotifier"&gt;ChangeNotifier&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ChangeNotifier&lt;/code&gt;æ˜¯Flutter SDKè‡ªå¸¦çš„class: ä¸€ä¸ª&lt;code&gt;ChangeNotifier&lt;/code&gt;å¯ä»¥è¢«widgetsç›‘å¬(listen), stateæ”¹å˜å, å¦‚æœè¦&lt;strong&gt;è®©æ‰€æœ‰ç›‘å¬å®ƒçš„widgeté‡æ–°build&lt;/strong&gt;, éœ€è¦æ‰‹åŠ¨è°ƒç”¨&lt;code&gt;notifyListeners()&lt;/code&gt;å‡½æ•°.&lt;/p&gt;
&lt;p&gt;cf. &lt;a href="https://flutter.dev/docs/development/data-and-backend/state-mgmt/simple#changenotifier"&gt;Flutterå®˜æ–¹çš„state managementæ–‡æ¡£&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æ–‡æ¡£é‡Œçš„ä¾‹å­, æˆ‘ä»¬çš„stateæ˜¯å½“å‰è´­ç‰©è½¦çš„å†…å®¹, äºæ˜¯æˆ‘ä»¬å®šä¹‰&lt;code&gt;CartModel&lt;/code&gt;ç±»(ç»§æ‰¿&lt;code&gt;ChangeNotifier&lt;/code&gt;)ä½œä¸ºstate:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CartModel&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;ChangeNotifier&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt; &lt;span class="c1"&gt;// è´­ç‰©è½¦å†…å®¹, è®¾ä¸ºprivate&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// åªè¯»çš„è´­ç‰©è½¦å†…å®¹(getter)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;UnmodifiableListView&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kd"&gt;get&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;UnmodifiableListView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_items&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="kd"&gt;get&lt;/span&gt; &lt;span class="n"&gt;totalPrice&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_items&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="m"&gt;42&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// å½“å‰è´­ç‰©è½¦æ€»ä»·çš„getter(å‡è®¾æ¯ä»¶éƒ½æ˜¯42å—)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;/// åŠ å…¥ç‰©å“åˆ°è´­ç‰©è½¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_items&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;notifyListeners&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// &amp;lt;==***This call tells the widgets that are listening to this model to rebuild.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;/// æ¸…ç©ºè´­ç‰©è½¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;removeAll&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_items&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;notifyListeners&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// &amp;lt;==***This call tells the widgets that are listening to this model to rebuild.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ChangeNotifierç»“åˆProvider&lt;a href="https://pub.dev/documentation/provider/latest/provider/ChangeNotifierProvider-class.html"&gt;(&lt;code&gt;ChangeNotifierProvider&lt;/code&gt;&lt;/a&gt;), å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„state managementè§£å†³æ–¹æ¡ˆ.&lt;/p&gt;
&lt;h2 id="valuenotifier"&gt;ValueNotifier&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ChangeNotifier&lt;/code&gt;æœ‰ä¸ªé—®é¢˜æ˜¯æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨è°ƒç”¨&lt;code&gt;notifyListeners()&lt;/code&gt;æ‰èƒ½è®©ç›‘å¬çš„widgetæ›´æ–°.&lt;/p&gt;
&lt;p&gt;å¦‚æœæƒ³æ¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™, éƒ½è‡ªåŠ¨é€šçŸ¥ç›‘å¬çš„widget -- è¿™å°±å¯ä»¥ç”¨&lt;code&gt;ValueNotifier&amp;lt;T&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ValueNotifier&lt;/code&gt;æ˜¯&lt;code&gt;ChangeNotifier&lt;/code&gt;çš„å­ç±». å®ƒæŠŠæ•°æ®ä¿å­˜åˆ°&lt;code&gt;T value&lt;/code&gt;é‡Œ, &lt;strong&gt;æ¯å½“&lt;code&gt;value&lt;/code&gt;å‘ç”Ÿå˜åŒ–çš„æ—¶å€™, ç›‘å¬çš„widgetéƒ½é‡æ–°build&lt;/strong&gt;, çœå»äº†&lt;code&gt;notifyListeners()&lt;/code&gt;è¿™ä¸€æ­¥.&lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­, æ”¹ä¸ºç”¨ValueNotifierå°±æ˜¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gd"&gt;-class CartModel extends ChangeNotifier {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+class CartModel extends ValueNotifier&amp;lt;List&amp;lt;Item&amp;gt;&amp;gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;- final List&amp;lt;Item&amp;gt; _items = []; // ä¸ç”¨å£°æ˜_itemsä»¥åŠitems getteräº† -- ValueNotifierè‡ªåŠ¨æŠŠæ•°æ®ä¿å­˜åœ¨`value`&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+ CartModel(): super(&amp;lt;Item&amp;gt;[]); // æ„é€ å‡½æ•°è¦æä¾›valueçš„åˆå§‹å€¼&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;- int get totalPrice =&amp;gt; _items.length * 42;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+ int get totalPrice =&amp;gt; value.length * 42;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  void add(Item item) {&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+   value.add(item);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   _items.add(item);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   notifyListeners(); // ä¸å¿…call notifyListeners()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  }&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  void removeAll() {&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+   value.clear(item);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   _items.clear();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   notifyListeners();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  }&lt;/span&gt;
&lt;span class="code-line"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯¹äºprovider, ValueNotifierä¹Ÿæœ‰å¯¹åº”çš„&lt;a href="https://pub.dev/documentation/provider/latest/provider/ValueListenableProvider-class.html"&gt;ValueListenableProvider&lt;/a&gt;ä¾›ä½¿ç”¨.
å¦‚æœä¸ç”¨provider/riverpod, Flutter SDKé‡Œä¹Ÿæœ‰&lt;a href="https://api.flutter.dev/flutter/widgets/ValueListenableBuilder-class.html"&gt;ValueListenableBuilder&lt;/a&gt;å¯ä»¥åœ¨&lt;code&gt;value&lt;/code&gt;æ›´æ”¹æ—¶è‡ªåŠ¨rebuild -- ç±»ä¼¼providerçš„&lt;code&gt;Consumer&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="statenotifier"&gt;StateNotifier&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;StateNotifier&lt;/code&gt;ä¸æ˜¯Flutter SDKè‡ªå¸¦, éœ€è¦ä½¿ç”¨&lt;a href="https://pub.dev/packages/state_notifier"&gt;&lt;code&gt;state_notifier&lt;/code&gt;&lt;/a&gt;æˆ–è€…&lt;a href="https://pub.dev/packages/flutter_riverpod"&gt;&lt;code&gt;flutter_riverpod&lt;/code&gt;&lt;/a&gt;åŒ…. ä¹Ÿæœ‰å¯¹åº”çš„&lt;code&gt;StateNotifierProvider&lt;/code&gt;(æ¥è‡ªflutter_state_notifieråŒ…), ç”¨æ³•å’Œ&lt;code&gt;ValueListenableProvider&lt;/code&gt;ç±»ä¼¼.&lt;/p&gt;
&lt;p&gt;Flutterçš„&lt;code&gt;ValueNotifier&lt;/code&gt;ä¸»è¦æœ‰ä»¥ä¸‹é—®é¢˜:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;ValueNotifier&lt;/code&gt;å±äºFlutterè€Œä¸æ˜¯çº¯dart, ä¸èƒ½ç”¨äºå†™éflutterçš„åº“;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt;æ˜¯publicæˆå‘˜ -- ä¹Ÿå°±æ˜¯è¯´&lt;strong&gt;ä»»ä½•äººéƒ½å¯ä»¥åœ¨å¤–éƒ¨ä¿®æ”¹&lt;code&gt;ValueNotifier.value&lt;/code&gt;&lt;/strong&gt;, å¬ä¸Šå»å¾ˆä¸å®‰å…¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;StateNotifier&lt;/code&gt;å°±è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®ƒä¸ä¾èµ–flutter, å¯ç”¨äºçº¯dartçš„å¼€å‘;&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;StateNotifier&lt;/code&gt;ç±»ä¹‹å¤–ä¿®æ”¹&lt;code&gt;state&lt;/code&gt;çš„æ—¶å€™, ä¼š&lt;strong&gt;æœ‰lintingæç¤º&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;StateNotifier&lt;/code&gt;ç”¨æ³•å’Œ&lt;code&gt;ValueNotifier&lt;/code&gt;å‡ ä¹ä¸€æ ·, åªä¸è¿‡&lt;code&gt;value&lt;/code&gt;å˜æˆäº†&lt;code&gt;state&lt;/code&gt;, è¿ç§»èµ·æ¥åº”è¯¥å¾ˆå®¹æ˜“:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gd"&gt;-class CartModel extends ValueNotifier&amp;lt;List&amp;lt;Item&amp;gt;&amp;gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+class CartModel extends StateNotifier&amp;lt;List&amp;lt;Item&amp;gt;&amp;gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  CartModel(): super(&amp;lt;Item&amp;gt;[]); // æ„é€ å‡½æ•°è¦æä¾›stateçš„åˆå§‹å€¼&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;- int get totalPrice =&amp;gt; value.length * 42;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+ int get totalPrice =&amp;gt; state.length * 42;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  void add(Item item) {&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+   state.add(item);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   value.add(item);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  }&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  void removeAll() {&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gi"&gt;+   state.clear();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="gd"&gt;-   value.clear();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  }&lt;/span&gt;
&lt;span class="code-line"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="zong-jie"&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;TLDR: &lt;code&gt;StateNotifier&lt;/code&gt;æ˜¯å å¥½çš„.&lt;/strong&gt;&lt;/p&gt;
&lt;table class=" table-striped table table-hover"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ChangeNotifier&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ValueNotifier&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;StateNotifier&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Flutter SDK&lt;/td&gt;
&lt;td&gt;Flutter SDK&lt;/td&gt;
&lt;td&gt;state_notifier package&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è·å–state&lt;/td&gt;
&lt;td&gt;æ‰‹å†™getter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;.value&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;.state&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¿®æ”¹state&lt;/td&gt;
&lt;td&gt;æ‰‹å†™setteræˆ–è€…å…¶ä»–function&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;æ˜¯public, ä»»ä½•äººéƒ½å¯ä¿®æ”¹&lt;/td&gt;
&lt;td&gt;åœ¨å¤–éƒ¨ä¿®æ”¹&lt;code&gt;state&lt;/code&gt;ä¼šæœ‰lintæç¤º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çŠ¶æ€å˜åŒ–æ—¶è§¦å‘ç›‘å¬UIæ›´æ–°&lt;/td&gt;
&lt;td&gt;æ‰‹åŠ¨&lt;code&gt;notifyListeners()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¦å¤–&lt;code&gt;StateNotifier&lt;/code&gt;æ¨èç»“åˆ&lt;a href="https://pub.dev/packages/freezed"&gt;freezed package&lt;/a&gt;ä½¿ç”¨, ä»¥åæœ‰æ—¶é—´å†æ€»ç»“ä¸€ä¸‹freezedçš„ç”¨æ³•ä»¥åŠå®ƒå¥½åœ¨å“ªé‡Œ.&lt;/p&gt;</summary><category term="Flutter"></category></entry><entry><title>å¾®ä¿¡å…¬ä¼—å·ä¸Šæ‰‹ä½“éªŒ</title><link href="https://x-wei.github.io/tech/weixin-gongzhonghao-tiyan.html" rel="alternate"></link><published>2021-03-21T19:30:00+01:00</published><updated>2021-03-21T19:30:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-03-21:tech/weixin-gongzhonghao-tiyan.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å†™å…¬ä¼—å·æœ€å¥½çš„æ—¶æœºæ˜¯äº”å¹´å‰, å…¶æ¬¡æ˜¯ç°åœ¨.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; æ‰€ä»¥æˆ‘ä¿©æœˆå‰æ³¨å†Œäº†ä¸ªå¾®ä¿¡å…¬ä¼—å·ğŸ±:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/weixin-gongzhonghao-tiyan/Pasted%20image%2020210321193829.png"/&gt;&lt;/p&gt;
&lt;p&gt;è€Œæ‹–å»¶ä¸¤ä¸ªæœˆä»¥å, è¿™å‘¨æœ«ä½“éªŒäº†æ’°å†™å’Œå‘å¸ƒå…¬ä¼—å·çš„æµç¨‹, æ„Ÿè§‰è¿˜æ˜¯å’Œé€šè¿‡githubå‘å¸ƒblogæœ‰ç‚¹åŒºåˆ«çš„, è¿™é‡Œè®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;h3 id="jiang-markdownzhuan-huan-wei-gong-zhong-hao-wen-zhang"&gt;å°†markdownè½¬æ¢ä¸ºå…¬ä¼—å·æ–‡ç« &lt;/h3&gt;
&lt;p&gt;å¾®ä¿¡å…¬ä¼—å·çš„ç¼–è¾‘ç•Œé¢ç±»ä¼¼word, æˆ‘ä»markdownå¯¼è¿‡å»çš„è¯éœ€è¦å€Ÿç”¨ç¬¬ä¸‰æ–¹å·¥å…·. å…¶å®è¿™ç§å·¥å…·è¿˜æŒºå¤šçš„, æˆ‘æ‰¾åˆ°äº†ä¸‰ä¸ª:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://md.qikqiak.com/"&gt;https://md.qikqiak.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://md.openwrite.cn/"&gt;https://md.openwrite.cn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.mdnice.com/"&gt;https://www.mdnice.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘æœ€æ¨èçš„æ˜¯æœ€åä¸€ä¸ªç½‘ç«™"mdnice", å’Œå¦å¤–ä¸¤ä¸ªç›¸æ¯”æœ‰ä¸å°‘ä¼˜ç‚¹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ”¯æŒå„ç§&lt;a href="https://product.mdnice.com/themes/"&gt;æ’ç‰ˆä¸»é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç™»å½•å¸å·ä»¥åå¯ä»¥ä¿å­˜å¤šä¸ªæœ€è¿‘ç¼–è¾‘çš„æ–‡ä»¶ -- è™½è¯´ç†è®ºä¸Šåªè¦ç›´æ¥å¤åˆ¶ç²˜è´´markdownå°±å¥½, ä½†æ˜¯è¯´ä¸å®šå°±è¦é’ˆå¯¹å…¬ä¼—å·è¿›è¡Œè°ƒæ•´, æ‰€ä»¥èƒ½ä¿å­˜ä¸€ä¸ªé’ˆå¯¹å…¬ä¼—å·çš„&lt;/li&gt;
&lt;li&gt;æ”¯æŒæŠŠå¤–é“¾è½¬æ¢ä¸ºè„šæ³¨(è§ä¸‹æ–‡)&lt;/li&gt;
&lt;li&gt;æ”¯æŒä¸å°‘ä»£ç å—ä¸»é¢˜&lt;/li&gt;
&lt;li&gt;ä»£ç å—å¤ªé•¿æ—¶å¯ä»¥æ¨ªå‘æ»šåŠ¨&lt;/li&gt;
&lt;li&gt;è¿˜æ”¯æŒMacé£æ ¼çš„ä»£ç å—, çœ‹ä¸Šå»å¾ˆé«˜çº§:&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/weixin-gongzhonghao-tiyan/Pasted%20image%2020210321191737.png"/&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="qian-ru-shi-pin"&gt;åµŒå…¥è§†é¢‘&lt;/h3&gt;
&lt;p&gt;æ™®é€šmarkdowné‡Œå¯ä»¥æ·»åŠ youtubeæˆ–è€…Bç«™çš„iframe htmlä»£ç åµŒå…¥è§†é¢‘. ä½†æ˜¯å¾®ä¿¡å…¬ä¼—å·ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½.&lt;/p&gt;
&lt;p&gt;ä¼¼ä¹åªæ”¯æŒåµŒå…¥è…¾è®¯è§†é¢‘ä¸Šçš„å†…å®¹, æˆ–è€…æŠŠè§†é¢‘æ‰‹åŠ¨ä¸Šä¼ åˆ°ç´ æä¸­ç„¶ååµŒå…¥.&lt;/p&gt;
&lt;h3 id="bu-zhi-chi-wai-lian"&gt;ä¸æ”¯æŒå¤–é“¾&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾®ä¿¡å…¬ä¼—å·ä»…æ”¯æŒå…¬ä¼—å·æ–‡ç« é“¾æ¥ï¼Œå³åŸŸåä¸º&lt;code&gt;https://mp.weixin.qq.com/&lt;/code&gt;çš„åˆæ³•é“¾æ¥.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´å¾®ä¿¡å…¬ä¼—å·çš„é“¾æ¥åªèƒ½æŒ‡å‘å¦ä¸€ç¯‡å…¬ä¼—å·æ–‡ç« , ä¸èƒ½æŒ‡å‘å…¬ä¼—å·ä¹‹å¤–çš„å†…å®¹...&lt;br/&gt;
è¿™ä¸ªæ¯”è§†é¢‘çš„é—®é¢˜è¿˜è›‹ç–¼... markdowné‡Œå¥½å¤šçš„é“¾æ¥, è½¬æ¢ä»¥åç›´æ¥æ²¡äº†.&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å¥½åœ¨mdniceæ”¯æŒæŠŠæ‰€æœ‰çš„é“¾æ¥å˜æˆè„šæ³¨, è¿™æ ·ä¹Ÿå¯ä»¥å‡‘åˆ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/weixin-gongzhonghao-tiyan/Pasted%20image%2020210321192409.png"/&gt;&lt;/p&gt;
&lt;h3 id="zi-ding-yi-cai-dan-zi-dong-hui-fu"&gt;è‡ªå®šä¹‰èœå•/è‡ªåŠ¨å›å¤&lt;/h3&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/weixin-gongzhonghao-tiyan/Pasted%20image%2020210321193340.png"/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ç›®å‰åªåŠ äº†ä¸€ä¸ª"å†å²æ–‡ç« "çš„èœå•, cf. &lt;a href="https://www.jianshu.com/p/1bca96d3c76f"&gt;https://www.jianshu.com/p/1bca96d3c76f&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦å¤–çœ‹ä¸Šå»è®¾ç½®è‡ªåŠ¨å›å¤ä¹ŸæŒºå®¹æ˜“çš„:&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/weixin-gongzhonghao-tiyan/Pasted%20image%2020210321193439.png"/&gt;&lt;/p&gt;</summary><category term="å¾®ä¿¡å…¬ä¼—å·"></category></entry><entry><title>é€šè¿‡Flutter hooksç®€åŒ–ä»£ç </title><link href="https://x-wei.github.io/tech/note-on-flutter-hooks.html" rel="alternate"></link><published>2021-03-21T00:00:00+01:00</published><updated>2021-03-21T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-03-21:tech/note-on-flutter-hooks.html</id><summary type="html">&lt;p&gt;çœ‹äº†Resocoderå’ŒRobert Brunhageçš„ä¸¤ä¸ªè§†é¢‘, è¿™ç¯‡æ€»ç»“ä¸€ä¸‹å…¶ä¸­çš„å†…å®¹(æˆ‘å…¶å®è¿˜æ²¡å®è·µè¿‡).&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å‚è€ƒè‡ª:
- &lt;a href="https://pub.dev/packages/flutter_hooks"&gt;pub package&lt;/a&gt;&lt;br/&gt;
- &lt;a href="https://www.youtube.com/watch?v=A1DUBgIsCv8"&gt;Video by Robert Brunhage&lt;/a&gt;&lt;br/&gt;
- &lt;a href="https://resocoder.com/2020/01/21/ flutter-hooks-hide-fab-animation-100-widget-code-reuse/"&gt;Tutorial by Resocoder&lt;/a&gt; &lt;/p&gt;
&lt;h2 id="the-problem"&gt;The problem&lt;/h2&gt;
&lt;p&gt;Flutter hooksæƒ³è§£å†³çš„é—®é¢˜æ˜¯&lt;code&gt;StatefulWidget&lt;/code&gt;çš„ä¸€äº›å¸¸è§patternå¤ªå¤æ‚, å‡å°‘äº†ä»£ç çš„å¯è¯»æ€§("readability").&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹ä¾‹å­å°±æ˜¯animation controller:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;StatefulWidget&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;_MyPageState&lt;/span&gt; &lt;span class="n"&gt;createState&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_MyPageState&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;_MyPageState&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;MyPage&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="n"&gt;SingleTickerProviderStateMixin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;AnimationController&lt;/span&gt; &lt;span class="n"&gt;_animController&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;initState&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;initState&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_animController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;AnimationController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;vsync:&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;duration:&lt;/span&gt; &lt;span class="n"&gt;kThemeAnimationDuration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;value:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// initially visible&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// use _animController here&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_animController&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ç§patternåœ¨vanilla flutteré‡Œç»å¸¸è¢«ä½¿ç”¨, ä½†æ˜¯å¯¹åŒä¸€ä¸ªcontrolleråœ¨å¥½å‡ ä¸ªåœ°æ–¹æ“ä½œ(&lt;code&gt;initiState()&lt;/code&gt;/&lt;code&gt;setState()&lt;/code&gt;/&lt;code&gt;dispose()&lt;/code&gt;), çœŸçš„ä¸å¥½è¯».&lt;/p&gt;
&lt;p&gt;Flutter hookså°±å¯ä»¥æŠŠè¿™ç§é‡å¤çš„patternæŠ½ç¦»å‡ºæ¥, æŠŠ&lt;code&gt;StatefulWidget&lt;/code&gt;å˜æˆç±»ä¼¼&lt;code&gt;StatelessWidget&lt;/code&gt;çš„&lt;code&gt;HookWidget&lt;/code&gt;, ç®€åŒ–ä»£ç , å¤§å¤§æé«˜å¯è¯»æ€§.&lt;/p&gt;
&lt;p&gt;(btw è¿™ä¸ªåŒ…çš„ä½œè€…æ˜¯RÃ©mi Rousseletå¤§ç¥, è´¨é‡æœ‰ä¿éšœğŸ‘Œ)&lt;/p&gt;
&lt;h2 id="shi-yong-xian-cheng-de-hooks"&gt;ä½¿ç”¨ç°æˆçš„Hooks&lt;/h2&gt;
&lt;p&gt;å¯¹äºå¸¸ç”¨çš„patternæœ‰ç°æˆçš„hookså¯ä»¥ç›´æ¥å¥—ç”¨. æ¯”å¦‚ä¸Šé¢çš„animation controllerä¾‹å­, ç”¨flutter hookså¯ä»¥å†™æˆè¿™æ ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HookWidget&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;//! StatelessWidget =&amp;gt; HookWidget&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;animController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;useAnimationController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;duration:&lt;/span&gt; &lt;span class="n"&gt;kThemeAnimationDuration&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;initialValue:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// use _animController here&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;âš¡ï¸Flutter hooksè‡ªå¸¦äº†ä¸å°‘&lt;a href="https://pub.dev/packages/flutter_hooks#existing-hooks"&gt;ç°æˆçš„hooks&lt;/a&gt;, æœ‰çš„é¢å‘Animation, æœ‰çš„é¢å‘Streamç­‰ç­‰, æœ‰æ—¶é—´å¯ä»¥å¥½å¥½çœ‹ä¸€çœ‹...&lt;/p&gt;
&lt;h2 id="zi-ding-yi-hook"&gt;è‡ªå®šä¹‰Hook&lt;/h2&gt;
&lt;p&gt;cf. Resocoderçš„&lt;a href="https://resocoder.com/2020/01/21/flutter-hooks-hide-fab-animation-100-widget-code-reuse/#t-1616317538465"&gt;æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç°æˆçš„hookä¸æ»¡è¶³æ¡ä»¶, å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿéå¸¸å®¹æ˜“, åŸºæœ¬å°±æ˜¯æŠŠåŸæ¥&lt;code&gt;StatefulWidget/State&amp;lt;Foo&amp;gt;&lt;/code&gt;çš„å†…å®¹å˜æˆ&lt;code&gt;Hook&amp;lt;R&amp;gt;/HookState&amp;lt;R,Foo&amp;gt;&lt;/code&gt;. å…¶ä¸­&lt;code&gt;Foo&lt;/code&gt;æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»å, &lt;code&gt;R&lt;/code&gt;åˆ™æ˜¯stateçš„ç±»å‹. æ¯”å¦‚å¯¹äºä¹‹å‰çš„ä¾‹å­: &lt;code&gt;Foo&lt;/code&gt;=&lt;code&gt;MyPage&lt;/code&gt;, &lt;code&gt;R&lt;/code&gt;=&lt;code&gt;AnimationController&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œåˆ—ä¸€ä¸‹äºŒè€…çš„åŒºåˆ«, åŸºæœ¬æ˜¯ä¸€ä¸€å¯¹åº”çš„, æ‰€ä»¥è¿ç§»èµ·æ¥ä¸éš¾:&lt;/p&gt;
&lt;table class=" table-striped table table-hover"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;StatefulWidget&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Hook&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;class Foo extends StatefulWidget&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class Foo extends Hook&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;createState() =&amp;gt; State&amp;lt;Foo&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;createState() =&amp;gt; HookState&amp;lt;R&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class=" table-striped table table-hover"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;State&amp;lt;Foo&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;HookState&amp;lt;R, Foo&amp;gt;&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;R _data;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;R _data;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;initState() {_data=...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;initHook() {_data=...}&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;build(ctx) =&amp;gt; Widget&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;build(ctx) =&amp;gt; R&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;dispose()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dispose()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;widget.xxx&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;hook.xxx&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å½“è‡ªå®šä¹‰çš„&lt;code&gt;Hook/HookState&lt;/code&gt;å†™å¥½ä»¥å, æ ¹æ®Flutter hooksçš„æƒ¯ä¾‹, éœ€è¦å†™ä¸€ä¸ª&lt;code&gt;useXxHooks&lt;/code&gt;çš„å‡½æ•°, è¿”å›ç±»å‹æ˜¯&lt;code&gt;R&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt; &lt;span class="n"&gt;useMyHooks&lt;/span&gt;&lt;span class="p"&gt;(...)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Hook&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_FooHook&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="usestateuseeffect"&gt;useState/useEffect&lt;/h2&gt;
&lt;p&gt;cf. Robert Brunhageçš„&lt;a href="https://www.youtube.com/watch?v=A1DUBgIsCv8"&gt;è§†é¢‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;strong&gt;ä¸è¿½æ±‚é€»è¾‘å¤ç”¨&lt;/strong&gt;, åªæƒ³å»æ‰&lt;code&gt;initState()&lt;/code&gt;/&lt;code&gt;dispose()&lt;/code&gt;çš„åœºæ™¯, å¯ä»¥è€ƒè™‘ç›´æ¥æŠŠä¸€ä¸ª&lt;code&gt;StatefulWidget&lt;/code&gt;å˜æˆ&lt;code&gt;HookWiget&lt;/code&gt;. Flutter hooksæä¾›äº†&lt;code&gt;useState&lt;/code&gt;å’Œ&lt;code&gt;useEffect&lt;/code&gt;, è®©æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨&lt;code&gt;HookWiget.build()&lt;/code&gt;å‡½æ•°é‡Œé¢åˆ›å»º/ä¿®æ”¹çŠ¶æ€.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºçŠ¶æ€&lt;/strong&gt;: ç”¨&lt;a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/useState.html"&gt;&lt;code&gt;useState(R initialVal)&lt;/code&gt;&lt;/a&gt;.\
æ³¨æ„è¿”å›å€¼çš„æ˜¯ä¸€ä¸ª&lt;code&gt;ValueNotifier&amp;lt;R&amp;gt;&lt;/code&gt;, è·å¾—åŒ…å«çš„å€¼éœ€è¦&lt;code&gt;.value&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹çŠ¶æ€&lt;/strong&gt;: &lt;a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/useEffect.html"&gt;&lt;code&gt;useEffect()&lt;/code&gt;&lt;/a&gt;, æœ‰ä¸¤ä¸ªå‚æ•°:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªå‚æ•°(&lt;code&gt;effect()&lt;/code&gt;)æ˜¯ä¸€ä¸ªå‡½æ•°&lt;code&gt;Dispose? Function()&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;å¯ä»¥æŠŠä¿®æ”¹çŠ¶æ€çš„å†…å®¹(æ¯”å¦‚åŸå…ˆ&lt;code&gt;setState&lt;/code&gt;çš„å†…å®¹)æ”¾åœ¨è¿™é‡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;effect&lt;/code&gt;å¯ä»¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°(&lt;code&gt;Dispose?&lt;/code&gt;), è¿™ä¸ªå‡½æ•°ä¼š_åœ¨&lt;code&gt;effect()&lt;/code&gt;ä¸‹æ¬¡ä¸€è¢«è°ƒç”¨æˆ–è€…å½“widget disposeçš„æ—¶å€™è¿è¡Œ_.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªå¯é€‰å‚æ•°&lt;code&gt;keys&lt;/code&gt;æ˜¯ä¸€ä¸ªlist, æ§åˆ¶&lt;code&gt;effect()&lt;/code&gt;ä½•æ—¶è¢«è°ƒç”¨:&lt;ul&gt;
&lt;li&gt;å¦‚æœä¸ºnull(é»˜è®¤), åˆ™_æ¯æ¬¡&lt;code&gt;build()&lt;/code&gt;_ éƒ½ä¼šè°ƒç”¨&lt;code&gt;effect()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœénull, åˆ™åªåœ¨_ç¬¬ä¸€æ¬¡&lt;code&gt;build()&lt;/code&gt;, ä»¥åŠå½“ä»»ä½•keyså…ƒç´ æ”¹å˜æ—¶_æ‰è°ƒç”¨&lt;code&gt;effect()&lt;/code&gt;\
   &lt;strong&gt;æ³¨æ„: &lt;code&gt;keys&lt;/code&gt;å¯ä»¥æ˜¯ç©ºlist, ä½†énull&lt;/strong&gt;, æ¯”å¦‚&lt;code&gt;keys=[]&lt;/code&gt;, æ­¤æ—¶effectåªè¿è¡Œä¸€æ¬¡.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ª&lt;code&gt;StatefulWidget&lt;/code&gt;ç®€åŒ–ä¸ºç±»ä¼¼&lt;code&gt;StatelessWidget&lt;/code&gt;çš„&lt;code&gt;HookWidget&lt;/code&gt;, ç®€åŒ–ä»£ç . ä¾‹å¦‚ç”¨useState/useEffectå†™ä¸€ä¸ªç®€å•è®¡æ—¶å™¨, ä»£ç ç›¸æ¯”vanilla flutterè¦ç®€æ´è®¸å¤š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyTimerPage&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HookWidget&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;_numberNotifier&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;useState&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;//! Create state&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;useEffect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;  &lt;span class="c1"&gt;//! Change state&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="cm"&gt;/*effect=*/&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="c1"&gt;//! ~= initState()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;timer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Timer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;periodic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="n"&gt;Duration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nl"&gt;seconds:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="c1"&gt;//! ~= setState()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;          &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;_numberNotifier&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;timer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cancel&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;//! ~= dispose()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;},&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="cm"&gt;/*keys=*/&lt;/span&gt;&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt;  &lt;span class="c1"&gt;//! =&amp;gt; effect() is called only once&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Scaffold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;body:&lt;/span&gt; &lt;span class="n"&gt;Center&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_numberNotifier&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“ç„¶è¿™æ ·å†™çš„ç¼ºç‚¹å°±æ˜¯é€»è¾‘æ— æ³•å¤ç”¨, è¦å¤ç”¨é€»è¾‘çš„è¯å¯ä»¥å‚è€ƒä¸Šä¸€èŠ‚"è‡ªå®šä¹‰Hook":&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æŠŠuseState/useEffectçš„å†…å®¹æ”¾è¿›ä¸€ä¸ª&lt;code&gt;_MyTimerHook extends Hook&amp;lt;int&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®šä¹‰&lt;code&gt;int useMyTimer()&lt;/code&gt;å‡½æ•°:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dart
int useMyTimer() {
  return Hook.use(_MyTimerHook());
}&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨&lt;code&gt;HookWidget&lt;/code&gt;é‡Œä½¿ç”¨&lt;code&gt;useMyTimerHook&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dart
class MyTimerPage extends HookWidget {
  @override
  Widget build(BuildContext context) {
    final number = useMyTimer();
    return Text(number.toString());
  }
}&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="zui-jia-shi-jian"&gt;æœ€ä½³å®è·µ&lt;/h2&gt;
&lt;p&gt;pubä¸Šåˆ—å‡ºäº†å‡ æ¡&lt;a href="https://pub.dev/packages/flutter_hooks#rules"&gt;æœ€ä½³å®è·µ&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰hookçš„å‡½æ•°éƒ½ä»¥'use'å¼€å¤´:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// starts with `use`, good name&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// doesn't start with `use`, could confuse people into thinking that this isn't a hook&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;myHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸è¦åœ¨åˆ†æ”¯æ¡ä»¶é‡Œä½¿ç”¨hook:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;//! Good: DO call hooks unconditionally&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;Widget&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuildContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;useMyHook&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;//! BAD: DON'T wrap use into a condition&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;// ....&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Flutter"></category></entry><entry><title>æå‡Flutter Appçš„è®¾è®¡ç»†èŠ‚</title><link href="https://x-wei.github.io/tech/flutter-improve-UI-details.html" rel="alternate"></link><published>2021-03-20T00:00:00+01:00</published><updated>2021-03-20T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2021-03-20:tech/flutter-improve-UI-details.html</id><summary type="html">&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦æ€»ç»“äº†FlutterEngageé‡Œçš„è¿™ä¸ªtalk:&lt;/p&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="embed-responsive-item" frameborder="0" height="315" src="https://www.youtube.com/embed/MIepaf7ks40" title="YouTube video player" width="560"&gt;&lt;/iframe&gt;
&lt;p&gt;(è¿™ä¸ªtalkçš„åå­—çš„ä¸­æ–‡ç¿»è¯‘æŒºç‰›çš„: "å°äº‹ä¸€æ¡©ï¼šæˆä¸ºå¼€å‘å’Œè®¾è®¡ä¿±ä½³çš„ç¥çº§äººç‰©")&lt;/p&gt;
&lt;p&gt;talké‡Œä»£ç åœ°å€åœ¨: &lt;a href="https://github.com/filiph/little_things"&gt;https://github.com/filiph/little_things&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªtalkè¿˜æ˜¯æŒºæœ‰æ„æ€çš„, ä»‹ç»äº†å¦‚ä½•æå‡Appçš„è®¾è®¡ç»†èŠ‚ä»è€Œè·å¾—æ›´é«˜çš„ &lt;strong&gt;"Perceived value"&lt;/strong&gt;: 
æœ‰æ—¶å€™appæœ¬èº«çš„åŠŸèƒ½æ€§å’ŒæŠ€æœ¯æ€§æ˜¯ä¸€æ–¹é¢, ä½†æ˜¯å‘ˆç°ç»™ç”¨æˆ·çš„æ„Ÿè§‰å´æœ‰å¯èƒ½å› ä¸ºä¸€ç‚¹ç‚¹ç»†èŠ‚è€Œå®Œå…¨ä¸åŒ. è¿™ä¸€ç‚¹æˆ‘ä¹‹å‰ä¸å¤ªé‡è§†, ç»†æƒ³ä¸€ä¸‹ç¡®å®æœ‰é“ç†.&lt;/p&gt;
&lt;h2 id="1-white-space"&gt;1. White space&lt;/h2&gt;
&lt;p&gt;å¤šä½¿ç”¨paddingæ·»åŠ ç©ºéš™å’Œç•™ç™½, ä½“ç°ä¸€ç§é«˜çº§æ„Ÿ~
ç»“åˆFlutterçš„hot reloadå¯ä»¥å¿«çš„å®éªŒ æ‰¾åˆ°åˆé€‚çš„padding.&lt;/p&gt;
&lt;h2 id="2-typography"&gt;2. Typography&lt;/h2&gt;
&lt;p&gt;æ¢ä¸ªå¥½çœ‹çš„å­—ä½“ä¹Ÿå¯ä»¥è®©åº”ç”¨çœ‹èµ·æ¥éå¸¸é«˜çº§.&lt;/p&gt;
&lt;p&gt;GoogleFonté…åˆhot reloadæ¥é€‰æ‹©å¥½çš„å­—ä½“&lt;/p&gt;
&lt;h2 id="3-color"&gt;3. Color&lt;/h2&gt;
&lt;p&gt;ç»™appæ·»åŠ ç‰¹åˆ«çš„é…è‰².&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä»ç½‘ä¸Šæ‰¾ä¸€äº›é…è‰²æ–¹æ¡ˆ(color palette), æ¯”å¦‚:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://coolors.co/palettes/trending&lt;/li&gt;
&lt;li&gt;https://undesign.learn.uno/colors/&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŠŠé€‰å¥½çš„ColorPaletteæ”¾åœ¨&lt;code&gt;MaterialApp.theme&lt;/code&gt;é‡Œå¤´: &lt;a href="https://github.com/filiph/little_things/blob/main/lib/main.dart#L27-L55"&gt;https://github.com/filiph/little_things/blob/main/lib/main.dart#L27-L55&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="4-iconography"&gt;4. Iconography&lt;/h2&gt;
&lt;p&gt;æ„æ€å°±æ˜¯é¼“åŠ±å¤šç»™appå¤šåŠ ä¸€äº›å›¾ç‰‡/å›¾æ ‡.&lt;/p&gt;
&lt;p&gt;Filipçš„ä¾‹å­ä»–ç”¨åˆ°äº†BoxDecoration(å¯ä»¥é…ç½®gradientä»¥åŠimage): &lt;a href="https://github.com/filiph/little_things/blob/main/lib/src/list.dart#L18-L32"&gt;https://github.com/filiph/little_things/blob/main/lib/src/list.dart#L18-L32&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Container&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;decoration:&lt;/span&gt; &lt;span class="n"&gt;BoxDecoration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;gradient:&lt;/span&gt; &lt;span class="n"&gt;LinearGradient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;colors:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF96E3FF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9EECFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FEBFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FEEFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xFF9FECFF&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="p"&gt;],&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;image:&lt;/span&gt; &lt;span class="n"&gt;DecorationImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;image:&lt;/span&gt; &lt;span class="n"&gt;AssetImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'assets/meditation.jpg'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;alignment:&lt;/span&gt; &lt;span class="n"&gt;Alignment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bottomCenter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="n"&gt;Scaffold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="cm"&gt;/*...*/&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="5-animation"&gt;5. Animation&lt;/h2&gt;
&lt;p&gt;åŠ¨ç”»ä¹Ÿå¯ä»¥å¾ˆå¤§æå‡ç”¨æˆ·å¯¹appçš„è¯„ä»·.&lt;/p&gt;
&lt;p&gt;é»˜è®¤animationçš„curveæ˜¯linear, ä¸€èˆ¬è¿™ç§curveéƒ½ä¼šè®©äººæ„Ÿè§‰å¾ˆä¸è‡ªç„¶. å¯ä»¥å°è¯•ä¸€ä¸‹&lt;code&gt;easeIn&lt;/code&gt;/&lt;code&gt;easeOut&lt;/code&gt;è¿™ç§.&lt;/p&gt;
&lt;p&gt;å¦å¤–è¿˜å¯ä»¥åŒæ—¶æä¾›å¤šä¸ªanimation (slideTransition / resize / text ç­‰ç­‰), è¿™æ—¶å€™å¦‚æœæ‰€æœ‰animationä¸€èµ·è·‘å…¶å®ä¼šå¾ˆä¹±, æˆ‘ä»¬åº”è¯¥ç”¨ &lt;strong&gt;"Staggered Animation"&lt;/strong&gt;, å°±æ˜¯ä¸€ä¸ªanimationæ¥å¦ä¸€ä¸ªanimation.&lt;/p&gt;
&lt;p&gt;ç”¨&lt;code&gt;curve: Interval(0.2, 0.6)&lt;/code&gt;, å¯ä»¥è®©è¿™ä¸ªanimationåœ¨æ•´ä¸ªanimation(&lt;code&gt;parent&lt;/code&gt;)çš„20%~60%çš„æ—¶é—´æ®µè¿è¡Œ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/flutter-improve-UI-details/Pasted%20image%2020210320221018.png"/&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ScaleTransition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;scale:&lt;/span&gt; &lt;span class="n"&gt;CurvedAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;curve:&lt;/span&gt; &lt;span class="n"&gt;Interval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="m"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="m"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nl"&gt;curve:&lt;/span&gt; &lt;span class="n"&gt;Curves&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;elasticOut&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nl"&gt;parent:&lt;/span&gt; &lt;span class="n"&gt;_controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="p"&gt;),&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nl"&gt;child:&lt;/span&gt; &lt;span class="cm"&gt;/*...*/&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡ŒFilipè‡ªå·±å®ç°äº†ä¸€ä¸ªæ˜¾ç¤ºæ–‡å­—çš„widget(&lt;code&gt;TrackedOutText&lt;/code&gt;), cf. &lt;a href="https://github.com/filiph/little_things/blob/main/lib/src/congrats.dart"&gt;https://github.com/filiph/little_things/blob/main/lib/src/congrats.dart&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="zui-zhong-xiao-guo-dui-bi"&gt;æœ€ç»ˆæ•ˆæœå¯¹æ¯”&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/flutter-improve-UI-details/ui-before-and-after.gif"/&gt;&lt;/p&gt;
&lt;p&gt;Appè´¨æ„Ÿçš„æå‡è¿˜æ˜¯æŒºæ˜æ˜¾çš„!&lt;/p&gt;
&lt;p&gt;å¦å¤–åŸè§†é¢‘çš„ç®€ä»‹é‡Œä¹Ÿæä¾›äº†ä¸€äº›UIè®¾è®¡çš„è§†é¢‘å¯ä»¥å‚è€ƒå…¥é—¨.&lt;/p&gt;</summary><category term="Flutter"></category></entry><entry><title>ç”¨analyzeræé«˜Flutteré¡¹ç›®çš„ä»£ç è´¨é‡</title><link href="https://x-wei.github.io/tech/flutter-use-analyzer.html" rel="alternate"></link><published>2020-10-18T00:00:00+02:00</published><updated>2020-10-18T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2020-10-18:tech/flutter-use-analyzer.html</id><summary type="html">&lt;p&gt;Darté»˜è®¤çš„linteré…ç½®æœ‰ç‚¹å¼±, æœ‰å¾ˆå¤šæœ‰é—®é¢˜ä»£ç ä¹Ÿä¸æŠ¥é”™æˆ–è­¦å‘Š.
æ·»åŠ ä¸€ä¸ªanalyzerå¯ä»¥åº”ç”¨dartçš„æœ€ä½³ä»£ç å®è·µ, å¯¹ä¸€äº›ä¸å¥½çš„ä»£ç é£æ ¼æå‡ºè­¦å‘Šæˆ–è€…ç›´æ¥æŠ¥é”™, ä»è€Œæé«˜ä»£ç è´¨é‡.&lt;/p&gt;
&lt;p&gt;Cf. resocoderçš„ä»‹ç»&lt;a href="https://resocoder.com/2020/01/17/dart-linting-tutorial-healthy-flutter-codebase-with-analysis_options-yaml/"&gt;æ–‡ç« &lt;/a&gt; (å’Œè§†é¢‘)&lt;/p&gt;
&lt;h2 id="use-an-analyzer"&gt;Use an analyzer&lt;/h2&gt;
&lt;p&gt;Resocoderæ¨è&lt;a href="https://pub.dev/packages/lint"&gt;lint&lt;/a&gt;, é‡Œé¢æä¾›äº†ä¸€äº›æœ€ä½³çš„dartå’Œflutterä»£ç é£æ ¼. ç±»ä¼¼çš„é€‰æ‹©è¿˜æœ‰pandenticå’Œeffective_dart.&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ–¹å¼å°±æ˜¯, å…ˆåœ¨pubsepc.yamlé‡Œæ·»åŠ ä¾èµ–:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# pubspec.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;dependency_overrides&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;lint&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;^1.3.0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªanalysis_options.yamlæ–‡ä»¶:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;package:lint/analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="exclude-folders-disable-rules"&gt;Exclude folders / disable rules&lt;/h3&gt;
&lt;p&gt;analyzeré»˜è®¤ä¼šæ‰«ææ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„dartä»£ç , æœ‰æ—¶å€™ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æˆ–è€…åœ¨&lt;code&gt;build/&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹çš„ä»£ç å¹¶ä¸éœ€è¦è¢«åˆ†æ, å¯ä»¥ç”¨&lt;code&gt;exclude&lt;/code&gt;æŠŠå®ƒä»¬æ’é™¤åœ¨å¤–.&lt;/p&gt;
&lt;p&gt;å¦å¤–æœ‰äº›é»˜è®¤çš„è§„åˆ™å¯èƒ½ä¸é€‚ç”¨äºè‡ªå·±çš„ä»£ç , æ¯”å¦‚æˆ‘å°±æ¯”è¾ƒå–œæ¬¢åŠ &lt;code&gt;this&lt;/code&gt;, è®¤ä¸ºè¿™æ ·æ›´å®¹æ˜“åŒºåˆ†æˆå‘˜å˜é‡å’Œæ™®é€šå˜é‡, è€Œè¿™ä¸ªæ˜¯&lt;a href="https://dart-lang.github.io/linter/lints/unnecessary_this.html"&gt;ä¸è¢«æ¨è&lt;/a&gt;çš„(æ¯•ç«Ÿdartçš„IDEæ•´åˆçš„éå¸¸æ£’). å¦‚æœè¦å…³é—­è¿™ä¸€é¡¹æ£€æŸ¥, åªéœ€è¦åœ¨linter ruleé‡ŒæŠŠå®ƒè®¾ä¸ºfalse.&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Š, æˆ‘çš„analysis_options.yamlé•¿è¿™æ ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;package:lint/analysis_options.yaml&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;analyzer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;exclude&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;build/**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;linter&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nt"&gt;rules&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# Rationale: in our app, the codes are for reading on mobile phones. Adding&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# `this` makes it easier for readers to understand which variables class&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# members and which ones are not.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nt"&gt;unnecessary_this&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;false&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="auto-fix-suggestions_1"&gt;Auto-fix suggestions&lt;/h2&gt;
&lt;p&gt;ä¸è¿‡åœ¨åŠ äº†analyzerä»¥åæˆ‘å‘ç°VSCodeå‡ºç°äº†å‡ ç™¾ä¸ªwarning, å¤§éƒ¨åˆ†warningéƒ½æœ‰ç®€å•çš„fixæ–¹æ³•(æ¯”å¦‚ç»™&lt;code&gt;Text("foo")&lt;/code&gt;åŠ ä¸ª&lt;code&gt;const&lt;/code&gt;ä¹‹ç±»çš„). è™½ç„¶åªè¦ç‚¹ä¸€ä¸‹å°±èƒ½fix, ç‚¹å‡ ç™¾ä¸‹ä¹Ÿå®åœ¨æ˜¯å¤ªéº»çƒ¦äº†...&lt;/p&gt;
&lt;p&gt;æœç´¢ä¸€ä¸‹ä»¥åå‘ç°äº†è§£å†³åŠæ³•: &lt;a href="https://stackoverflow.com/a/62664168"&gt;https://stackoverflow.com/a/62664168&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;é¦–å…ˆç”¨&lt;code&gt;dartfmt&lt;/code&gt;å¯ä»¥è§£å†³ä¸€äº›ç®€å•çš„æ ¼å¼é—®é¢˜:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# simple style/format fixes&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfmt --fix --overwrite --follow-links .&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¦åº”ç”¨analyzerçš„fix, éœ€è¦ä½¿ç”¨&lt;a href="https://pub.dev/packages/dartfix"&gt;dartfix&lt;/a&gt;. ä¸è¿‡å®ƒç›®å‰åªæ”¯æŒpedantic, ä¸èƒ½ç›´æ¥ç”¨analysis_options.yamlçš„é…ç½®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# install dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ pub global activate dartfix&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;# Use dartfix to auto-apply pedantic suggestions:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix --pedantic --excludeFix unnecessary_this lib/ --fix prefer_const_declarations --overwrite&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½†æˆ‘å‘ç°pedanticçš„æ£€æŸ¥ç¡®å®ä¸å¦‚lintä¸¥æ ¼(cf. &lt;a href="https://github.com/passsy/dart-lint#comparison-to-packagepedantic"&gt;äºŒè€…çš„æ¯”è¾ƒ&lt;/a&gt;), æ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰ç›´æ¥ç”¨&lt;code&gt;--pedantic&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯, æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”¨dartfixæ¥fixæŸä¸€ç±»é—®é¢˜(éœ€è¦å…ˆç¡®è®¤æŸä¸ªfixæ˜¯å¦è¢«dartfixæ”¯æŒ). æ¯”å¦‚æˆ‘çœ‹åˆ°å¾ˆå¤š&lt;code&gt;sort_child_properties_last&lt;/code&gt;çš„å»ºè®®, äºæ˜¯å¯ä»¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# Check if the "sort_child_properties_last" lint is supported by dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix -h | grep sort_&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¢ sort_child_properties_last&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;# This fix is available ==&amp;gt; Apply it with dartfix:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;$ dartfix --fix sort_child_properties_last  lib/ --overwrite&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨ç±»ä¼¼çš„æ–¹å¼, å°±å¯ä»¥å¿«é€Ÿåº”ç”¨linterçš„å»ºè®®:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ dartfix --fix prefer_const_constructors  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_const_declarations  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_final_locals  lib/ --overwrite&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# Or apply multiple fixes at once:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;$ dartfix --fix prefer_const_declarations,avoid_redundant_argument_values,prefer_collection_literals,curly_braces_in_flow_control_structures,prefer_if_elements_to_conditional_expressions,annotate_overrides,prefer_const_constructors_in_immutables,unnecessary_const,prefer_is_empty,prefer_final_fields &lt;span class="se"&gt;\&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    lib/ --overwrite&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Flutter"></category></entry><entry><title>ç”¨fvmç®¡ç†å¤šä¸ªFlutter SDK</title><link href="https://x-wei.github.io/tech/flutter-use-fvm.html" rel="alternate"></link><published>2020-10-16T00:00:00+02:00</published><updated>2020-10-16T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2020-10-16:tech/flutter-use-fvm.html</id><summary type="html">&lt;p&gt;æœ¬æ–‡æ€»ç»“äº†Flutter Explainedå…³äºfvmçš„è§†é¢‘: &lt;a href="https://youtu.be/R6vKde1vIGQ"&gt;https://youtu.be/R6vKde1vIGQ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="background"&gt;background&lt;/h2&gt;
&lt;p&gt;flutteræœ‰å¾ˆå¤šchannel: stable/beta/dev/master, è€Œç›®å‰æœ‰äº›åŠŸèƒ½åªåœ¨æŸä¸ªchannelä¸Šå¯ç”¨, æ¯”å¦‚Linux supportç›®å‰åªåœ¨dev channelæ”¯æŒ.&lt;/p&gt;
&lt;p&gt;æˆ‘æ—¥å¸¸ç”¨çš„æ˜¯beta channel, ä½†æ˜¯æƒ³å†™Linuxç¨‹åºæ—¶æ¯æ¬¡&lt;code&gt;flutter channel dev&lt;/code&gt;çš„è¯ éœ€è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´--å› ä¸ºè¦ä¸‹è½½æ–°channelçš„å†…å®¹, switchå›å»çš„æ—¶å€™åˆè¦ç­‰åŠå¤©(å› ä¸ºè¦ä»æ–°ä¸‹è½½).&lt;/p&gt;
&lt;p&gt;è€Œ&lt;code&gt;fvm&lt;/code&gt;è¿™æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„! å®ƒå¯ä»¥cacheä¸åŒç‰ˆæœ¬çš„flutterSDK, æ¯ä¸ªrepoå¯ä»¥è®¾ç½®ä½¿ç”¨ä¸åŒçš„ç‰ˆæœ¬å·, è€Œä¸”VSCodeä¹Ÿåªéœ€è¦ç®€å•é…ç½®å°±èƒ½ä¸Šæ‰‹.&lt;/p&gt;
&lt;h2 id="enable-fvm"&gt;enable fvm&lt;/h2&gt;
&lt;p&gt;ä¸€è¡Œå‘½ä»¤å³å¯å¼€å¯fvm:
&lt;code&gt;$ pub global activate fvm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨æ³•:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;fvm flutter&lt;/code&gt;: Proxies flutter commands ç”¨äºé€‰æ‹©åˆé€‚çš„flutterç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;ä¹Ÿå°±æ˜¯è¯´ç”¨&lt;code&gt;fvm flutter&lt;/code&gt;æ¥ä»£æ›¿flutterå‘½ä»¤ â€” ä¼šè‡ªåŠ¨pickå½“å‰repoæ‰€ç”¨çš„SDK&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚: &lt;code&gt;fvm flutter doctor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm list&lt;/code&gt;: æŸ¥çœ‹ç›®å‰å®‰è£…çš„flutter ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm use&lt;/code&gt;: é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªSDKç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fvm install dev/beta/stable/...&lt;/code&gt;: å®‰è£…SDK&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="use-fvm"&gt;use fvm&lt;/h2&gt;
&lt;p&gt;åœ¨flutteræ–‡ä»¶å¤¹é‡Œè¿è¡Œ&lt;code&gt;fvm use xxx&lt;/code&gt;å³å¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; my_flutter_proj&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm use dev&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm list&lt;/span&gt;
&lt;span class="code-line"&gt;Versions path:  /home/xwei/fvm/versions&lt;/span&gt;
&lt;span class="code-line"&gt;beta&lt;/span&gt;
&lt;span class="code-line"&gt;dev âœ”&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª&lt;code&gt;.fvm&lt;/code&gt;çš„æ–‡ä»¶å¤¹, é‡Œé¢åŒ…å«äº†åˆ°æŒ‡å®šSDKçš„è½¯é“¾æ¥ ä»¥åŠä¸€ä¸ªjson config:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ ls .fvm&lt;/span&gt;
&lt;span class="code-line"&gt;flutter_sdk@  fvm_config.json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«çš„ç”¨flutter devå¼€å‘linux appäº†&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ fvm flutter config --enable-linux-desktop&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter devices&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;2&lt;/span&gt; connected devices:&lt;/span&gt;
&lt;span class="code-line"&gt;Android SDK built &lt;span class="k"&gt;for&lt;/span&gt; x86 &lt;span class="o"&gt;(&lt;/span&gt;mobile&lt;span class="o"&gt;)&lt;/span&gt; â€¢ emulator-5554 â€¢ android-x86 â€¢ Android &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;API &lt;span class="m"&gt;29&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;emulator&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Linux &lt;span class="o"&gt;(&lt;/span&gt;desktop&lt;span class="o"&gt;)&lt;/span&gt;                    â€¢ linux         â€¢ linux-x64   â€¢ Linux&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter create .&lt;/span&gt;
&lt;span class="code-line"&gt;$ fvm flutter run -d linux&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="vscode-config"&gt;VScode config&lt;/h2&gt;
&lt;p&gt;cf. &lt;a href="https://github.com/leoafarias/fvm#vscode"&gt;https://github.com/leoafarias/fvm#vscode&lt;/a&gt;
è®©vscodeä½¿ç”¨fvm flutter (è€Œä¸æ˜¯é»˜è®¤flutter), åªè¦ä¿®æ”¹settings.jsonæŠŠé‚£ä¸ªflutter_sdkçš„è½¯é“¾æ¥å³å¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ cat .vscode/settings.json &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="s2"&gt;"dart.flutterSdkPaths"&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;".fvm/flutter_sdk"&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨VSCodeçš„command paletteé‡Œè¾“å…¥&lt;code&gt;Flutter: Change SDK&lt;/code&gt;, å°±å¯ä»¥é€‰æ‹©flutter SDKäº†&lt;/p&gt;
&lt;h2 id="other-config"&gt;other config&lt;/h2&gt;
&lt;h3 id="change-cache-path"&gt;change cache path&lt;/h3&gt;
&lt;p&gt;fvmé»˜è®¤cacheåœ¨&lt;code&gt;~/fvm&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹, å¯ä»¥ä¿®æ”¹&lt;code&gt;FVM_HOME&lt;/code&gt;ç¯å¢ƒå˜é‡æ”¹åˆ°åˆ«çš„ä½ç½®.
cf. &lt;a href="https://github.com/leoafarias/fvm#change-fvm-cache-directory"&gt;https://github.com/leoafarias/fvm#change-fvm-cache-directory&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="bashfish-alias"&gt;bash/fish alias&lt;/h3&gt;
&lt;p&gt;æ¯æ¬¡éƒ½å†™&lt;code&gt;fvm flutter&lt;/code&gt;æœ‰ç‚¹éº»çƒ¦ å¯ä»¥åœ¨bashrc/config.fishé‡ŒåŠ ä¸Šä¸€è¡Œ &lt;code&gt;alias ff=fvm flutter&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Š, åªéœ€è¦åœ¨.bashrcé‡ŒåŠ ä¸Š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;alias ff='fvm flutter'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;export FVM_HOME="$HOME/.local/fvm"&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä¸€èˆ¬ç”¨fish, æ˜¯åœ¨&lt;code&gt;config.fish&lt;/code&gt;é‡ŒåŠ ä¸Š:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;alias ff='fvm flutter'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;set FVM_HOME "$HOME/.local/fvm"&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="footnote"&gt;
&lt;hr/&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Flutter 2.0ä»¥åstable channelä¹Ÿå¯ä»¥å¼€å‘linux, ä¸è¿‡åˆ‡æ¢channelçš„éœ€æ±‚è¿˜æ˜¯ä¸€ç›´åœ¨çš„, æ‰€ä»¥è¿˜æ˜¯å»ºè®®æ¯ä¸ªflutteré¡¹ç›®éƒ½ä½¿ç”¨fvm.Â &lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;â†©&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="Flutter"></category></entry><entry><title>Scala/OCamlåˆä½“éªŒ</title><link href="https://x-wei.github.io/tech/scala-ocaml-impression.html" rel="alternate"></link><published>2016-12-31T00:00:00+01:00</published><updated>2016-12-31T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2016-12-31:tech/scala-ocaml-impression.html</id><summary type="html">&lt;p&gt;2016å¹´çš„æœ€åå‡ å°æ—¶, éšä¾¿å†™å†™å…³äºScalaå’ŒOCamlçš„ä¸€äº›å…¥é—¨ä½“éªŒå¥½äº†.   &lt;/p&gt;
&lt;p&gt;ä»Šå¹´å¯¹FPè¯­è¨€ç‰¹åˆ«æ„Ÿå…´è¶£, ä¸Šäº†ä¸¤é—¨Scalaçš„å…¬å¼€è¯¾(&lt;a href="https://www.coursera.org/learn/progfun1/home/welcome"&gt;here&lt;/a&gt; and &lt;a href="https://www.coursera.org/learn/progfun2/home/welcome"&gt;here&lt;/a&gt;)å’Œä¸€é—¨OCamlçš„å…¬å¼€è¯¾(&lt;a href="https://www.fun-mooc.fr/courses/parisdiderot/56002S02/session02/info"&gt;here&lt;/a&gt;), åœ¨åšå®¢ä¸­å†™äº†ä¸€ç³»åˆ—çš„ç¬”è®°, è¯¾åä½œä¸šä¹Ÿéƒ½è®¤çœŸåšå®Œäº†. æ–—èƒ†è¯´è¿™ä¸¤é—¨è¯­è¨€éƒ½ç®—å…¥é—¨äº†å§... è¿™é‡Œå°±éšä¾¿å†™ä¸€ä¸‹ä½¿ç”¨è¿™ä¸¤é—¨è¯­è¨€çš„æ„Ÿå—, æƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œ...   &lt;/p&gt;
&lt;p&gt;FPè¯­è¨€å’Œä¹‹å‰æ¥è§¦çš„è¯­è¨€ç¡®å®ä¸å¤§ä¸€æ ·, æ¯”å¦‚ä¹‹å‰æˆ‘éƒ½æœ‰ç§é”™è§‰, å­¦ä»€ä¹ˆè¯­è¨€åªè¦çŸ¥é“å¾ªç¯/æ¡ä»¶/åŸºæœ¬ç±»å‹è¿ç®—æ€ä¹ˆå†™, å°±å·®ä¸å¤šå¯ä»¥ä¸Šæ‰‹äº†...... ç„¶åé‡åˆ°äº†FP, å‘ç°å¾ªç¯è¯­å¥å…¶å®æ˜¯ä¸å¿…è¦çš„... è®°å¾—çœ‹åˆ°è¿‡ä¸€ç¯‡æ–‡ç« , ç±»æ¯”å­¦FPå°±å¥½åƒå¼€äº†å¾ˆå¤šç§è½¦çš„è€å¸æœºçªç„¶å¼€å§‹å­¦å¼€å®‡å®™é£èˆ¹, è‚¯å®šå„ç§WTFä¸é€‚åº”äº†~   &lt;/p&gt;
&lt;p&gt;ä»¥å‰è°ˆåˆ°FPæˆ‘åªèƒ½è”æƒ³åˆ°ä¸€äº›Pythoné‡Œçš„FPç‰¹æ€§: lambdaè¡¨è¾¾å¼, é«˜é˜¶å‡½æ•°ä¹‹ç±»çš„, é¡¶å¤šè¿˜æƒ³åˆ°ä¸ªé—­åŒ…... ä¸è¿‡Pythoné‡Œé¢çš„FPç‰¹æ€§å’ŒScala/OCamlé‡Œçš„æ¯”èµ·æ¥è¿˜æ˜¯å·®äº†ä¸å°‘: i.e. ç°åœ¨éå¸¸å¸Œæœ›Pythoné‡Œå¯ä»¥æ”¯æŒpattern matching...   &lt;/p&gt;
&lt;h1 id="scala"&gt;Scala&lt;/h1&gt;
&lt;p&gt;Scalaç®—æ˜¯æ¯”è¾ƒäº²æ°‘çš„FPè¯­è¨€äº†(å’ŒJavaæœ‰ç‚¹åƒ...), ä¹Ÿæ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„FPè¯­è¨€. EPFLçš„é‚£ä¸¤é—¨å…¬å¼€è¯¾è´¨é‡å¾ˆæ£’, æ¯•ç«Ÿæ˜¯Scalaçš„ä½œè€…äº²è‡ªæ¥ä¸Šçš„...   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;immutable types&lt;/em&gt;: ä¹ æƒ¯äº†å°±å¥½, å°±åƒjavaé‡Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯finalçš„, è¦ä¿®æ”¹ä»€ä¹ˆä¸œè¥¿çš„æ—¶å€™æ”¹æˆæ–°å»ºä¸€ä¸ª, immutableæ•°æ®çš„ä¼˜ç‚¹å°±æ˜¯å¹¶è¡Œæ–¹ä¾¿å•Š...   &lt;/li&gt;
&lt;li&gt;&lt;em&gt;ä¸€åˆ‡çš†ä¸ºè¡¨è¾¾å¼&lt;/em&gt;, specifically, &lt;code&gt;if&lt;/code&gt;è¯­å¥ä¹Ÿæ˜¯è¡¨è¾¾å¼(expression)è€Œä¸æ˜¯è¯­å¥(statement)  &lt;/li&gt;
&lt;li&gt;å°½é‡ä¸ç”¨&lt;code&gt;return&lt;/code&gt;, è¿”å›å€¼å°±æ˜¯æœ€åä¸€å¥expression  &lt;/li&gt;
&lt;li&gt;ç±»å‹æ¨å¯¼: å°±ä¸ç”¨å†™éº»çƒ¦çš„ç±»å‹æ ‡è®°äº†(æœ‰æ—¶åˆå¿…é¡»å†™, æ¯”å¦‚å¿…é¡»è¦å‘Šè¯‰Scalaé€’å½’å‡½æ•°çš„è¿”å›ç±»å‹)... ä¸è¿‡æœ‰æ—¶ä¸æ ‡è®°ç±»å‹åˆå®¹æ˜“å‡ºé”™(å¿ƒé‡Œä»¥ä¸ºçš„ç±»å‹å’Œå®é™…çš„ç±»å‹ä¸ä¸€æ ·). å¦å¤–Scalaçš„ç±»å‹æ˜¯å†™åœ¨å†’å·åé¢çš„, ä¹ æƒ¯äº†å°±å¥½...   &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;for expression&lt;/strong&gt;: (å’Œ"forå¾ªç¯"ä¸æ˜¯ä¸€å›äº‹) éå¸¸å¥½ç”¨, å¯ä»¥è¯´æ˜¯ä¸€å¤§äº®ç‚¹, æ¯”è¾ƒå¤æ‚çš„&lt;code&gt;filter/map&lt;/code&gt;ç»„æˆçš„è¡¨è¾¾å¼, ç”¨for exprå†™å‡ºæ¥éå¸¸å®¹æ˜“ç†è§£, è¶…æ£’... åæ¥å­¦OCamlçš„æ—¶å€™éå¸¸æœŸå¾…OCamlé‡Œä¹Ÿæœ‰ç±»ä¼¼çš„ä¸œè¥¿(ä¸è¿‡å¥½åƒæ²¡æœ‰...)  &lt;/li&gt;
&lt;li&gt;pattern matching: ç”¨constructoræ¥switch! æ²¡ä»€ä¹ˆå¥½è¯´çš„ éå¸¸å¥½ç”¨çš„ä¸œè¥¿...  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://x-wei.github.io/progfun2_lec2_lazyeval.html#lecture-22-streams"&gt;lazy evaluationå’ŒStream&lt;/a&gt;: éå¸¸æœ‰ç”¨çš„ä¸œè¥¿, å­¦åˆ°è¿™é‡Œæ—¶å¾ˆå—å¯å‘...   &lt;/li&gt;
&lt;li&gt;intellijçœŸå¥½ç”¨, è¿˜æœ‰Scala worksheet...   &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°¾é€’å½’ä¼˜åŒ–&lt;/strong&gt;: æŠŠé€’å½’å‡½æ•°åšåˆ°å’Œiterativeçš„ä¸€æ ·å¿«, tailrecç®—æ˜¯å·¥å…·ä¹‹ä¸€å§. &lt;br/&gt;
    ä¸€å¼€å§‹å¯¹tailrecæœ‰ç‚¹ä¸å¤ªä¼šå†™, å…¶å®åæ¥å¤§æ¦‚æ˜ç™½äº†æ€ä¹ˆå›äº‹: å°¾é€’å½’è¦æ±‚&lt;code&gt;f(n)&lt;/code&gt;æœ€åçš„returnè¯­å¥é‡Œåº”è¯¥ç›´æ¥æ˜¯é€’å½’è°ƒç”¨&lt;code&gt;f(n-1)&lt;/code&gt;, ä¸è¦åŠ åˆ«çš„ä»€ä¹ˆå¸¦&lt;code&gt;f(n-1)&lt;/code&gt;çš„è¡¨è¾¾å¼. &lt;br/&gt;
    ä¸€èˆ¬çš„é€’å½’å‡½æ•°å¤§æ¦‚æ˜¯: &lt;code&gt;f(n) = some_expr_of f(n-1)&lt;/code&gt;, è€Œtailrecçš„ç‰ˆæœ¬é‡Œ, åŠ å…¥äº†&lt;code&gt;acc&lt;/code&gt;è¿™æ ·ä¸€ä¸ªå‚æ•°, ä¿å­˜ç´¯åŠ ç»“æœ. &lt;em&gt;å¯ä»¥æŠŠaccçœ‹åšf(n-1)çš„ä»£æ›¿å“&lt;/em&gt;, è¿™æ—¶, æŠŠé‚£ä¸ªf(n-1)çš„exprä½œç”¨åœ¨&lt;code&gt;acc&lt;/code&gt;ä¸Š, å°±æ˜¯å°¾é€’å½’äº†! f(n, acc)æœ€åä¸€å¥å°±æˆäº†&lt;code&gt;f(n-1, some_expr_of acc)&lt;/code&gt; â€” ç®€ç®€å•å•ä¸€ä¸ªé€’å½’è°ƒç”¨~&lt;br/&gt;
    ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­: é˜¶ä¹˜è¿ç®—&lt;br/&gt;
    éå°¾é€’å½’çš„å†™æ³•æ˜¯:   &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ”¹æˆå°¾é€’å½’ä»¥å:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;factorialTR&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="nd"&gt;@tailrec&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;fact&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;acc&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;acc&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;fact&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;acc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;fact&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;ç®€å•çš„åŒ¿åå‡½æ•°æœ‰å‡ ç§å†™æ³•:   &lt;ul&gt;
&lt;li&gt;ç”¨&lt;code&gt;=&amp;gt;&lt;/code&gt;: &lt;code&gt;param  =&amp;gt; ret&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;ç”¨pattern matching(è¿™æ—¶è¦ç”¨èŠ±æ‹¬å·): &lt;code&gt;{case(param list)  =&amp;gt; ret }&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;ä¸‹åˆ’çº¿å°±è¡¨ç¤ºå‚æ•°: &lt;code&gt;_*2&lt;/code&gt; â€” ç›¸æ¯”ä¹‹ä¸‹ ç®€ç›´å—å¤Ÿäº†Pythoné‡Œé¢å†™lambda.......  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸€äº›æ¦‚å¿µå’ŒJavaå¯¹åº”ä¸€ä¸‹:   &lt;ul&gt;
&lt;li&gt;&lt;code&gt;Unit&lt;/code&gt;å¯¹åº”Javaé‡Œçš„&lt;code&gt;void&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;Option&lt;/code&gt;å¯¹åº”Javaé‡Œçš„Object(æœ‰æŒ‡é’ˆçš„å¯¹è±¡), Javaé‡Œçš„&lt;code&gt;null&lt;/code&gt;å¯¹åº”Scalaé‡Œ&lt;code&gt;None&lt;/code&gt;, Javaé‡Œçš„æŸä¸ªå¯¹è±¡(énull)&lt;code&gt;A&lt;/code&gt;å¯¹åº”Scalaé‡Œçš„&lt;code&gt;Some[A]&lt;/code&gt;, Scalaé‡Œå’Œ&lt;code&gt;Option&lt;/code&gt;ç±»ä¼¼çš„è¿˜æœ‰&lt;code&gt;Try&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;trait&lt;/code&gt;å¤§æ¦‚å¯ä»¥çœ‹åšJavaé‡Œçš„&lt;code&gt;Interface&lt;/code&gt;, ä¸è¿‡Scalaçš„traitæ˜¯å¯ä»¥åŒ…å«å‡½æ•°å®ç°çš„...   &lt;/li&gt;
&lt;li&gt;Scalaçš„&lt;code&gt;object&lt;/code&gt;å’ŒJavaé‡Œå¯ä¸æ˜¯ä¸€ä¸ªæ„æ€, Scalaé‡Œobjectæ˜¯å•ä¾‹å¯¹è±¡(&lt;em&gt;Singleton&lt;/em&gt;), ç±»ä¼¼äºjavaé‡Œçš„&lt;code&gt;static final&lt;/code&gt;çš„å¯¹è±¡  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ‰äººè¯´Scalaè¢«è¿‡åº¦è®¾è®¡äº†, æ„Ÿè§‰æœ‰ç‚¹é“ç†: å¿«å­¦å®Œç¬¬äºŒé—¨Scalaå…¬å¼€è¯¾çš„æ—¶å€™çœ‹çœ‹åˆ«äººä»£ç , åˆå‘ç°äº†å¥½å¤šæ²¡è§è¿‡çš„å…³é”®å­—... @@  &lt;/li&gt;
&lt;li&gt;å¹¶ä¸å¤ªå–œæ¬¢çœç•¥ç‚¹å· çœç•¥æ‹¬å·/åˆ†å·ä¹‹ç±»çš„è¯­æ³•ç³–...  &lt;/li&gt;
&lt;li&gt;Scalaçš„collectionæœ‰ç‚¹å¤š: &lt;code&gt;Seq/List/Array/IndexedSeq/Vector&lt;/code&gt;å‚»å‚»åˆ†ä¸æ¸…æ¥š....  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/scala-ocaml-impression/pasted_image.png"/&gt; &lt;/p&gt;
&lt;h1 id="ocaml"&gt;OCaml&lt;/h1&gt;
&lt;p&gt;OCamlä¹Ÿæ˜¯å·¥ä¸šç•Œæ¯”è¾ƒæˆåŠŸçš„è¯­è¨€äº†, è€Œä¸”æ®è¯´é€Ÿåº¦å’ŒCppä¸ç›¸ä¸Šä¸‹, æˆ‘å¯¹å®ƒå¯ä»¥è¯´æ˜¯å‘å¾€å·²ä¹…, çœ‹åˆ°FUNå¹³å°ä¸Šæœ‰å…¬å¼€è¯¾å°±èµ¶ç´§æŠ¥åäº†...   &lt;/p&gt;
&lt;p&gt;OCamlç®—æ˜¯æ¯”è¾ƒ"æ­£å®—"çš„FPè¯­è¨€(æˆ–è®¸è¿˜ä¸å¤Ÿ"çº¯"?), é£å‘³å’Œåˆ«çš„è¯­è¨€å·®äº†å¥½å¤š, ä½†æ˜¯å†™ç€å†™ç€å°±å–œæ¬¢ä¸Šäº†...   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°å‚æ•°ä¸ç”¨æ‹¬å·! è¿™æ˜¯ç¬¬ä¸€ä¸ªå†²å‡»...  &lt;/li&gt;
&lt;li&gt;ä¸è¿‡æ€»æ˜¯æŠŠå‡½æ•°æ”¾åœ¨æœ€å‰é¢, è¿˜æ˜¯ä¸å¤§ä¹ æƒ¯, æ¯”å¦‚&lt;code&gt;List.map&lt;/code&gt;, æ›´å¸Œæœ›å¯ä»¥å†™æˆ &lt;code&gt;a_list map a_fun&lt;/code&gt;è¿™æ ·...  &lt;/li&gt;
&lt;li&gt;è¿ç®—ç¬¦å®Œå…¨åˆ†éš”: æ•´æ•°åŠ æ³•æ˜¯&lt;code&gt;+&lt;/code&gt;, æµ®ç‚¹æ•°åŠ æ³•è¦æ˜¾ç¤ºå†™æˆ&lt;code&gt;+.&lt;/code&gt;, è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥åšå¼‚å¸¸å¼ºå¤§çš„ç±»å‹æ¨å¯¼, æ¯”Scalaä¸çŸ¥é«˜åˆ°å“ªé‡Œå»äº†~  &lt;/li&gt;
&lt;li&gt;å„ç§é”™è¯¯éƒ½å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ‰¾åˆ°, å®‰å…¨æ„Ÿå€å¢...   &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;let-in binding&lt;/strong&gt;: ç†è§£äº†è¿™ä¸ªæ¦‚å¿µä»¥å, å¤§è„‘æœ‰äº†ä¸€ç§å¼€çªçš„æ„Ÿè§‰! è¿™ä¸ªå°±éå¸¸æ¥è¿‘æ•°å­¦æ¨å¯¼äº†, æ¯”å¦‚åœ¨æ•°å­¦ä¸Šè¯æ˜ä»€ä¹ˆä¸œè¥¿çš„æ—¶å€™, ä»¤x y zç­‰äºä»€ä¹ˆä»€ä¹ˆ, å…¶å®æœ€ç»ˆéƒ½æ˜¯ä¸ºäº†åœ¨æœ€åä¸€ä¸ªè¡¨è¾¾å¼é‡Œé¢ä½“ç°. åªæ˜¯èµ·ä¸€ä¸ªåå­—è€Œå·², å¹¶ä¸æ˜¯æ”¹å˜äº†è¿™äº›"identifier"çš„æ•°å€¼. Scalaé‡Œé¢çš„"æœ€åä¸€ä¸ªè¡¨è¾¾å¼å³ä¸ºè¿”å›å€¼"è¿™ä¸€ç‚¹, æˆ‘å½“æ—¶æœ‰ç‚¹ä¸å¤ªä¹ æƒ¯, ä¸è¿‡åœ¨OCamlé‡Œé¢ç”¨let-inç»‘å®šè¿™ä¹ˆä¸€å†™, è¿™ä¸æ˜¯æ˜¾ç„¶çš„ä¹ˆ?! ...æ€»ä¹‹è¿™ä¸ªå†™æ³•ç†è§£äº†ä»¥å, æ„Ÿè§‰éå¸¸ç¾å¦™...   &lt;/li&gt;
&lt;li&gt;å‡½æ•°çš„ç±»å‹ä¸º&lt;code&gt;para1_type -&amp;gt; para2_type -&amp;gt; ... -&amp;gt; ret_type&lt;/code&gt;, è¿™æ ·å†™äº†ä»¥åå¯¹äºç†è§£partial functionä¹‹ç±»çš„å°±æœ‰å¾ˆå¤§å¸®åŠ©, å¦å¤–OCamlå¹¶ä¸åŒºåˆ†æ•°å€¼å’Œå‡½æ•°äº†: éƒ½æ˜¯ç”¨letå£°æ˜, ä¸€ä¸ªæ•°å€¼å¯ä»¥çœ‹åšæ˜¯æ¥æ”¶0ä¸ªå‚æ•°çš„å‡½æ•°.   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;try-with&lt;/code&gt;å¤„ç†å¼‚å¸¸: é™¤äº†å¤„ç†å¼‚å¸¸ä»¥å¤–, ç”±äºæ²¡å‘ç°breakå¯¹åº”çš„å†™æ³•, ç°åœ¨è¦breakçš„æ—¶å€™æˆ‘å°±ä¹Ÿå†™æˆ&lt;code&gt;try-with&lt;/code&gt;...   &lt;/li&gt;
&lt;li&gt;basic composed types: &lt;code&gt;tuple/record/array&lt;/code&gt;è¿™ä¸‰ä¸ª, ä¸ªäººæ„Ÿè§‰å¹¶ä¸æ˜¯ç‰¹åˆ«å¥½ç”¨... @@  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;taged type&lt;/strong&gt; (åˆå«sum type/variant type): æ„Ÿè§‰éå¸¸å¼ºå¤§, å®šä¹‰äº†taged typeä»¥åå†pattern matchingä¸è¦å¤ªçˆ½... æ„Ÿè§‰æˆ‘å¯¹è¿™å—ç†è§£è¿˜ä¸å¤ªå¤Ÿ, çœ‹åˆ«äººå†™çš„taged typeå¯èƒ½å¯ä»¥å†™ä¸€äº›å¤„ç†çš„å‡½æ•°, è‡ªå·±å®šä¹‰taged typeå°±æ¯”è¾ƒè™šäº†... å¥½çš„ç¨‹åº, æŠŠç±»å‹å®šä¹‰å†™å¥½äº† åŸºæœ¬ä¸Šå°±å®Œæˆä¸€åŠäº†...   &lt;/li&gt;
&lt;li&gt;å…³äºæ¨¡å—(module)çš„ç­¾åçš„å†™æ³•ä»€ä¹ˆçš„, å…¶å®è¿˜æ˜¯æœ‰ç‚¹æ™•... å¯èƒ½å®è·µè¿˜æ˜¯ä¸å¤Ÿ  &lt;/li&gt;
&lt;li&gt;OCamlé‡Œçš„"Polymorphism"å¤§æ¦‚ç›¸å½“äºJavaé‡Œçš„generic/Cppé‡Œçš„template.   &lt;/li&gt;
&lt;li&gt;pattern matching: åœ¨OCamlé‡Œè¢«å¤§é‡çš„åº”ç”¨, æ„Ÿè§‰æ¯”Scalaé‡Œé¢çš„è¿˜å¥½ç”¨ä¸å°‘...   &lt;/li&gt;
&lt;li&gt;utopä½œä¸ºäº¤äº’å¼ç»ˆç«¯ä½“éªŒè¿˜æ˜¯å¾ˆæ£’çš„  &lt;/li&gt;
&lt;li&gt;ç¼–è¾‘å™¨å’Œideè¿˜æ˜¯ä¸å¤Ÿä¸°å¯Œ, æ²¡æ‰¾åˆ°(évim/emacs)å¾ˆå¥½çš„æ–¹æ¡ˆ... ä¸è¿‡FUNå¹³å°çš„ç½‘ç»œç¼–è¾‘ç¯å¢ƒéå¸¸ç»™åŠ›, è‡ªåŠ¨indentè¿™ä¸ªfeatureå¤ªå–œæ¬¢äº†, æœ€åæ‰€æœ‰ä½œä¸šéƒ½æ˜¯ç›´æ¥åœ¨webç¯å¢ƒä¸‹å†™çš„...   &lt;/li&gt;
&lt;li&gt;opamåŒ…ç®¡ç†å™¨æœ‰æ—¶å€™ä¼šå‡ºç°ä¸€äº›æ¨¡å—å®‰è£…ä¸ä¸Šçš„é—®é¢˜  &lt;/li&gt;
&lt;li&gt;å¬è¯´&lt;code&gt;Core&lt;/code&gt;æä¾›äº†æ¯”è¾ƒå®Œå–„çš„å‡½æ•°æ”¯æŒ, å¸Œæœ›å­¦ä¸€ä¸‹(ä¹Ÿå°±æ˜¯çœ‹çœ‹real world OCaml)  &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="compared-with-python"&gt;compared with Python&lt;/h1&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸¤ä¸ªè¯­è¨€å’Œæˆ‘ç°åœ¨ç”¨å¾—æœ€å¤šçš„è¯­è¨€(Python)ç›¸æ¯”è¾ƒä¸€ä¸‹å§:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºPython, éå¸¸ç¾¡æ…•Scala/OCamlçš„æ‰§è¡Œé€Ÿåº¦  &lt;/li&gt;
&lt;li&gt;çœ¼é¦‹pattern matchingå’Œå„ç§compile timeä¿æŠ¤......   &lt;/li&gt;
&lt;li&gt;Pythonçš„REPL(&lt;a href="https://bpython-interpreter.org/"&gt;bpython&lt;/a&gt;)è¿˜æ˜¯æ¯”Scala worksheet / ocaml utopä½“éªŒå¥½ä¸å°‘   &lt;/li&gt;
&lt;li&gt;Pythonçš„"è‡ªå¸¦ç”µæ± "ç‰¹è‰²æ˜¯å¾ˆå¤§çš„ä¼˜ç‚¹, å¾ˆå¥½å¥‡Scala/OCamlæœ‰æ²¡æœ‰æä¾›defaultdict/counter/datetimeä¹‹ç±»çš„æ¨¡å—......   &lt;/li&gt;
&lt;/ul&gt;</summary><category term="scala"></category><category term="OCaml"></category></entry><entry><title>ä½¿ç”¨requestså’Œlxmlç¼–å†™pythonçˆ¬è™«å°è®°</title><link href="https://x-wei.github.io/tech/python_crawler_requests_lxml.html" rel="alternate"></link><published>2016-12-29T00:00:00+01:00</published><updated>2016-12-29T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2016-12-29:tech/python_crawler_requests_lxml.html</id><summary type="html">&lt;p&gt;å‰ä¸€æ®µæ—¶é—´å†™äº†ä¸å°‘Pythonçš„çˆ¬è™«ç¨‹åº, ä¸ºæ­¤è¿˜çœ‹äº†æå®¢å­¦é™¢ä¸Šçš„ä¸€äº›&lt;a href="http://ke.jikexueyuan.com/xilie/116"&gt;æ•™ç¨‹&lt;/a&gt;, ç°åœ¨æ¥ç®€å•æ€»ç»“ä¸€ä¸‹. ä¸»è¦ä»‹ç»ç”¨&lt;code&gt;requests&lt;/code&gt; + &lt;code&gt;lxml&lt;/code&gt;çš„æ–¹å¼, &lt;code&gt;scrapy&lt;/code&gt;çš„è¯ä¹‹å‰å†™è¿‡ä¸€ç¯‡ä»‹ç»æ€§çš„&lt;a href="http://x-wei.github.io/Scrapy%20%E4%B8%8A%E6%89%8B%E7%AC%94%E8%AE%B0.html"&gt;æ–‡ç« &lt;/a&gt;, è¿™é‡Œå°±ä¸é‡å¤äº†. è€Œä¸”æ„Ÿè§‰ä¸€èˆ¬ç®€å•çš„çˆ¬è™«é¡¹ç›®, ä¸€ä¸ªPythonæ–‡ä»¶å°±åŸºæœ¬å¯ä»¥æå®š, æ²¡å¿…è¦ç”¨scrapyå»ºç«‹ä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹æé‚£ä¹ˆæ­£å¼...   &lt;/p&gt;
&lt;p&gt;å®‰è£…éœ€è¦çš„åº“(python2):   &lt;/p&gt;
&lt;p&gt;&lt;code&gt;pip install requests, lxml&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨Pythonç¨‹åºæœ€å¼€å§‹å¯¼å…¥:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;lxml&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;etree&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="requestsji-chu-yong-fa"&gt;requestsåŸºç¡€ç”¨æ³•&lt;/h1&gt;
&lt;h3 id="zhua-qu-htmlnei-rong"&gt;æŠ“å–htmlå†…å®¹&lt;/h3&gt;
&lt;p&gt;ç”¨requestsè·å–ç›®æ ‡ç½‘å€çš„htmlä»£ç éå¸¸ç®€å•, åªéœ€è¦ç”¨&lt;code&gt;requests.get&lt;/code&gt;æ–¹æ³•, ä¼ å…¥ç½‘å€URLå³å¯.   &lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­, æƒ³è¦æŠ“å–&lt;a href="https://zh.wikiquote.org/wiki/Wikiquote:%E9%A6%96%E9%A1%B5"&gt;ç»´åŸºè¯­å½•&lt;/a&gt;çš„HTMLå†…å®¹, ä»£ç å¾ˆç®€å•:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;url = 'https://zh.wikiquote.org/zh-cn/é˜¿çˆ¾ä¼¯ç‰¹Â·æ„›å› æ–¯å¦'  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;r = requests.get(url)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;html = r.text&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;requests.get()&lt;/code&gt;è¿”å›ä¸€ä¸ªresponseå¯¹è±¡&lt;code&gt;r&lt;/code&gt;, å¯ä»¥ç”¨&lt;code&gt;r.ok&lt;/code&gt;æˆ–è€…&lt;code&gt;r.status_code&lt;/code&gt;æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ­£å¸¸è¿”å›(status code=200).   &lt;/p&gt;
&lt;h3 id="bian-ma-wen-ti"&gt;ç¼–ç é—®é¢˜&lt;/h3&gt;
&lt;p&gt;å¤„ç†éè‹±æ–‡ç½‘é¡µæ—¶ç»å¸¸é‡åˆ°çš„é—®é¢˜å°±æ˜¯ç¼–ç çš„é—®é¢˜äº†(ä¸çŸ¥é“py3æ˜¯ä¸æ˜¯å¯¹Unicodeæ”¯æŒå¥½ä¸€ç‚¹?), å‰é¢å¾—åˆ°çš„htmlå…¶å®å¹¶éå­—ç¬¦ä¸²è€Œæ˜¯Unicodeå¯¹è±¡:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; type(html)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;lt;type 'unicode'&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unicodeå¯¹è±¡å¤„ç†çš„æ—¶å€™ä¸€ä¸å°å¿ƒå°±ä¼šå¾—åˆ°ä»¥ä¸‹çš„é”™è¯¯:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;UnicodeEncodeError: 'ascii' codec can't encode characters in position 101-113: ordinal not in range(128)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥åœ¨é‚£äº›éœ€è¦stringç±»å‹çš„åœ°æ–¹, éœ€è¦ç”¨&lt;code&gt;encode&lt;/code&gt;å‡½æ•°è½¬æ¢:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; type(html.encode('utf-8'))  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;lt;type 'str'&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦å¤–å®é™…ä¸­è¿˜é‡åˆ°è¿‡æ¯”è¾ƒå¥‡è‘©çš„æƒ…å†µ, æ˜¯è¿”å›çš„responseçš„ç¼–ç å¹¶ä¸å¯¹(è¿™ä¸ªç¼–ç æ˜¯requestsæ ¹æ®ç½‘é¡µå†…å®¹è‡ªå·±æ¨æ–­çš„, æ‰€ä»¥æœ‰æ—¶ä¼šå‡ºé”™), æ¯”å¦‚&lt;a href="http://diglib.hab.de/content.php?dir=edoc/ed000216&amp;amp;distype=optional&amp;amp;metsID=edoc_ed000216_009_introduction&amp;amp;xml=009%2F009_introduction.xml&amp;amp;xsl=tei-introduction.xsl"&gt;è¿™ä¸ªç½‘å€&lt;/a&gt;, requestsä»¥ä¸ºå®ƒçš„encodingæ˜¯'ISO-8859-1', æ‰€ä»¥ä¸ºäº†ä¿é™©èµ·è§, &lt;em&gt;æœ€å¥½æ‰‹åŠ¨æŒ‡å®šr.encoding&lt;/em&gt;:   &lt;/p&gt;
&lt;p&gt;&lt;code&gt;r.encoding = 'utf-8&lt;/code&gt;'   &lt;/p&gt;
&lt;p&gt;å¦: è¿˜æœ‰ä¸€ç§ç»å¸¸ç”¨çš„è§£å†³utfç¼–ç çš„æ–¹å¼, å°±æ˜¯åœ¨æ–‡ä»¶å¼€å¤´åŠ ä¸Šè¿™å››å¥è¯:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# coding: utf-8  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;reload&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefaultencoding&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'utf-8'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸è¿‡, çœ‹åˆ°æœ‰äººè¯´è¿™ç§æ–¹å¼&lt;a href="http://blog.ernest.me/post/python-setdefaultencoding-unicode-bytes"&gt;å¹¶ä¸å¥½&lt;/a&gt;, æ‰€ä»¥æœ€å¥½åˆ«ç”¨è¿™ä¹ˆæš´åŠ›çš„æ–¹å¼å§...  &lt;/p&gt;
&lt;h3 id="yong-scrapy-shelljian-cha-de-dao-de-htmlwen-jian-nei-rong"&gt;ç”¨scrapy shellæ£€æŸ¥å¾—åˆ°çš„htmlæ–‡ä»¶å†…å®¹&lt;/h3&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯, requests.getå¾—åˆ°çš„htmlå†…å®¹&lt;strong&gt;å¹¶ä¸ä¸€å®š&lt;/strong&gt;å’Œåœ¨æµè§ˆå™¨æ‰“å¼€é“¾æ¥å¾—åˆ°çš„å†…å®¹ç›¸åŒ!   &lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ£€æŸ¥æ˜¯å¦å¾—åˆ°äº†æƒ³è¦çš„htmlå†…å®¹, æœ‰ä¸¤ä¸ªæ–¹å¼, ä¸€ä¸ªæ˜¯æŠŠå¾—åˆ°çš„å†…å®¹è¾“å‡ºä¸ºä¸€ä¸ª.htmlæ–‡ä»¶, ç„¶åç”¨æµè§ˆå™¨æ‰“å¼€, æ¯”å¦‚è¿™æ ·:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; with open('tmp.html', 'w') as f:  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;...     f.write(html.encode('utf8')) # æ³¨æ„è¦æ˜¾å¼æŒ‡å®šç¼–ç &lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·åšå…¶å®å¹¶ä¸æ–¹ä¾¿, è¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ä»¥åè¿˜è¦ç”¨æ–‡ä»¶æµè§ˆå™¨æ‰¾åˆ°é‚£ä¸ªæ–‡ä»¶å†æ‰“å¼€, è€Œä¸”æ‰“å¼€çš„ç½‘é¡µå¹¶æ²¡æœ‰å›¾ç‰‡, ä¹Ÿæ²¡æœ‰cssæ ·å¼.   &lt;/p&gt;
&lt;p&gt;æˆ‘æ¯”è¾ƒå–œæ¬¢ç”¨scrapy shellè¿™ä¸ªå·¥å…·, è¿™ä¸ªå·¥å…·åœ¨ä¹‹å‰çš„æ–‡ç« ä¹Ÿ&lt;a href="http://x-wei.github.io/Scrapy%20%E4%B8%8A%E6%89%8B%E7%AC%94%E8%AE%B0.html#iii-scrapy-shell"&gt;æåˆ°è¿‡&lt;/a&gt;, å®ƒéå¸¸é€‚åˆå¿«é€Ÿæµ‹è¯•ä¸€äº›ä¸œè¥¿.   &lt;/p&gt;
&lt;p&gt;é¦–å…ˆå®‰è£…ä¸€ä¸‹scrapyå§è¿˜æ˜¯:ã€€ &lt;code&gt;pip install scrapy&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;ç„¶åè¾“å…¥&lt;code&gt;scrapy shell&lt;/code&gt;å³å¯ä½¿ç”¨. ç”¨&lt;code&gt;fetch(url)&lt;/code&gt;å¯ä»¥æŠŠè¿”å›çš„ç»“æœå­˜æ”¾åœ¨(scrapy shellé»˜è®¤çš„)&lt;code&gt;response&lt;/code&gt;å˜é‡ä¸­, å¯ä»¥æŠŠ&lt;code&gt;fetch&lt;/code&gt;æ“ä½œç†è§£ä¸º&lt;code&gt;response = requests.get(url)&lt;/code&gt;. ç„¶åæŸ¥çœ‹å¾—åˆ°çš„htmlæ–‡ä»¶ åªéœ€è¦ &lt;code&gt;view(response)&lt;/code&gt;, å°±ä¼šè‡ªåŠ¨ç”¨æµè§ˆå™¨æ‰“å¼€ä¸‹è½½çš„ä¸´æ—¶æ–‡ä»¶, éå¸¸æ–¹ä¾¿.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--nolog  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Available&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Scrapy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;objects&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;module&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;contains&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Selector&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;crawler&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crawler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Crawler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x7f8aa3b70e50&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="err"&gt;{}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Settings&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x7f8aa3b70cd0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Useful&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;shortcuts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;shelp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;Shell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;req_or_url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Fetch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;view&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;View&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'https://zh.wikiquote.org/zh-cn/é˜¿çˆ¾ä¼¯ç‰¹Â·æ„›å› æ–¯å¦'&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;3&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;view&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;Out&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;3&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="xiu-gai-header-wei-zhuang-liu-lan-qi"&gt;ä¿®æ”¹header, ä¼ªè£…æµè§ˆå™¨&lt;/h3&gt;
&lt;p&gt;å¯¹äºæœ‰äº›ç½‘ç«™, ç›´æ¥ç”¨&lt;code&gt;requests.get&lt;/code&gt;æŠ“å–ä¼šå¾—åˆ°403forbiddené”™è¯¯, è¿™æ—¶å°±è¦ä¿®æ”¹ä¸€ä¸‹getå‡½æ•°çš„&lt;code&gt;headers&lt;/code&gt;å‚æ•°äº†, æŠŠä¸€ä¸ªPythonå­—å…¸ä¼ ç»™headerså‚æ•°, è¿™ä¸ªå­—å…¸ç†, 'user-agent'å¯¹åº”chrome/firefoxä½¿ç”¨çš„å†…å®¹. ä¾‹å­:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;hea = {'User-Agent':'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36'}  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;r = requests.get('http://jp.tingroom.com/yuedu/yd300p/', headers = hea)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;headerså‚æ•°å¯¹äºé‚£äº›ä¸å¤ªå¥½çˆ¬çš„ç½‘ç«™éå¸¸æœ‰ç”¨, ä¸è¿‡å…³äºå¦‚ä½•çŸ¥é“å¾€headeré‡Œæ”¾ä»€ä¹ˆä¸œè¥¿, éœ€è¦ç”¨chrome-dev-tools, è¿™ä¸ªåé¢å†è¯´.   &lt;/p&gt;
&lt;h1 id="lxmlyi-ji-xpathyu-fa_1"&gt;lxmlä»¥åŠxpathè¯­æ³•&lt;/h1&gt;
&lt;p&gt;è¿˜æ˜¯ç»§ç»­ä¸Šé¢ç»´åŸºè¯­å½•çš„ä¾‹å­, å‡è®¾ç°åœ¨å·²ç»è·å–äº†ç½‘é¡µçš„htmlæ–‡ä»¶, ä¸‹ä¸€æ­¥å°±æ˜¯åœ¨htmlæ–‡ä»¶é‡Œæå–æƒ³è¦çš„å†…å®¹äº†. æ¯”å¦‚æˆ‘ä»¬æƒ³è¦ä»ç»´åŸºè¯­å½•ä¸ŠæŠ“å–&lt;a href="https://zh.wikiquote.org/wiki/%E9%98%BF%E7%88%BE%E4%BC%AF%E7%89%B9%C2%B7%E6%84%9B%E5%9B%A0%E6%96%AF%E5%9D%A6"&gt;çˆ±å› æ–¯å¦&lt;/a&gt;çš„æ‰€æœ‰åè¨€.   &lt;/p&gt;
&lt;p&gt;ä»htmlä¸­æå–æ„Ÿå…´è¶£çš„å†…å®¹, ä¸€ç§é€‰æ‹©æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼, ä¸è¿‡æ­£åˆ™è¡¨è¾¾å¼å†™èµ·æ¥å¤ªè›‹ç–¼äº† â€” &lt;code&gt;(?&amp;lt;=blablah).*(?=blah)&lt;/code&gt;ä¹‹ç±»çš„, æ¯æ¬¡ç”¨éƒ½å¾—ä»æ–°æŸ¥. è€Œä¸”å¤„ç†htmlä»£ç æ—¶ç»å¸¸å®¹æ˜“å‡ºé”™.   &lt;/p&gt;
&lt;p&gt;htmlè¯­è¨€å¯ä»¥çœ‹åšæ˜¯ä¸€ç§xmlè¯­è¨€, è€Œxmlè¯­è¨€å…¶å®æ˜¯åˆ†å±‚æ¬¡çš„(å¯ä»¥parseä¸ºä¸€ä¸ªxmlæ ‘), æ“ä½œxmlå…ƒç´ çš„ç¥å™¨å°±æ˜¯xpathè¯­è¨€äº†.  &lt;/p&gt;
&lt;h3 id="xpathji-chu-yu-fa"&gt;xpathåŸºç¡€è¯­æ³•&lt;/h3&gt;
&lt;p&gt;xpathçš„è¯­æ³•å…¶å®ä¸éš¾, å…¥é—¨çš„è¯è¯äºŒååˆ†é’Ÿçœ‹çœ‹&lt;a href="http://www.w3school.com.cn/xpath/xpath_syntax.asp"&gt;è¿™é‡Œ&lt;/a&gt;ä¼°è®¡å°±å·®ä¸å¤š. è¿™é‡Œç®€å•åˆ—ä¸€ä¸‹:   &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€‰å–èŠ‚ç‚¹&lt;/strong&gt;çš„è¯­æ³•æœ‰:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/&lt;/code&gt; ä»æ ¹èŠ‚ç‚¹é€‰å–, &lt;code&gt;//&lt;/code&gt; ä»æ‰€æœ‰åŒ¹é…çš„èŠ‚ç‚¹é€‰å–  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;.&lt;/code&gt; å½“å‰èŠ‚ç‚¹, &lt;code&gt;..&lt;/code&gt; å½“å‰çš„çˆ¶èŠ‚ç‚¹  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;nodename&lt;/code&gt;é€‰å–èŠ‚ç‚¹, &lt;code&gt;@&lt;/code&gt;é€‰å–èŠ‚ç‚¹çš„å±æ€§  &lt;/li&gt;
&lt;li&gt;é€šé…ç¬¦: &lt;code&gt;*&lt;/code&gt;, é€‰å–è‹¥å¹²è·¯å¾„åˆ™ç”¨&lt;code&gt;|&lt;/code&gt;åˆ†éš”  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;text()&lt;/code&gt;: è·å–è¯¥èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å­:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;//img/@src&lt;/code&gt;: é€‰å–æ‰€æœ‰imgèŠ‚ç‚¹çš„srcå±æ€§  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;//img/../text&lt;/code&gt;: é€‰å–imgèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸‹çš„textèŠ‚ç‚¹(æ‰€ä»¥textå’Œimgä¸º"sibling"å…³ç³»)  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;//*/@src&lt;/code&gt;: é€‰å–ä»»ä½•èŠ‚ç‚¹çš„srcå±æ€§  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶å&lt;strong&gt;è¿‡æ»¤èŠ‚ç‚¹&lt;/strong&gt;çš„è°“è¯è¯­æ³•æœ‰: (è°“è¯æ”¾åœ¨æ–¹æ‹¬å·ä¸­)  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;[1]&lt;/code&gt;é€‰å–ç¬¬ä¸€ä¸ªå…ƒç´ , &lt;code&gt;[last()]&lt;/code&gt;é€‰å–æœ€åä¸€ä¸ª, &lt;code&gt;[position&amp;lt;3]&lt;/code&gt; é€‰å–å‰ä¸¤ä¸ª   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;[@lang="eng"]&lt;/code&gt; é€‰å–å±æ€§langç­‰äº"eng"çš„å…ƒç´   &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‡åˆ°æ›´å¤æ‚çš„xpathä¸ä¼šå†™çš„è¯ å°è¯•ç¿»è¯‘æˆè‹±æ–‡ç„¶åGoogleä¸€ä¸‹, å‡ ä¹æ€»ä¼šæ‰¾åˆ°ç­”æ¡ˆ.   &lt;/p&gt;
&lt;h3 id="shi-yong-chrome-dev-toolhuo-de-yuan-su-de-xpath"&gt;ä½¿ç”¨chrome-dev-toolè·å¾—å…ƒç´ çš„xpath&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥ç”¨chromeçš„å¼€å‘è€…å·¥å…·è·å–ç½‘é¡µå…ƒç´ çš„xpath, åœ¨è¯¥ç½‘é¡µä¸ŠæŒ‰ä¸‹crtl-shift-Iå°±å¯ä»¥æ‰“å¼€devtooläº†:&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image002.png"/&gt; &lt;/p&gt;
&lt;p&gt;ç‚¹å‡»å·¦ä¸Šè§’é‚£ä¸ªæŒ‡é’ˆçš„å°å›¾æ ‡, ç„¶åå†åœ¨ç½‘é¡µä¸Šç‚¹å‡»æƒ³è¦æŸ¥æ‰¾çš„å…ƒç´ , å°±å¯ä»¥å¿«é€Ÿå®šä½åˆ°å®ƒåœ¨htmlé‡Œå¯¹åº”çš„ä»£ç äº†:  &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/chromedev-elem-picker.gif"/&gt; &lt;/p&gt;
&lt;p&gt;åœ¨ä»£ç ä¸­ç‚¹å‡»å³é”®, å¯ä»¥å¾—åˆ°xpath:   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image003.png"/&gt; &lt;/p&gt;
&lt;p&gt;ä¸è¿‡ä¸€èˆ¬chromeæ‰¾åˆ°çš„xpathå¹¶ä¸å…·æœ‰é€šç”¨æ€§, æ‰€ä»¥æœ€å¥½è¿˜æ˜¯è‡ªå·±åˆ†æå¾—åˆ°åˆé€‚çš„xpathä»£ç .   &lt;/p&gt;
&lt;p&gt;chromeç»™æ‰¾åˆ°çš„xpathæ˜¯&lt;code&gt;//*[@id="mw-content-text"]/ul[1]/li[1]&lt;/code&gt;, ç»è¿‡åˆ†æå’Œæµ‹è¯•, &lt;code&gt;//div[@id="mw-content-text"]/ul[position()&amp;lt;last()]/li/text()&lt;/code&gt;åº”è¯¥æ˜¯æ¯”è¾ƒæ­£ç¡®çš„æ‰€æœ‰åè¨€çš„xpathä»£ç . ä¸ºäº†æµ‹è¯•xpath, å¯ä»¥ç›´æ¥åœ¨chrome-dev-toolé‡Œé¢æŒ‰ä¸‹ctrl-FæŸ¥æ‰¾xpath:   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image004.png"/&gt; &lt;/p&gt;
&lt;h3 id="yong-lxmletreecao-zuo-xpath"&gt;ç”¨lxml.etreeæ“ä½œxpath&lt;/h3&gt;
&lt;p&gt;å­¦ä¼šäº†xpath, æ¥ä¸‹æ¥è¦åœ¨Pythoné‡Œä½¿ç”¨xpathåˆ™éœ€è¦lxml.   &lt;/p&gt;
&lt;p&gt;æ­¥éª¤æ˜¯: é¦–å…ˆç”¨ç½‘é¡µhtmlå†…å®¹å»ºç«‹ä¸€ä¸ªetreeå¯¹è±¡, ç„¶ååœ¨ä½¿ç”¨å®ƒçš„&lt;code&gt;xpath&lt;/code&gt;æ–¹æ³•, ä¼ å…¥ä¹‹å‰å¾—åˆ°çš„xpathè¯­å¥. è¿”å›çš„ç»“æœä¸ºä¸€ä¸ªlist, listé‡Œé¢å°±æ˜¯æ‰€æœ‰åŒ¹é…çš„å…ƒç´ äº†.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;url = 'https://zh.wikiquote.org/zh-cn/é˜¿çˆ¾ä¼¯ç‰¹Â·æ„›å› æ–¯å¦'  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;r = requests.get(url)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sel = etree.HTML(r.text)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;for quote in sel.xpath('//div[@id="mw-content-text"]/ul[position()&amp;lt;last()]/li/text()'):  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    print quote.strip()&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="xpathshi-yong-ji-qiao"&gt;xpathä½¿ç”¨æŠ€å·§&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œè¯´ä¸€ä¸‹xpathçš„å®é™…ä½¿ç”¨æŠ€å·§. æ­£å¥½å‰é¢çš„ä»£ç ä¹Ÿä¸å®Œå–„, ç»“åˆè¿™ä¸ªä¾‹å­æ¥è¯´.   &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…ˆæŠ“å¤§å†æŠ“å°&lt;/strong&gt; &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…¶å®ä¹‹å‰çš„xpathè¿˜æœ‰ä¸å®Œç¾çš„åœ°æ–¹, æ¯”å¦‚çˆ±å› æ–¯å¦çš„é¡µé¢ä¸­æœ‰ä¸å°‘åè¨€è¿˜æœ‰"åŸæ–‡"è¿™ä¸€ä¿¡æ¯:   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image005.png"/&gt; &lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ª&lt;code&gt;li&lt;/code&gt;èŠ‚ç‚¹ä¸‹é¢æœ‰å¯èƒ½è¿˜æœ‰ä¸œè¥¿, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè·å¾—è¿™ä¸€ä¸ªä¸ª&lt;code&gt;li&lt;/code&gt;å…ƒç´ , ç„¶åå†åœ¨æ¯ä¸ª&lt;code&gt;li&lt;/code&gt;å…ƒç´ é‡Œé¢å°è¯•æŸ¥æ‰¾"åŸæ–‡"çš„ä¿¡æ¯. ä»£ç å¦‚ä¸‹:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;for li in sel.xpath('//div[@id="mw-content-text"]/ul[position()&amp;lt;last()]/li'):  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    quote = li.xpath('./text()')[0]  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    print quote.strip()  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    origin = li.xpath('./ul/li/span/i/text()')  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    if len(origin)&amp;gt;0: print 'origin:', origin[0]&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ›´å¤æ‚çš„ä¾‹å­æ¯”å¦‚è±†ç“£ç”µå½±çš„é¡µé¢, æ¯ä¸€ä¸ªç”µå½±çš„entryéƒ½æœ‰ç”µå½±å/ä¸Šæ˜ æ—¶é—´/å›½å®¶ç­‰å¥½å¤šä¿¡æ¯. å¤„ç†è¿™æ ·çš„é¡µé¢, å¿…é¡»è¦å…ˆæŠŠå¤§çš„å…ƒç´ (æ•´ä¸ªç”µå½±ä¿¡æ¯çš„div)æŠ“å–, ç„¶åå†åœ¨æ¯ä¸ªå¤§å…ƒç´ é‡Œåˆ†åˆ«æå–ä¿¡æ¯.   &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨&lt;/strong&gt;&lt;code&gt;string()&lt;/code&gt;&lt;strong&gt;è·å¾—nestedèŠ‚ç‚¹æ–‡å­—å†…å®¹&lt;/strong&gt; &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç è¿è¡Œç»“æœè¿˜æœ‰ä¸æ»¡æ„çš„åœ°æ–¹: å¯¹äºä¸€äº›å¸¦æœ‰è¶…é“¾æ¥çš„åè¨€, æˆ‘ä»¬çš„ç¨‹åºä¸èƒ½è·å–é‚£äº›å¸¦æœ‰è¶…é“¾æ¥çš„æ–‡å­—, æ¯”å¦‚è¿™å¥è¯:   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image006.png"/&gt; &lt;/p&gt;
&lt;p&gt;å®ƒçš„htmlä»£ç æ˜¯è¿™æ ·çš„:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;li&amp;gt;&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;ä¸€ä¸ª  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"/w/index.php?title=%E5%BF%AB%E4%B9%90&amp;amp;amp;action=edit&amp;amp;amp;redlink=1"&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"new"&lt;/span&gt; &lt;span class="na"&gt;title=&lt;/span&gt;&lt;span class="s"&gt;"å¿«ä¹ï¼ˆé¡µé¢ä¸å­˜åœ¨ï¼‰"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;å¿«ä¹&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;çš„äººæ€»æ˜¯æ»¡è¶³ä¸æ´»äºå½“ä¸‹ï¼Œè€Œéæµªè´¹æ—¶é—´æ£æƒ³&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"/wiki/%E6%9C%AA%E6%9D%A5"&lt;/span&gt; &lt;span class="na"&gt;title=&lt;/span&gt;&lt;span class="s"&gt;"æœªæ¥"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;æœªæ¥&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;ã€‚  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœç›´æ¥ç”¨&lt;code&gt;/text()&lt;/code&gt;å¤„ç†çš„è¯, åªèƒ½å¾—åˆ°"ä¸€ä¸ª"è¿™ä¿©å­—... é—®é¢˜å‡ºåœ¨è¿™ä¸ªå…ƒç´ æ˜¯nestedçš„, é‡Œé¢åµŒå¥—äº†åˆ«çš„å…ƒç´ (ä¸¤ä¸ª&lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt;), è€Œè¿™ç§æƒ…å†µè¿˜éå¸¸å¸¸è§, æ‰€ä»¥æ€ä¹ˆåŠå‘¢? éœ€è¦ç”¨xpathçš„&lt;code&gt;string()&lt;/code&gt;å‡½æ•°, å®ƒå¯ä»¥è¿”å›èŠ‚ç‚¹çš„æ­£ç¡®å­—ç¬¦ä¸²è¡¨ç¤º. æ‰€ä»¥ä»£ç å†æ¬¡ä¿®æ”¹, quoteçš„è·å–æ”¹ä¸º: &lt;code&gt;quote = li.xpath('string(.)')&lt;/code&gt;.  &lt;/p&gt;
&lt;p&gt;xpathé‡Œæä¾›äº†è›®ä¸°å¯Œçš„&lt;a href="http://www.w3school.com.cn/xpath/xpath_functions.asp"&gt;å‡½æ•°&lt;/a&gt;, é‡åˆ°æ¯”è¾ƒå¤æ‚çš„æ“ä½œçš„æ—¶å€™å¯ä»¥å‚è€ƒä¸€ä¸‹.   &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤ä¸æƒ³è¦çš„èŠ‚ç‚¹&lt;/strong&gt; &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿›è¡Œäº†ä¸Šé¢çš„ä¿®æ”¹, åˆå¼•å…¥äº†æ–°çš„é—®é¢˜: å¯¹äºé‚£äº›æœ‰"åŸæ–‡"ä¿¡æ¯çš„liå…ƒç´ è€Œè¨€, ç”¨string()å‡½æ•°çš„è¯ä¼šæŠŠè¿™äº›åŸæ–‡ä¿¡æ¯ä¹ŸåŒ…æ‹¬åœ¨å†…äº†, è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ. æ¯”å¦‚è¿™æ ·çš„èŠ‚ç‚¹:   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image007.png"/&gt; &lt;/p&gt;
&lt;p&gt;è¿™æ—¶, å¯ä»¥ç”¨lxmlæä¾›çš„&lt;code&gt;remove&lt;/code&gt;å‡½æ•°, åœ¨lièŠ‚ç‚¹ä¸­æŠŠä¸éœ€è¦çš„èŠ‚ç‚¹å…ˆå»æ‰, ç„¶åå†ä½¿ç”¨string()å°±ä¸ä¼šæœ‰ä¸éœ€è¦çš„å†…å®¹äº†.   &lt;/p&gt;
&lt;p&gt;æœ€ç»ˆçš„ä»£ç ä¸º:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'//div[@id="mw-content-text"]/ul[position()&amp;lt;last()]/li'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'---'&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'./ul'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;badnodes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'./ul'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# remove 'origin' stuff in the li element  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bad&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;badnodes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;bad&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getparent&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bad&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;quote&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'string(.)'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;quote&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'string(.)'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="dong-tai-ye-mian-mo-ni-deng-lu-shan-yong-chrome-dev-tools_1"&gt;åŠ¨æ€é¡µé¢/æ¨¡æ‹Ÿç™»å½•: å–„ç”¨chrome-dev-tools&lt;/h1&gt;
&lt;p&gt;ä¸Šé¢çš„ç»´åŸºè¯­å½•çš„ä¾‹å­è¿˜ç®—æ¯”è¾ƒç®€å•, å¯¹äºé‚£äº›éœ€è¦åŠ¨æ€åŠ è½½çš„ç½‘é¡µæˆ–è€…éœ€è¦ç™»å½•æ‰å¯ä»¥æŸ¥çœ‹çš„å†…å®¹, å°±éœ€è¦å¤šç”¨chromeå¼€å‘è€…å·¥å…·äº†. ç”±äºè¿™æ–¹é¢è¦æ ¹æ®ä¸åŒç½‘ç«™å»è¯•éªŒ(+çŒœæµ‹), æ‰€ä»¥è¿™é‡Œä»‹ç»çš„ä¸ä¼šå¤ªè¯¦ç»†...   &lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´, å¯¹äºåŠ¨æ€åŠ è½½çš„ç½‘é¡µ, å¯ä»¥æ‰“å¼€ctrl-shift-Iæ‰“å¼€devtoolsä»¥å, é€‰æ‹©networkæ ‡ç­¾é¡µç„¶ååˆ·æ–°, åœ¨æœ€å¼€å§‹çš„åœ°æ–¹ä¸€èˆ¬ä¼šæœ‰formæäº¤(å¯ä»¥ç”¨&lt;code&gt;requests.post&lt;/code&gt;æ¨¡æ‹Ÿ)æˆ–è€…urlè¯·æ±‚ä¹‹ç±»çš„ä¸œè¥¿, ä¸€è·¯è¿½è¸ªè¿‡å»å³å¯.   &lt;/p&gt;
&lt;p&gt;è¿™é‡Œå±•ç¤ºä¸€ä¸‹ç”¨cookiesæ¨¡æ‹Ÿç™»å½•å¾®åšçš„è¿‡ç¨‹. weiboç”µè„‘ç‰ˆçš„é¡µé¢å¤ªè¿‡å‡Œä¹±, ç”¨å¾®åšæ‰‹æœºç‰ˆ(weibo.cn).   &lt;/p&gt;
&lt;h3 id="yong-dev-toolshuo-qu-deng-lu-cookies"&gt;ç”¨dev-toolsè·å–ç™»å½•cookies&lt;/h3&gt;
&lt;p&gt;cookieså°±æ˜¯ä¸€å°æ®µ(åŠ å¯†åçš„)å­—ç¬¦ä¸², å®ƒçš„å¤§æ¦‚æ˜¯æœ¬åœ°å­˜å‚¨çš„ä¿ç•™ç”¨æˆ·ä¿¡æ¯çš„åŠ å¯†å­—ç¬¦, æœ‰çš„ç½‘ç«™ç‚¹é€‰"ä¸‹æ¬¡è‡ªåŠ¨ç™»å½•"æ—¶, å…¶å®å°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªcookieä¿å­˜åœ¨æœ¬åœ°, ä¸‹æ¬¡ç™»å½•æ—¶åªè¦å‘ç½‘ç«™å‘é€è¿™ä¸²cookieså­—ç¬¦, å¦‚æœcookiesæ²¡æœ‰è¿‡æœŸçš„è¯å°±å¯ä»¥ç›´æ¥ç™»å½•äº†.   &lt;/p&gt;
&lt;p&gt;åœ¨è¦ç‚¹å‡»ç™»å½•å‰, æ‰“å¼€devtoolså¹¶é€‰æ‹©networkæ ‡ç­¾. ç„¶ååœ¨ç™»å½•ä»¥å, æ‰¾å¼€å¤´çš„å‡ ä¸ªrequests, å®šä½åˆ°ä¸€ä¸ªheaderå¸¦æœ‰cookieçš„requestä¸Šé¢, cookieå°±åœ¨è¿™é‡Œäº†(æˆ‘è¯•éªŒå‘ç°, å¥½åƒéœ€è¦ç™»å½•ä»¥åå†åˆ·æ–°ä¸€ä¸‹, è¿™æ—¶dev-toolså¾—åˆ°çš„cookiesæ‰æ˜¯å¯ç”¨çš„):   &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image008.png"/&gt; &lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§åŠæ³•æ˜¯ç”¨chromeè‡ªå¸¦çš„ç›‘æµ‹é¡µé¢ &lt;chrome: #events="" net-internals=""&gt;, (è®¾ç½®captureâ†’Include the actual bytes sent/received), ä¹Ÿå¯ä»¥å¾—åˆ°cookies:   &lt;/chrome:&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/python_crawler_requests_lxml/pasted_image009.png"/&gt; &lt;/p&gt;
&lt;h3 id="zai-requestsli-shi-yong-cookies"&gt;åœ¨requestsé‡Œä½¿ç”¨cookies&lt;/h3&gt;
&lt;p&gt;ä¸€æ—¦è·å¾—äº†cookieså­—ç¬¦ä¸², æ¨¡æ‹Ÿç™»å½•å°±å¾ˆç®€å•: åœ¨requests.geté‡Œä¼ å…¥headerså‚æ•°:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;hea&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'Cookie'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'_T_WM=3a52fbed11ed299552cf910553be7d3b; SUB=_2A251Y_geDeTxGedG6lUQ9SrKyj2IHXVWr5hWrDV6PUJbkdAKLUejkW1CLxUVXEMZZq8EFgsGuIYNqC6MqQ..; gsid_CTandWM=4uno88c512gBK6O5nyuKd7CIW9R'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'http://weibo.cn'&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cook&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="c1"&gt;# use content instead of text   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="bao-cun-pa-qu-de-nei-rong_1"&gt;ä¿å­˜çˆ¬å–çš„å†…å®¹&lt;/h1&gt;
&lt;h3 id="bao-cun-wen-ben-nei-rong-csv"&gt;ä¿å­˜æ–‡æœ¬å†…å®¹: csv&lt;/h3&gt;
&lt;p&gt;ä¿å­˜æ–‡æœ¬ä¿¡æ¯æˆ‘ä¸€èˆ¬å–œæ¬¢æ”¾è¿›csvé‡Œé¢, è€Œç”¨&lt;code&gt;pandas&lt;/code&gt;æ“ä½œcsvæ–‡ä»¶ä¼šæ¯”è¾ƒæ–¹ä¾¿: åœ¨ç¨‹åºä¸­, æŠŠæ¯ä¸€ä¸ªæŠ“å–çš„æ¡ç›®(item)æ”¾è¿›ä¸€ä¸ªå­—å…¸, ç„¶åappendåˆ°dataframeé‡Œé¢, æœ€åç›´æ¥&lt;code&gt;to_csv&lt;/code&gt;æå®š.   &lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ç¤ºæ„ä»£ç , å‡è®¾æˆ‘ä»¬è¦æŠ“å–ä¸€äº›æ–‡ç« çš„title, dateå’Œå‘è¡¨åœ°ç‚¹ä¸‰ä¸ªä¿¡æ¯:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# ...  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;__loop__&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;#...  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;__code_for_extracting_these_fields__&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="c1"&gt;#...  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;series&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;'title'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'place'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;place&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'date'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;series&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ignore_index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;'title'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'date'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'place'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt; &lt;span class="c1"&gt;# adjust column order  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'melanthon.csv'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'utf-8'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="bao-cun-fei-wen-ben-nei-rong"&gt;ä¿å­˜éæ–‡æœ¬å†…å®¹&lt;/h3&gt;
&lt;p&gt;æœ‰äº›æ—¶å€™æˆ‘ä»¬è¦ä¸‹è½½å›¾ç‰‡/è§†é¢‘ç­‰éæ–‡æœ¬çš„ä¿¡æ¯, æˆ‘ä»¬å¯ä»¥ç”¨xpathå®šä½åˆ°å›¾ç‰‡/è§†é¢‘çš„é“¾æ¥åœ°å€å¤„, é‚£ä¹ˆä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶, æˆ‘æŸ¥çš„æœ‰ä¸¤ä¸ªåŠæ³•.  &lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ–¹æ³•ç®€å•ç²—æš´: ç”¨urlretrieve, ç›´æ¥å¾€å‡½æ•°é‡Œä¼ å…¥urlå’Œæœ¬åœ°è·¯å¾„å³å¯:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;urlretrieve&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;urlretrieve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fpath&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ–¹æ³•è¿˜æ˜¯ç”¨requests, ç”¨åˆ†ç‰‡çš„æ–¹å¼è·å–æ–‡ä»¶(æˆ‘çŒœè¿™ç§æ›´é€‚åˆå¤§æ–‡ä»¶çš„ä¸‹è½½?):   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;resp = requests.get(url, stream=True)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f = open(fpath, 'wb')  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;for chunk in resp.iter_content(chunk_size=1024):  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;       if chunk: # filter out keep-alive new chunks  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;           f.write(chunk)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f.close()&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="bing-xing-xia-zai"&gt;å¹¶è¡Œä¸‹è½½&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸‹è½½å¤§æ–‡ä»¶çš„æ—¶å€™å¯ä»¥éå¸¸æ˜æ˜¾æ„Ÿå—åˆ°, ä¸‹è½½æ–‡ä»¶çš„è¿‡ç¨‹å æ®äº†å¤§éƒ¨åˆ†ç¨‹åºçš„æ‰§è¡Œæ—¶é—´. &lt;br/&gt;
æ¯”è¾ƒç®€å•çš„åŠ é€ŸåŠæ³•å°±æ˜¯, å…ˆæŠŠæ‰€æœ‰è¦ä¸‹è½½çš„æ–‡ä»¶url(ä»¥åŠæœ¬åœ°ä¿å­˜çš„fpath)æ”¾è¿›ä¸€ä¸ªlisté‡Œ, æœ€ååœ¨ä¸€èµ·ä¸‹è½½, è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨Pythonçš„å¤šè¿›ç¨‹æ¨¡å—è¿›è¡ŒåŠ é€Ÿäº†.   &lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒçš„ä»£ç åªå…¶å®å°±æ˜¯pool.map, æŠŠçˆ¬å»çš„å‡½æ•°mapåˆ°è¦çˆ¬çš„urlåˆ—è¡¨ä¸Š:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;multiprocessing.dummy&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Pool&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;pool&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;crawl_func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;urls_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸ªå®é™…çš„ä¾‹å­, é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªdownloadå‡½æ•°ç”¨äºä¸‹è½½è§†é¢‘, ç„¶ådownload_videoså‡½æ•°, å¤šçº¿ç¨‹ä¸‹è½½è§†é¢‘.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;download&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fpath&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{}):&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;fname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fpath&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'start downloading &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt; ...'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;fname&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fpath&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'wb'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;break&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter_content&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;chunk_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="c1"&gt;# filter out keep-alive new chunks  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'download finished: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;fpath&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;download_videos&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;video_urls_list&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="c1"&gt;# input = list of (url,fpath) pairs  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'downloading &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt; files in parallel...'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;video_urls_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;multiprocessing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Pool&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;pool&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;video_urls_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;      &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'all downloading finished !'&lt;/span&gt;  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ€å, æˆ‘å†™äº†ä¸€ä¸ªæå®¢å­¦é™¢è¯¾ç¨‹è§†é¢‘çš„ä¸‹è½½è„šæœ¬, ç”¨cookiesæ¨¡æ‹Ÿç™»å½•. ä¸€ç™¾æ¥è¡Œçš„ä»£ç , è·‘ä¸€æ™šä¸Šå¯ä»¥ä¸‹è½½å¥½å‡ åGçš„è§†é¢‘... &lt;br/&gt;
gistæ”¾åœ¨: &lt;a href="https://gist.github.com/X-Wei/46817a6614e3677391ab13e420b4cb9f"&gt;https://gist.github.com/X-Wei/46817a6614e3677391ab13e420b4cb9f&lt;/a&gt;  (ä¸è¿‡è¿™é‡Œç”¨çš„cookiesæ—©å°±è¿‡æœŸäº†)  &lt;/p&gt;</summary><category term="python"></category></entry><entry><title>codejamå¸¸ç”¨(python)è§£é¢˜å·¥å…·</title><link href="https://x-wei.github.io/tech/codejam-python-tools.html" rel="alternate"></link><published>2016-05-27T18:00:00+02:00</published><updated>2016-05-27T18:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2016-05-27:tech/codejam-python-tools.html</id><summary type="html">&lt;p&gt;æ€»ç»“ä¸€ä¸‹ç”¨pythonæ’¸codejamæ—¶å¸¸ç”¨çš„ä¸€äº›åº“, å¹¶ä¸”ç»™ä¸€äº›ç®€å•çš„ä¾‹å­. å‘ç°ç”¨pythonæ’¸codejaméå¸¸åˆé€‚: codejamçš„æ—¶é—´è¦æ±‚ä¸ä¸¥æ ¼(4/8åˆ†é’Ÿ), è€Œä¸”ç¨‹åºåªè¦æœ¬åœ°è¿è¡Œ. æ­£å¥½å¯ä»¥ä½¿ç”¨pythonç®€æ´çš„è¯­æ³•å’Œä¸°å¯Œçš„å‡½æ•°åº“.    &lt;/p&gt;
&lt;h1 id="collections"&gt;collections&lt;/h1&gt;
&lt;p&gt;pyè‡ªå¸¦çš„ä¸€äº›å¥½ç”¨çš„æ•°æ®ç»“æ„...&lt;br/&gt;
&lt;a href="https://docs.python.org/2/library/collections.html"&gt;https://docs.python.org/2/library/collections.html&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;code&gt;from collections import Counter, deque, defaultdict&lt;/code&gt; &lt;/p&gt;
&lt;h1 id="itertools"&gt;itertools&lt;/h1&gt;
&lt;p&gt;ä¸»è¦æ˜¯ç”¨æ¥ç©·ä¸¾çš„æ—¶å€™å®ƒé‡Œé¢ä¸€äº›å‡½æ•°å¾ˆå¥½ç”¨... &lt;/p&gt;
&lt;p&gt;&lt;a href="https://docs.python.org/2/library/itertools.html"&gt;https://docs.python.org/2/library/itertools.html&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'ABCD'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'EFG'&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;...&lt;/span&gt;        &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;...&lt;/span&gt;        &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;permutations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;...&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'G'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'F'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="bitmap"&gt;bitmap&lt;/h1&gt;
&lt;p&gt;èªæ˜ä¸€ç‚¹çš„ç©·ä¸¾éœ€è¦ç”¨bitmap... å®æµ‹å¯ä»¥åŠ é€Ÿåå€...&lt;/p&gt;
&lt;h3 id="use-bitmap-for-combinations-2n-possibilities"&gt;use bitmap for combinations (2^N possibilities)&lt;/h3&gt;
&lt;p&gt;(N elements, each element 2 choices) &lt;br/&gt;
&lt;code&gt;for mask in xrange(1&amp;lt;&amp;lt;N): ...&lt;/code&gt; &lt;/p&gt;
&lt;h3 id="setclean-kth-bit"&gt;set/clean Kth bit&lt;/h3&gt;
&lt;p&gt;set: &lt;code&gt;bm |= 1&amp;lt;&amp;lt;k&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;clean: &lt;code&gt;bm &amp;amp;= ~(1&amp;lt;&amp;lt;k)&lt;/code&gt; &lt;/p&gt;
&lt;h3 id="count-nb-of-1s-in-a-bitmap"&gt;count nb of 1s in a bitmap&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;bin(bm).count('1')&lt;/code&gt; &lt;/p&gt;
&lt;h1 id="networkx_1"&gt;networkx&lt;/h1&gt;
&lt;p&gt;å¸¸ç”¨çš„å›¾è®ºç®—æ³•éƒ½åœ¨é‡Œé¢äº†. nxæœ€æ£’çš„æ˜¯&lt;strong&gt;ä»»ä½•hashableçš„objectéƒ½å¯ä»¥ç”¨æ¥ä½œä¸ºèŠ‚ç‚¹çš„index&lt;/strong&gt;, å†æƒ³æƒ³ç”¨C++çš„bgl, ç®€ç›´è›‹ç–¼...
&lt;a href="https://networkx.readthedocs.io/en/stable/"&gt;https://networkx.readthedocs.io/en/stable/&lt;/a&gt; &lt;/p&gt;
&lt;h3 id="constructing-graph"&gt;constructing graph&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;networkx&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;nx&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DiGraph&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;# use `Graph` for undired graph, `MultiGraph` for dup-edges   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_node&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# any hashable obj can be used as node index   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# missing nodes will be automatically added   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# if G is undired(`Graph`), 1--&amp;gt;3 and 3--&amp;gt;1 will be added   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nodes&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edges&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_node&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# nx ignores duplicate adding edges/nodes    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nodes&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edges&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# outgoing edges from a node   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}}&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'color'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'blue'&lt;/span&gt; &lt;span class="c1"&gt;# easily add edge properties    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'color'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'blue'&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}}&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# this is another way to add property   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edge&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'color'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'blue'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'capacity'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}},&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}}&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'cat'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'string node'&lt;/span&gt; &lt;span class="c1"&gt;# can also be: G.add_node('a', cat='string node')   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'cat'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'string node'&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{},&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="digraph-topo-sort-cycle-detection-strongly-connected-component"&gt;DiGraph: topo-sort, cycle-detection, strongly connected component&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://networkx.readthedocs.io/en/stable/reference/algorithms.shortest_paths.html"&gt;http://networkx.readthedocs.io/en/stable/reference/algorithms.shortest_paths.html&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;networkx&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;nx&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DiGraph&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strongly_connected_components&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;topological_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;simple_cycles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strongly_connected_components&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;])]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shortest_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;weight&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;weight&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shortest_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shortest_path_length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;3&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shortest_path_length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'weight'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# set attribut edge 'weight' as weight, (if not present, weight=1 )   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="undirected-graph-connected-component-mst"&gt;Undirected Graph: connected component, MST&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://networkx.readthedocs.io/en/networkx-1.11/reference/generated/networkx.algorithms.mst.minimum_spanning_tree.html#networkx.algorithms.mst.minimum_spanning_tree"&gt;http://networkx.readthedocs.io/en/networkx-1.11/reference/generated/networkx.algorithms.mst.minimum_spanning_tree.html#networkx.algorithms.mst.minimum_spanning_tree&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; G = nx.Graph()   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; G.add_edge(1,2); G.add_edge(1,3); G.add_edge('a','b')   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; list( nx.connected_components(G) )   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;[set(['a', 'b']), set([1, 2, 3])]   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; G.add_edge(2,3)   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; mst =  nx.minimum_spanning_tree(G) # returns a new graph   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; mst.edges()   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;[('a', 'b'), (1, 2), (1, 3)]   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; G.add_edge(1,3,weight=2) # mst takes attribut 'weight', if no present, weight=1   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;gt;&amp;gt;&amp;gt; nx.minimum_spanning_tree(G).edges()   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;[('a', 'b'), (1, 2), (2, 3)]&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="maxflow"&gt;maxflow&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://networkx.readthedocs.io/en/networkx-1.11/reference/algorithms.flow.html"&gt;http://networkx.readthedocs.io/en/networkx-1.11/reference/algorithms.flow.html&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;networkx&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;nx&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DiGraph&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'x'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;3.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'x'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'a'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'c'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;3.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'c'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;5.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'d'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'d'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'e'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'c'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'y'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'e'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'y'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;3.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;flow_value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flow_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximum_flow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'x'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'y'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;flow_value&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mf"&gt;3.0&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;flow_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'x'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'b'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="maximum-matching"&gt;maximum matching&lt;/h3&gt;
&lt;p&gt;NB: maxi&lt;strong&gt;mum&lt;/strong&gt; matching != maxim&lt;strong&gt;al&lt;/strong&gt; matching... &lt;br/&gt;
there are maximum-matching functions for general undir graph (&lt;code&gt;max_weight_matching&lt;/code&gt;) and for bipartitie graph (&lt;code&gt;maximum_matching&lt;/code&gt;), the one for bipartite graph is faster, the general one takes O(V**3).   &lt;/p&gt;
&lt;p&gt;&lt;a href="http://networkx.readthedocs.io/en/stable/reference/generated/networkx.algorithms.matching.max_weight_matching.html?highlight=maximum_matching"&gt;http://networkx.readthedocs.io/en/stable/reference/generated/networkx.algorithms.matching.max_weight_matching.html?highlight=maximum_matching&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Graph&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edges_from&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;(1,2),(2,3),(3,4),(4,5)&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max_weight_matching&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxcardinality&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;#mate&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mate&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_bipartite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bipartite&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximum_matching&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mate&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and there are vertex cover algorithms as well......     &lt;/p&gt;
&lt;h1 id="pulp_1"&gt;pulp&lt;/h1&gt;
&lt;p&gt;çº¿æ€§è§„åˆ’çš„åº“, ä¾›äº†éå¸¸å¥½ç”¨çš„æ¥å£æ¥æ„é€ LPé—®é¢˜, å¢åŠ çº¦æŸæˆ–è€…å®šä¹‰objectiveåªè¦ç”¨&lt;code&gt;prob+=[expression]&lt;/code&gt;å°±å¥½äº†, åŸºæœ¬ä¸Šçœ‹çœ‹ä¾‹å­å°±èƒ½ä¸Šæ‰‹. 
é¢å¯¹é€‰æ‹©é—®é¢˜çš„æ—¶å€™çº¿æ€§è§„åˆ’æ˜¯ä¸é”™çš„æ–¹æ³• -- å¦‚æœè®¡ç®—é€Ÿåº¦å¯ä»¥è¶³å¤Ÿå¿«çš„è¯... &lt;/p&gt;
&lt;p&gt;&lt;a href="https://pythonhosted.org/PuLP/pulp.html"&gt;https://pythonhosted.org/PuLP/pulp.html&lt;/a&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pulp&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpVariable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"x"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpVariable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"y"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Integer'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# var category can be integer   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpProblem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"myProblem"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LpMinimize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="c1"&gt;# add constraint   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="c1"&gt;# add objective   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;# solve using default solver   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GLPK&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="c1"&gt;# or use glpk solver   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;LpStatus&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s1"&gt;'Optimal'&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objective&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# see objective value   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;8.0&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# see variable value    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…³äºnxå’Œpulpçš„åº”ç”¨å¯ä»¥å‚è€ƒ&lt;a href="http://x-wei.github.com/codejam-2015-r2pbC.html"&gt;ä¸Šç¯‡æ–‡ç« &lt;/a&gt;.&lt;/p&gt;</summary><category term="algorithm"></category><category term="codejam"></category><category term="python"></category></entry><entry><title>codejam2015-round2-pbC çš„ä¸‰ç§è§£æ³•</title><link href="https://x-wei.github.io/tech/codejam-2015-r2pbC.html" rel="alternate"></link><published>2016-05-27T00:00:00+02:00</published><updated>2016-05-27T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2016-05-27:tech/codejam-2015-r2pbC.html</id><summary type="html">&lt;p&gt;æ˜¨å¤©åšçš„ä¸€é“codejamé¢˜ç›®, è¿™ä¸ªé¢˜ç›®çš„ä¸‰ç§è§£æ³•éƒ½éå¸¸æœ‰ä»£è¡¨æ€§, ç‰¹æ­¤ä¸€è®°.    &lt;/p&gt;
&lt;p&gt;é¢˜ç›®é“¾æ¥åœ¨è¿™é‡Œ:  &lt;br/&gt;
&lt;a href="https://code.google.com/codejam/contest/8234486/dashboard#s=p2"&gt;https://code.google.com/codejam/contest/8234486/dashboard#s=p2&lt;/a&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Elliot's parents speak French and English to him at home. He has heard a lot of words, but it isn't always clear to him which word comes from which language! Elliot knows one sentence that he's sure is English and one sentence that he's sure is French, and some other sentences that could be either English or French. If a word appears in an English sentence, it must be a word in English. If a word appears in a French sentence, it must be a word in French.    &lt;br/&gt;
Considering all the sentences that Elliot has heard, what is the minimum possible number of words that he's heard that must be words in both English and French?        &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Input     &lt;br/&gt;
The first line of the input gives the number of test cases, T. T test cases follow. Each starts with a single line containing an integer N. N lines follow, each of which contains a series of space-separated "words". Each "word" is made up only of lowercase characters a-z. The first of those N lines is a "sentence" in English, and the second is a "sentence" in French. The rest could be "sentences" in either English or French. (Note that the "words" and "sentences" are not guaranteed to be valid in any real language.)   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Output     &lt;br/&gt;
For each test case, output one line containing "Case #x: y", where x is the test case number (starting from 1) and y is the minimum number of words that Elliot has heard that must be words in both English and French.   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Limits   &lt;br/&gt;
1 â‰¤ T â‰¤ 25. &lt;br/&gt;
Each word will contain no more than 10 characters. &lt;br/&gt;
The two "known" sentences will contain no more than 1000 words each. &lt;br/&gt;
The "unknown" sentences will contain no more than 10 words each. &lt;br/&gt;
Small dataset &lt;br/&gt;
2 â‰¤ N â‰¤ 20. &lt;br/&gt;
Large dataset &lt;br/&gt;
2 â‰¤ N â‰¤ 200.   &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘çš„codejamç¨‹åºæ¨¡æ¿é•¿è¿™æ ·:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt; &lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;typ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;typ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;raw_input&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;def&lt;/span&gt; &lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;typ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;typ&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;raw_input&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;def&lt;/span&gt; &lt;span class="n"&gt;testcase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'Case #%d: %d'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s1"&gt;'__main__'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;raw_input&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;testcase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="fa-1-qiong-ju-bruteforce-for-small-testcase"&gt;æ³•1: ç©·ä¸¾ bruteforce (for small testcase)&lt;/h1&gt;
&lt;p&gt;åœ¨small set(N=20) ä¸­, å¯¹äºé‚£18ä¸ªæœªçŸ¥è¯­è¨€çš„å¥å­, æ¯å¥å¯èƒ½æ˜¯è‹±è¯­æˆ–æ³•è¯­. é‚£ä¹ˆç©·ä¸¾æ‰€æœ‰å¯èƒ½æ€§, ç„¶åé€‰æ‹©åŒè¯­å•è¯æœ€å°‘çš„å³å¯. 2^18çº¦ç­‰äºå‡ åä¸‡ , æŒ‰è¯´pythonè¿˜æ˜¯å¯ä»¥handleçš„ (2^10=1k, 2^ 20=1M, pythonæ¯ç§’å¤§çº¦èƒ½å¾ªç¯å‡ ç™¾ä¸‡æ¬¡).    &lt;/p&gt;
&lt;h2 id="naive-bruteforce"&gt;naive bruteforce&lt;/h2&gt;
&lt;p&gt;ç”Ÿæˆæ‰€æœ‰çš„å¯èƒ½æ€§ç»„åˆ, pythonçš„&lt;code&gt;itertools&lt;/code&gt;åŒ…é‡Œæä¾›äº†&lt;a href="https://docs.python.org/2/library/itertools.html#itertools.combinations"&gt;combinations&lt;/a&gt;å‡½æ•°, &lt;code&gt;combinations(iterable, r)&lt;/code&gt;è¿”å›æ‰€æœ‰åœ¨iterableä¸­å¤§å°ä¸ºrçš„å­é›†(çš„è¿­ä»£å™¨):    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'ABCD'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'A'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'B'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'D'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨&lt;code&gt;combination&lt;/code&gt;å‡½æ•°å³å¯å®ç°æšä¸¾æ¯å¥è¯æ˜¯è‹±è¯­è¿˜æ˜¯æ³•è¯­çš„åŠŸèƒ½.    &lt;/p&gt;
&lt;p&gt;å½“æ¯å¥è¯æ˜¯è‹±è¯­è¿˜æ˜¯æ³•è¯­å·²ç»ç¡®å®šä»¥å, å¯ä»¥ç”¨é›†åˆå–äº¤é›†çš„æ–¹æ³•(&lt;code&gt;set1.intersection(set2)&lt;/code&gt;)å¾—åˆ°ä¸¤ç§è¯­è¨€ä¸€å…±æœ‰å¤šå°‘ä¸ªé‡å¤çš„å•è¯. ç¨‹åºé•¿è¿™æ ·:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;testcase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fast&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enough&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;En&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Fr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'Case #%d: %d'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;En&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;intersection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Fr&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engsubset&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;allEn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allFr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;En&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Fr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;engsubset&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allEn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allFr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allEn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;intersection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;allFr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;possibleres&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;engsubset&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;possibleres&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engsubset&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;possibleres&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'Case #%d: %d'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶è€Œ, ä¸‹è½½äº†small testcaseä»¥åè¿è¡Œç¨‹åº, é€Ÿåº¦è¿˜æ˜¯ä¸å¤Ÿå¿«, å¤§çº¦è¦ååˆ†é’Ÿæ‰æœ‰ç»“æœ â€” è€Œcodejamçš„æäº¤æ—¶é—´é™åˆ¶æ˜¯4åˆ†é’Ÿå•Š... ç¨‹åºæ¯æ¬¡æ£€æŸ¥2^18ç§å¯èƒ½æ€§, ä½†æ˜¯ç”±äºæ¯æ¬¡æ£€æŸ¥éƒ½è¦è¿›è¡Œé›†åˆçš„unionå’Œintersectionæ“ä½œ(è¿™ç§æ“ä½œçš„æ•ˆç‡å¹¶ä¸é«˜, ç”šè‡³C++é‡Œä¹Ÿæ˜¯ä¸€æ ·), è¿™ä¸ªæ“ä½œå¤ªè€—è´¹æ—¶é—´äº†æ‰€ä»¥ä¸è¡Œ...    &lt;/p&gt;
&lt;h2 id="bruteforce-using-bitmap"&gt;bruteforce using bitmap&lt;/h2&gt;
&lt;p&gt;éœ€è¦æ›´åŠ èªæ˜çš„ç©·ä¸¾æ–¹æ³•, è‡ªç„¶çš„æƒ³æ³•å°±æ˜¯ç”¨bitmap(æˆ–è€…å«bitvector?). ä¹‹å‰çš„ä¸¤ä¸ªåŸºæœ¬æ“ä½œéƒ½å¯ä»¥ç”¨bitmapå®Œæˆ:    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æšä¸¾å„ä¸ªå¥å­çš„è¯­è¨€ç§ç±»: å¦‚æœæ¯ä¸ªå¥å­ç”¨ä¸€ä½æ¥è¡¨ç¤ºçš„è¯(1ä»£è¡¨è‹±è¯­, 0ä»£è¡¨æ³•è¯­), é‚£ä¹ˆç”¨Nä½çš„bitmapå³å¯è¡¨ç¤ºä¸€ç§æƒ…å½¢. è¿™ä¸ªbitmapåªéœ€ä»0å¢åŠ åˆ°2^N-1, å°±æŠŠ2^Nä¸ªå¯èƒ½æ€§éƒ½éå†äº†. (å®é™…ä¸Šæ˜¯2^N-2ä¸ªå¯èƒ½æ€§, å› ä¸ºå‰ä¸¤ä¸ªå¥å­å·²ç»ç¡®å®šè¯­è¨€äº†).    &lt;/li&gt;
&lt;li&gt;ä¸¤ç§è¯­è¨€çš„è¯æ±‡è¡¨è¿›è¡Œunion/intersection: å‡è®¾å…±æœ‰Kä¸ªä¸åŒçš„å•è¯, é‚£ä¹ˆç”¨ä¸€ä¸ªKä½çš„bitmapå³å¯è¡¨ç¤ºä¸€ç§è¯­è¨€åŒ…å«äº†å“ªäº›å•è¯. ç„¶åé›†åˆçš„unionå’Œintersectionå³å¯è¡¨ç¤ºä¸ºORå’ŒANDçš„é€»è¾‘è¿ç®—.    &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;bit manipulationè›®subtleçš„, ä¸è¿‡ä¹ æƒ¯äº†å°±å¥½... å¦å¤–pythonçš„integerå¯ä»¥ä»»æ„é•¿åº¦, ä¸ç”¨åƒC/javaé‚£æ ·è€ƒè™‘bitmapä½æ•°å¤§äº64çš„æƒ…å†µ, è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„. ä»£ç å¦‚ä¸‹:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;testcase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;instead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;speedup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;small&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;!!&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;distinct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sentence&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reprensented&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nc"&gt;bit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmap&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;#construct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;bm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scent&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;bm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bm&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1e10&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;look&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k+2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bitmaps&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k+2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'Case #%d: %d'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cas&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç åœ¨æˆ‘ç”µè„‘ä¸Šæ‰§è¡Œsmallçš„æ—¶å€™å¤§çº¦èŠ±è´¹1åˆ†é’Ÿ, æ¯”æœ€å¼€å§‹ç”¨setçš„é€Ÿåº¦æé«˜äº†åå€. å½“ç„¶, å¯¹äºlargeçš„caseè¿™ç§è§£æ³•è‚¯å®šå°±è¶…æ—¶äº†...    &lt;/p&gt;
&lt;h1 id="fa-2-zui-da-liu-maxflow_1"&gt;æ³•2: æœ€å¤§æµ maxflow&lt;/h1&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯å®˜æ–¹&lt;a href="https://code.google.com/codejam/contest/8234486/dashboard#s=a&amp;amp;a=2"&gt;analysis&lt;/a&gt;é‡Œæä¾›çš„ç­”æ¡ˆ. å¦‚æœå°†æ‰€æœ‰å¥å­&lt;code&gt;S&lt;/code&gt;ä»¥åŠæ‰€æœ‰å•è¯&lt;code&gt;w&lt;/code&gt;çœ‹ä½œèŠ‚ç‚¹, æ¯ä¸ªå¥å­çš„èŠ‚ç‚¹&lt;code&gt;S&lt;/code&gt;äºå®ƒåŒ…å«çš„å•è¯çš„èŠ‚ç‚¹&lt;code&gt;w&lt;/code&gt;ç›¸è¿, é—®é¢˜è½¬åŒ–æˆäº†ä»èŠ‚ç‚¹&lt;code&gt;S1&lt;/code&gt;åˆ°èŠ‚ç‚¹&lt;code&gt;S2&lt;/code&gt;çš„vertex cuté—®é¢˜ (é€‰å–æœ€å°çš„èŠ‚ç‚¹é›†åˆ, å°†è¯¥é›†åˆçš„èŠ‚ç‚¹å»æ‰ä»¥åS1å’ŒS2ä¸å†è”é€š).    &lt;/p&gt;
&lt;p&gt;ç„¶åè¿™ä¸ªé—®é¢˜åˆå¯ä»¥è½¬ä¸ºè¾¹çš„min cuté—®é¢˜: åªéœ€è¦æŠŠæ¯ä¸ªå•è¯èŠ‚ç‚¹wåˆ†æˆå·¦å³ä¸¤ä¸ªèŠ‚ç‚¹&lt;code&gt;w1&lt;/code&gt;å’Œ&lt;code&gt;w2&lt;/code&gt;, å¹¶ä¸”è¿™æ ·æ·»åŠ è¾¹(å‡è®¾wåœ¨å¥å­Sä¸­):    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;w1--&amp;gt;w2&lt;/code&gt;, capacity=1   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;S--&amp;gt;w1&lt;/code&gt;, capacity=INF   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;w2--&amp;gt;S&lt;/code&gt;, capacity=INF   &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¿™æ ·æ„é€ çš„å›¾é‡Œè®¡ç®—maxflowå³å¯å¾—åˆ°mincut, ä¹Ÿå°±æ˜¯é¢˜ç›®çš„ç­”æ¡ˆ...    &lt;/p&gt;
&lt;p&gt;åœ¨å®ç°è¿™ä¸ªè§£æ³•çš„æ—¶å€™ç”¨åˆ°äº†networkxè¿™ä¸ªåŒ…, å®ƒæä¾›äº†æ¯”bglå¥½ç”¨100å€çš„æ¥å£(è™½ç„¶ä¹Ÿæ¯”bglæ…¢å·®ä¸å¤š100å€ ==...). &lt;em&gt;ä»»ä½•hashableçš„objectéƒ½å¯ä»¥ç”¨æ¥ä½œä¸ºèŠ‚ç‚¹çš„index&lt;/em&gt;, æ‰€ä»¥å†™èµ·æ¥éå¸¸èˆ’æœ, 15è¡Œæå®š:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;testcase_maxflow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="c1"&gt;# using maxflow !   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;INF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1e10&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;networkx&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;nx&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DiGraph&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;N&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;words&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;si&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'sent-&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_node&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;si&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;wd&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;'_l'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;'_r'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;si&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;'_l'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;INF&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_edge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;'_r'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;si&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;INF&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;flow_value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flow_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximum_flow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'sent-0'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'sent-1'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'Case #&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;: &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;flow_value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨è¿™ä¸ªä»£ç å³å¯è½»æ¾é€šè¿‡large case... maxflowçš„å»ºæ¨¡è¿˜çœŸæ˜¯è‰ºæœ¯...orz   &lt;/p&gt;
&lt;h1 id="fa-3-xian-xing-gui-hua-integer-linear-programming"&gt;æ³•3: çº¿æ€§è§„åˆ’ (integer) linear programming&lt;/h1&gt;
&lt;p&gt;å†™å®Œä¸Šé¢é‚£ä¸ªè§£æ³•ä»¥å, æˆ‘åˆçœ‹äº†çœ‹&lt;a href="https://www.go-hero.net/jam/15/name/linguo"&gt;å¤§ç¥&lt;/a&gt;çš„è§£æ³•, å‘ç°ä»–å±…ç„¶ç”¨çš„æ˜¯&lt;a href="https://pythonhosted.org/PuLP/pulp.html"&gt;pulp&lt;/a&gt;(pythonçº¿æ€§è§„åˆ’çš„åŒ…), äºæ˜¯è‡ªå·±æƒ³äº†ä¸€ä¸‹, è¿™ä¸ªé—®é¢˜ç¡®å®å¯ä»¥ç”¨çº¿æ€§è§„åˆ’æ¥å»ºæ¨¡ !    &lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¯´ä¸€å¥pulpè¿™ä¸ªåŒ…, å®ƒæä¾›äº†éå¸¸å¥½ç”¨çš„æ¥å£æ¥æ„é€ LPé—®é¢˜, å¢åŠ çº¦æŸæˆ–è€…å®šä¹‰objectiveåªè¦ç”¨&lt;code&gt;prob+=[expression]&lt;/code&gt;å°±å¥½äº†, å¯ä»¥è¯´æ¯”AMPLå¥½ç”¨ä¸å°‘... ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pulp&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpVariable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"x"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpVariable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"y"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Integer'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# var category can be integer   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LpProblem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"myProblem"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LpMinimize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="c1"&gt;# add constraint   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="c1"&gt;# add objective   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;# solve using default solver   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GLPK&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="c1"&gt;# or use glpk solver   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;LpStatus&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s1"&gt;'Optimal'&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prob&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objective&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# see objective value   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;8.0&lt;/span&gt;   &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# see variable value    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK, æœ¬é¢˜çš„å»ºæ¨¡è¿‡ç¨‹å¦‚ä¸‹:  &lt;br/&gt;
å¯¹äºæ¯ä¸€ä¸ªå¥å­&lt;code&gt;S&lt;/code&gt;, å®šä¹‰binaryçš„LPå˜é‡&lt;code&gt;Se&lt;/code&gt;, Se=1è¡¨ç¤ºå¥å­Sä¸ºè‹±è¯­, =0è¡¨ç¤ºä¸ºæ³•è¯­.  &lt;br/&gt;
å¯¹äºæ¯ä¸ªå•è¯&lt;code&gt;w&lt;/code&gt;, å®šä¹‰ä¸¤ä¸ªbinaryå˜é‡&lt;code&gt;we&lt;/code&gt;, &lt;code&gt;wf&lt;/code&gt;, è¡¨ç¤ºå•è¯wæ˜¯è‹±(æ³•)è¯­å•è¯.  &lt;br/&gt;
ç„¶å, å†å®šä¹‰å˜é‡&lt;code&gt;wef&lt;/code&gt;, å®ƒè¡¨ç¤ºå•è¯&lt;code&gt;w&lt;/code&gt;æ—¢æ˜¯è‹±è¯­å•è¯åˆæ˜¯æ³•è¯­å•è¯. æ‰€ä»¥æœ‰è¿™ä¸ªé€»è¾‘å…³ç³»: &lt;code&gt;wef = we AND wf&lt;/code&gt; é‚£ä¹ˆè¿™ç§é€»è¾‘å…³ç³»å¦‚ä½•ç”¨çº¿æ€§çº¦æŸæè¿°å‘¢? å¯ä»¥è¿™æ ·: &lt;code&gt;wef &amp;gt;= we+wf-1&lt;/code&gt; éå¸¸å·§å¦™å§... &lt;br/&gt;
(&lt;a href="http://cs.stackexchange.com/questions/12102/express-boolean-logic-operations-in-zero-one-integer-linear-programming-ilp"&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;æ€»ç»“äº†å„ç§é€»è¾‘å…³ç³»ç”¨çº¿æ€§è§„åˆ’çš„æè¿°æ–¹å¼, å†™çš„å¾—éå¸¸è¯¦ç»†. )   &lt;/p&gt;
&lt;p&gt;è¦æœ€å°åŒ–çš„ç›®æ ‡å‡½æ•°å°±æ˜¯ &lt;code&gt;sum(wef)&lt;/code&gt; äº†, çº¦æŸé™¤äº†åˆšæ‰é‚£ä¸ª&lt;code&gt;wef &amp;gt;= we+wf-1&lt;/code&gt;ä»¥å¤–, è¿˜è¦è¡¨è¾¾å•è¯å’Œå¥å­ä¹‹é—´çš„å…³ç³»: å¦‚æœä¸€ä¸ªå¥å­ä¸ºè‹±(æ³•)è¯­, é‚£ä¹ˆå¥å­é‡Œçš„æ¯ä¸€ä¸ªå•è¯éƒ½ä¸ºè‹±(æ³•)è¯­. è¿™æ˜¯ä¸€ä¸ª&lt;code&gt;se==&amp;gt;we&lt;/code&gt;çš„é€»è¾‘å…³ç³», ç”¨çº¿æ€§çº¦æŸè¡¨è¾¾ä¸º: &lt;code&gt;we&amp;gt;=se&lt;/code&gt;.    &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ•´ä¸ªæ¨¡å‹æ˜¯:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;Minimize sum(wef)   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;st:   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;we &amp;gt;= se   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;wf &amp;gt;= (1-se)   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;wef &amp;gt;= we+wf-1   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;Se[0]==1, Se[1]==0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨pulpç¼–å†™çš„ä»£ç å¦‚ä¸‹:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;testcase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;formulate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;linear&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;programming&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;readval&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;sentc&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;sentc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readvals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sentc&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;-1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allwords&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;wordsindex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;words&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mapping&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;its&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LpProblem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Bilingual'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LpMinimize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variables&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('Se_'+str(i), cat='Binary') for i in xrange(N) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scentence&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;english&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('we_'+str(j), cat='Binary') for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;english&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('wf_'+str(j), cat='Binary') for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;french&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('wef_'+str(j), cat='Binary') for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BOTH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]==&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;si&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sentc&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;si&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wordsindex&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;wd&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]+&lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GLPK&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;solve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objective&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'Case #%d: %d'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç åœ¨smallä¸Šè¿è¡Œçº¦1åˆ†é’Ÿ, largeçº¦3åˆ†é’Ÿ.    &lt;/p&gt;
&lt;p&gt;å¦å¤–æˆ‘å‘ç°&lt;a href="https://www.go-hero.net/jam/15/name/liutianren"&gt;å¦ä¸€ä¸ªå¤§ç¥&lt;/a&gt;ä»£ç é‡Œæ²¡æœ‰ç”¨Binary/Integerçš„lpå˜é‡, ä¹Ÿå°±æ˜¯è¯´ä»–ç”¨çš„æ˜¯è¿ç»­çš„çº¿æ€§è§„åˆ’! å½“æˆ‘æŠŠå˜é‡çš„å®šä¹‰æ”¹æˆ:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('Se_'+str(i), 0, 1) for i in xrange(N) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Se&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scentence&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;english&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('we_'+str(j), 0) for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;english&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('wf_'+str(j), 0) for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wf&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;french&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; LpVariable('wef_'+str(j), 0) for j in xrange(M) &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wef&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;indicator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BOTH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·ä»¥å, å¾—åˆ°çš„ç»“æœè¿˜æ˜¯æ­£ç¡®çš„!! (ä¸è¿‡ä»£ç è¿è¡Œæ—¶é—´æ²¡æœ‰æ˜¾è‘—çš„æé«˜).    &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ˜¯è¿™ä¸ªæ¨¡å‹ä¸­çš„çŸ©é˜µæ»¡è¶³&lt;a href="https://en.wikipedia.org/wiki/Unimodular_matrix#Total_unimodularity"&gt;totally unimodular&lt;/a&gt;æ€§è´¨?  &lt;br/&gt;
ä¸è¿‡è¿™ä¸ªæ¨¡å‹ä¼¼ä¹å¹¶ä¸æ»¡è¶³wikipediaé‡Œå†™çš„é‚£ä¸ªå……åˆ†æ¡ä»¶?...@@  &lt;br/&gt;
&lt;a href="https://kunigami.wordpress.com/2013/08/12/tu-matrix-recognition/"&gt;è¿™é‡Œ&lt;/a&gt;æœ‰ä¸€ç¯‡çœŸâ€¢å¤§ç¥çš„æ–‡ç« æ˜¯è®²å¦‚ä½•è¯†åˆ«TUçŸ©é˜µçš„ (tl;dr......), é‚£ä¹ˆæ˜¯ä¸æ˜¯å„ç§solverå†…éƒ¨å·²ç»æœ‰äº†è‡ªåŠ¨åˆ¤æ–­TUçš„ä»£ç , æ‰€ä»¥è¿™ä¸¤ç§ç¨‹åºçš„è¿è¡Œæ—¶é—´å·®ä¸å¤š?...    &lt;/p&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹è¿™é“é¢˜ç›®è¿˜æ˜¯éå¸¸æœ‰æ„æ€çš„, ä¸‰ç§è§£æ³•éƒ½å¾ˆæœ‰ä»£è¡¨æ€§, è¿™é‡Œçš„æŠ€å·§ä¼°è®¡åœ¨codejamé‡Œä¼šç»å¸¸ç”¨åˆ°...    &lt;/p&gt;</summary><category term="algorithm"></category><category term="codejam"></category></entry><entry><title>C++ STLå°ç»“&amp;ä»£ç ç‰‡æ®µ</title><link href="https://x-wei.github.io/tech/cpp-demo-snippets.html" rel="alternate"></link><published>2016-01-09T00:00:00+01:00</published><updated>2016-01-09T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2016-01-09:tech/cpp-demo-snippets.html</id><summary type="html">&lt;p&gt;æ€»ç»“äº†ä¸€ä¸‹C++ STLé‡Œé¢ç”¨çš„æ¯”è¾ƒé¢‘ç¹çš„ä¸€äº›ä»£ç ç‰‡æ®µ. (åœ°å€: &lt;a href="https://github.com/X-Wei/cpp-demo-snippets/tree/master/STL"&gt;https://github.com/X-Wei/cpp-demo-snippets/tree/master/STL&lt;/a&gt;)&lt;br/&gt;
cppæ–‡æ¡£: &lt;a href="http://en.cppreference.com/w/cpp"&gt;http://en.cppreference.com/w/cpp&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;å¸¸ç”¨çš„libraryä¸»è¦æœ‰: &lt;br/&gt;
&lt;code&gt;&amp;lt;algorithm&amp;gt;, &amp;lt;vector&amp;gt;, &amp;lt;queue&amp;gt;, &amp;lt;set&amp;gt;, &amp;lt;map&amp;gt;, &amp;lt;cmath&amp;gt;&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªå¸¸è§çš„cppæ–‡ä»¶å¼€å¤´ç‰ˆæœ¬æ˜¯:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;  &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;vector&amp;gt;  &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;algorithm&amp;gt;  &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cp"&gt;#define forloop(i,lo,hi) for(int i = (lo); i &amp;lt;= (hi); i++)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cp"&gt;#define rep(i,N) forloop(i,0,(int)N-1)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="algorithm"&gt;algorithm&lt;/h1&gt;
&lt;h3 id="copy"&gt;copy()&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;OutputIt copy( InputIt first, InputIt last, OutputIt d_first );&lt;/code&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Copies the elements in the range, defined by &lt;code&gt;[first, last)&lt;/code&gt;, to another range beginning at &lt;code&gt;d_first&lt;/code&gt;.   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨æ„å¦‚æœè¦æ”¾å…¥çš„containerå¤§å°ä¸å¤Ÿ, æœ€åä¸€ä¸ªå‚æ•°è¦ç”¨&lt;code&gt;back_inserter&lt;/code&gt;.  &lt;/p&gt;
&lt;p&gt;ex.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;int a[] = {1,2,3,4,5};  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;vector&amp;lt;int&amp;gt; v(5);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;copy(a, a+5, v.begin());  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;vector&amp;lt;int&amp;gt; v2;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;// if v2 needs to increase capacity, need to use back_inserter  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;copy(v.begin(), v.end(), back_inserter(v2));&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="sort"&gt;sort()&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;void sort( RandomIt first, RandomIt last, [Compare comp]);&lt;/code&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Sorts the elements in the range &lt;code&gt;[first, last)&lt;/code&gt; in ascending order.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;int a[] = {3,1,5,0,8,9};  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;vector&amp;lt;int&amp;gt; v(&amp;amp;a[0], &amp;amp;a[0]+6);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sort(a, a+6);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sort(v.begin(), v.end());&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæƒ³è¦é™åºæ’åˆ—, å¯ä»¥ç›´æ¥reverseä¸€ä¸‹: &lt;code&gt;reverse(v.begin(), v.end());&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;å¦‚æœè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°çš„è¯, å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªcmpå‡½æ•°(å†…å®¹å’Œé‡è½½çš„å°äºè¿ç®—ç¬¦ç›¸åŒ), ç„¶åæŠŠå‡½æ•°åæ”¾åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;bool my_cmp(const pair&amp;lt;int, int&amp;gt; &amp;amp;lhs, const pair&amp;lt;int, int&amp;gt; &amp;amp;rhs) {  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    return (lhs.first &amp;lt; rhs.first) || (lhs.first==rhs.first &amp;amp;&amp;amp; lhs.second &amp;lt; rhs.second);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//...  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sort(vp.begin(), vp.end(), my_cmp);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ–è€…æŠŠå…ƒç´ å°è£…ä¸ºclass/struct, ç„¶åé‡è½½å®ƒçš„å°äºå·&lt;code&gt;&amp;lt;&lt;/code&gt;è¿ç®—ç¬¦:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="n"&gt;MyFooClass&lt;/span&gt; {  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;public&lt;/span&gt; :  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="o"&gt;x&lt;/span&gt;,&lt;span class="n"&gt;y&lt;/span&gt;;      &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;MyFooClass&lt;/span&gt;(&lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="o"&gt;xx&lt;/span&gt;, &lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="n"&gt;yy&lt;/span&gt;){  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="o"&gt;x&lt;/span&gt; = &lt;span class="o"&gt;xx&lt;/span&gt;;  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;y&lt;/span&gt; = &lt;span class="n"&gt;yy&lt;/span&gt;;  &lt;/span&gt;
&lt;span class="code-line"&gt;    }  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;bool&lt;/span&gt; &lt;span class="nb"&gt;operator&lt;/span&gt; &amp;lt; ( &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;MyFooClass&lt;/span&gt; &amp;amp; &lt;span class="n"&gt;other&lt;/span&gt; ) &lt;span class="n"&gt;const&lt;/span&gt; {  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;return&lt;/span&gt; (&lt;span class="o"&gt;x&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="o"&gt;x&lt;/span&gt;) || (&lt;span class="o"&gt;x==&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="o"&gt;x&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="n"&gt;y&lt;/span&gt;) ;  &lt;/span&gt;
&lt;span class="code-line"&gt;    }  &lt;/span&gt;
&lt;span class="code-line"&gt;};&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;MyFooStruct&lt;/span&gt; {  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="o"&gt;x&lt;/span&gt;,&lt;span class="n"&gt;y&lt;/span&gt;;  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;MyFooStruct&lt;/span&gt;(&lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="o"&gt;xx&lt;/span&gt;, &lt;span class="nb"&gt;int&lt;/span&gt; &lt;span class="n"&gt;yy&lt;/span&gt;){  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="o"&gt;x&lt;/span&gt; = &lt;span class="o"&gt;xx&lt;/span&gt;;  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;y&lt;/span&gt; = &lt;span class="n"&gt;yy&lt;/span&gt;;  &lt;/span&gt;
&lt;span class="code-line"&gt;    }  &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;bool&lt;/span&gt; &lt;span class="nb"&gt;operator&lt;/span&gt; &amp;lt; ( &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;MyFooStruct&lt;/span&gt; &amp;amp; &lt;span class="n"&gt;other&lt;/span&gt; ) &lt;span class="n"&gt;const&lt;/span&gt; {  &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;return&lt;/span&gt; (&lt;span class="o"&gt;x&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="o"&gt;x&lt;/span&gt;) || (&lt;span class="o"&gt;x==&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="o"&gt;x&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;other&lt;/span&gt;.&lt;span class="n"&gt;y&lt;/span&gt;) ;  &lt;/span&gt;
&lt;span class="code-line"&gt;    }  &lt;/span&gt;
&lt;span class="code-line"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="vector_1"&gt;vector&lt;/h1&gt;
&lt;h3 id="vector_2"&gt;vector&lt;/h3&gt;
&lt;p&gt;ç›¸å½“äºjavaé‡Œé¢çš„&lt;code&gt;ArrayList&lt;/code&gt;. &lt;br/&gt;
ä¸»è¦æ“ä½œ: &lt;code&gt;push_back()&lt;/code&gt;, &lt;code&gt;pop_back()&lt;/code&gt; (æ‰€ä»¥å¯ä»¥å½“ä½œstackä½¿ç”¨).   &lt;/p&gt;
&lt;p&gt;å¦å¤–iteratoræ“ä½œä¹Ÿå¾ˆå¸¸ç”¨(set, mapç­‰åŒç†):   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;for(vector&amp;lt;int&amp;gt;::iterator it=v1.begin(); it!=v1.end(); it++)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        cout &amp;lt;&amp;lt; *it &amp;lt;&amp;lt; " ";&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="pair"&gt;pair&lt;/h3&gt;
&lt;p&gt;å°±æ˜¯ä¸€ä¸ªfirstä¸€ä¸ªsecond. &lt;br/&gt;
å¦å¤–æœ‰&lt;code&gt;make_pair&lt;/code&gt;å‡½æ•°å¯ä»¥æ„é€ pair.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;pair&amp;lt;string, int&amp;gt; p1("pair1", 1);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;pair&amp;lt;string, int&amp;gt; p2 = make_pair("pair2", 2);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦å¤–ä¸¤ä¸ªå°–æ‹¬å·å†ä¸€èµ·æ—¶ä¸€å®šè¦ä¸­é—´åŠ ç©ºæ ¼, å¦åˆ™å°±æ˜¯ä½æ“ä½œè¿ç®—ç¬¦äº†! &lt;br/&gt;
&lt;code&gt;pair&amp;lt;string, pair&amp;lt;int, double&amp;gt; &amp;gt; p3 = make_pair("pair3", make_pair(3,3.33));&lt;/code&gt; &lt;/p&gt;
&lt;h1 id="queue_1"&gt;queue&lt;/h1&gt;
&lt;p&gt;åŒ…å«æ™®é€šé˜Ÿåˆ—å’Œä¼˜å…ˆé˜Ÿåˆ—(pq)  &lt;/p&gt;
&lt;h3 id="queue_2"&gt;queue&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;bool empty() const;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;reference front();  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void push( const value_type&amp;amp; value );  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void pop();&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="priority_queue"&gt;priority_queue&lt;/h3&gt;
&lt;p&gt;(pqçš„å®ç°ä¹Ÿå¯ä»¥ç”¨&lt;code&gt;&amp;lt;algorithm&amp;gt;&lt;/code&gt;é‡Œçš„&lt;code&gt;make_heap&lt;/code&gt;, &lt;code&gt;pop_heap&lt;/code&gt;, &lt;code&gt;push_heap&lt;/code&gt;ç­‰æ–¹æ³•. priority_queue å…¶å®å°±æ˜¯algorithmé‡Œé¢å‡½æ•°çš„å°è£…...)&lt;br/&gt;
å’Œqueueçš„APIåŒºåˆ«æ˜¯, pqæŸ¥çœ‹é˜Ÿé¦–çš„å‡½æ•°å«&lt;code&gt;top&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;front&lt;/code&gt;.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;bool empty() const;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;const_reference top() const;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void push( const value_type&amp;amp; value );  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void pop();&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨è‡ªå®šä¹‰çš„cmpæ–¹æ³•, å¯ä»¥æŠŠcmpçš„å†…å®¹ä½œä¸ºæ‹¬å·è¿ç®—ç¬¦&lt;code&gt;()&lt;/code&gt;çš„é‡è½½æ”¾å…¥ä¸€ä¸ªstructä½œä¸ºç¬¬ä¸‰ä¸ªç±»å‹å‚æ•°, ç¬¬äºŒä¸ªæ˜¯container, ä¸€èˆ¬ç”¨vectorå³å¯.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;struct MyCmpStruct{  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    bool operator()(const pair&amp;lt;int, int&amp;gt; &amp;amp;lhs, const pair&amp;lt;int, int&amp;gt; &amp;amp;rhs){  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        return   return (lhs.first &amp;lt; rhs.first) || (lhs.first==rhs.first &amp;amp;&amp;amp; lhs.second &amp;lt; rhs.second);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;};  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;priority_queue&amp;lt;pair&amp;lt;int,int&amp;gt;, vector&amp;lt;pair&amp;lt;int,int&amp;gt; &amp;gt;, MyCmpStruct&amp;gt; ppq;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦ä¸€ç§æ–¹æ³•æ˜¯è‡ªå®šä¹‰å…ƒç´ çš„struct/class, ç„¶åé‡è½½å°äº&lt;code&gt;&amp;lt;&lt;/code&gt;è¿ç®—ç¬¦ä¸ºcmp (åŒsort).   &lt;/p&gt;
&lt;h1 id="setmap_1"&gt;set/map&lt;/h1&gt;
&lt;p&gt;C++é‡Œé¢çš„set/mapæ˜¯ç”¨çº¢é»‘æ ‘å®ç°çš„, æ‰€ä»¥keyç±»å‹éœ€è¦æ”¯æŒæ¯”è¾ƒè¿ç®—. &lt;br/&gt;
set/mapä¹Ÿæ”¯æŒiteratoræ“ä½œ(&lt;code&gt;begin()&lt;/code&gt;, &lt;code&gt;end()&lt;/code&gt;), è€Œä¸”ç”±äºæ˜¯BST, é¡ºåºè‡ªç„¶æ˜¯æ’å¥½äº†çš„.   &lt;/p&gt;
&lt;h3 id="set"&gt;set&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;std::pair&amp;lt;iterator,bool&amp;gt; insert( const value_type&amp;amp; value );  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void erase( iterator pos );  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;size_type count( const Key&amp;amp; key ) const;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;iterator find( const Key&amp;amp; key );&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;insert&lt;/code&gt;å’Œ&lt;code&gt;erase&lt;/code&gt;çš„å‚æ•°å¯ä»¥æ˜¯iteratoræˆ–è€…value.   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;count&lt;/code&gt;çš„è¿”å›å€¼ä¸º1æˆ–0  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;find&lt;/code&gt;å¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å›&lt;code&gt;s.end()&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="map"&gt;map&lt;k,v&gt;&lt;/k,v&gt;&lt;/h3&gt;
&lt;p&gt;mapçš„value_typeæ˜¯ä¸€ä¸ª&lt;code&gt;pair&amp;lt;K,V&amp;gt;&lt;/code&gt;, æ‰€ä»¥éå†æ˜¯è¿™æ ·:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;for(map&amp;lt;string,int&amp;gt;::iterator it=m.begin(); it!=m.end(); it++)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        cout &amp;lt;&amp;lt; it-&amp;gt;first &amp;lt;&amp;lt; ":" &amp;lt;&amp;lt; it-&amp;gt;second &amp;lt;&amp;lt; ", ";&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;insertion: ç”¨&lt;code&gt;[]&lt;/code&gt;æˆ–è€…&lt;code&gt;insert&lt;/code&gt;å‡½æ•°  &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;map&amp;lt;string,int&amp;gt; m;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;m["aa"] = 3;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;m.insert( make_pair("dd", 6) );&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„&lt;code&gt;insert&lt;/code&gt;å‡½æ•°å¦‚æœkeyå·²ç»å­˜åœ¨çš„è¯valueä¸ä¼šæ”¹å˜! ä½†æ˜¯ç”¨&lt;code&gt;[]&lt;/code&gt;çš„è¯åˆ™å¯ä»¥.   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;erase/find/count&lt;/code&gt;: åŒset.   &lt;/li&gt;
&lt;/ul&gt;</summary><category term="C++"></category></entry><entry><title>Priority Queue/Heap (ä¼˜å…ˆé˜Ÿåˆ—/å †)å°ç»“</title><link href="https://x-wei.github.io/tech/heap-summary.html" rel="alternate"></link><published>2015-12-09T00:00:00+01:00</published><updated>2015-12-09T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-12-09:tech/heap-summary.html</id><summary type="html">&lt;p&gt;ä»Šå¤©ç®€å•ä»‹ç»ä¸€ä¸‹ä¼˜å…ˆé˜Ÿåˆ—(priority queue, ä»¥ä¸‹ç®€ç§°PQ)è¿™ä¸ªæ•°æ®ç»“æ„çš„å®ç°.  &lt;/p&gt;
&lt;p&gt;PQåˆå«"å †"(heap), ä½†æ˜¯å¯èƒ½ä¼˜å…ˆé˜Ÿåˆ—è¿™ä¸ªåå­—æ›´å®¹æ˜“è®°å¿†å®ƒçš„ç”¨é€”: pqæ˜¯ä¸€ç§é˜Ÿåˆ—, ä¸è¿‡ä¸æ˜¯å…ˆè¿›å…ˆå‡º(FIFO), è€Œæ˜¯æ¯æ¬¡å‡ºé˜Ÿçš„å…ƒç´ æ°¸è¿œæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„.   &lt;/p&gt;
&lt;h1 id="logical-structure-of-pq"&gt;logical structure of PQ&lt;/h1&gt;
&lt;p&gt;ä¸ªäººæ„Ÿè§‰"å †"è¿™ä¸ªåå­—å¤§æ¦‚æºäºPQçš„(é€»è¾‘ä¸Šçš„)å½¢çŠ¶å§: PQæ˜¯ä¸€ç§æ ‘(tree), å‡†ç¡®çš„è¯´, æ˜¯ä¸€ç§äºŒå‰æ ‘(binary tree), è¯´å¾—å†å‡†ç¡®ä¸€ç‚¹, å®ƒæ˜¯ä¸€ç§&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘(complete binary tree)&lt;/strong&gt;: æ²¡é”™, PQæ˜¯ä¸€ç§æ»¡è¶³æŸäº›æ¡ä»¶çš„å®Œå…¨äºŒå‰æ ‘.   &lt;/p&gt;
&lt;p&gt;æ‰€è°“çš„"å®Œå…¨äºŒå‰æ ‘", è¦æ»¡è¶³:  &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;é™¤äº†æœ€åä¸€å±‚, æ‰€æœ‰å±‚éƒ½æ’æ»¡(æ²¡æœ‰éç©ºèŠ‚ç‚¹)  &lt;/li&gt;
&lt;li&gt;æœ€åä¸€å±‚çš„æ‰€æœ‰éç©ºèŠ‚ç‚¹éƒ½æ’åœ¨å·¦è¾¹  &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€å¼ å›¾å¯ä»¥ç›´è§‚è¯´æ˜, å®Œå…¨äºŒå‰æ ‘å…¶å®å°±æ˜¯é•¿å¾—åƒè¿™æ ·:&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/heap-summary/pasted_image.png"/&gt; &lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘èƒ½è¢«æˆä¸ºPQçš„è¯, è¦æ»¡è¶³çš„æ¡ä»¶å°±æ˜¯:   &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹, å®ƒçš„ä¼˜å…ˆçº§éƒ½å¤§äºå·¦å³å­èŠ‚ç‚¹çš„ä¼˜å…ˆçº§.   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯”å¦‚ä¸‹å›¾(åœ†åœˆé‡Œæ•°å­—ä»£è¡¨ä¼˜å…ˆçº§):&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/heap-summary/pasted_image001.png"/&gt; &lt;/p&gt;
&lt;p&gt;è¿™æ ·çœ‹ä¸Šå»çš„è¯, ç¡®å®åƒæ˜¯"ä¸€å †"ä¸œè¥¿çš„å½¢çŠ¶(ç çš„è¿˜æŒºæ•´é½çš„), è€Œä¸”æˆ‘ä»¬çŸ¥é“åœ¨è¿™ä¸€å †èŠ‚ç‚¹é‡Œ, ä¼˜å…ˆçº§æœ€é«˜çš„å°±æ˜¯æœ€é¡¶ä¸Šçš„é‚£ä¸ªèŠ‚ç‚¹äº†.   &lt;/p&gt;
&lt;p&gt;æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªæ¯”å–»: ä¸€ä¸ªheapå°±åƒæ˜¯ä¸€ä¸ª&lt;em&gt;å…¬å¸çš„hirachyç»“æ„:&lt;/em&gt; å­èŠ‚ç‚¹å°±æ˜¯ä¸‹å±, çˆ¶èŠ‚ç‚¹å°±æ˜¯ä¸Šå¸, æ¯ä¸€ä¸ªä¸Šå¸çš„èƒ½åŠ›éƒ½æ¯”ä»–çš„ä¸‹å±å¼º(ä¼˜å…ˆçº§æ¯”å­èŠ‚ç‚¹æ). èƒ½åŠ›æœ€å¼º(ä¼˜å…ˆçº§æœ€é«˜)çš„äººåœ¨æœ€ä¸Šé¢.  &lt;/p&gt;
&lt;h1 id="array-representation-of-pq"&gt;array representation of PQ&lt;/h1&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘, æ²¡æœ‰å¿…è¦ç”¨å¸¸è§„çš„æ ‘ç»“æ„(ä½¿ç”¨æŒ‡é’ˆ)æ¥è¡¨ç¤º, å› ä¸ºå¦‚æœä»ä¸Šåˆ°ä¸‹èµ°è¿‡æ¯å±‚(æ¯å±‚å†…ä»å·¦åˆ°å³)ç»™æ‰€æœ‰èŠ‚ç‚¹ç¼–å·(æ ¹èŠ‚ç‚¹çš„ç¼–å·ä¸º1)çš„è¯, å®Œå…¨äºŒå‰æ ‘æœ‰ä»¥ä¸‹æ€§è´¨:   &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;father(i) = i/2&lt;/code&gt; å…¶ä¸­father(i)è¡¨ç¤ºç¼–å·ä¸ºiçš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡   &lt;/li&gt;
&lt;li&gt;&lt;code&gt;leftchild(i) = i*2, rightchild(i) = i*2+1&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ—¢ç„¶ç”¨æ•°ç»„è¡¨ç¤ºçš„æ—¶å€™, ä»»ä½•èŠ‚ç‚¹çš„çˆ¶äº²èŠ‚ç‚¹å’Œå·¦å³å­èŠ‚ç‚¹éƒ½å¯ä»¥è½»æ¾å¾—åˆ°, å°±æ²¡æœ‰å¿…è¦ä½¿ç”¨æŒ‡é’ˆäº†. æ‰€ä»¥åªéœ€è¦ä¸€ä¸ªæ•°ç»„å³å¯è¡¨ç¤ºPQ ! æ¯”å¦‚ä¸€ä¸ªintçš„PQåœ¨å†…éƒ¨åªè¦è¡¨ç¤ºä¸º: &lt;code&gt;int pq[]&lt;/code&gt;.   &lt;/p&gt;
&lt;p&gt;å¦å¤–æ³¨æ„, ä¸Šé¢çš„å…¬å¼æˆç«‹çš„å‰ææ˜¯æ•°ç»„ä¸‹æ ‡ä»1å¼€å§‹, å®ç°çš„æ—¶å€™æˆ‘ä»¬æŠŠæ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ ç©ºå‡ºæ¥å³å¯.   &lt;/p&gt;
&lt;p&gt;ä¸éš¾çœ‹å‡ºä¸€ä¸ªPQæœ‰ä»¥ä¸‹æ€§è´¨:   &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;é«˜åº¦ä¸ºlgN  &lt;/li&gt;
&lt;li&gt;ç¬¬kå±‚æœ‰ 2^k ä¸ªèŠ‚ç‚¹ (rootæ˜¯ç¬¬0å±‚)  &lt;/li&gt;
&lt;li&gt;æœ€åä¸€å±‚çš„èŠ‚ç‚¹å¯¹åº”çš„ä¸‹æ ‡&amp;gt;=N/2  &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1 id="pq-implementation"&gt;PQ implementation&lt;/h1&gt;
&lt;p&gt;å…ˆå†™ä¸€ä¸‹ä»£ç æ¡†æ¶:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PQ&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxPQ&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;integers&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MAX_CAPACITY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;need&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MAX_CAPACITY&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;last&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rightmost&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;last&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;level&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PQ&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;MAX_CAPACITY+1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;isEmpty&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;top&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;get&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;top&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;assert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;!&lt;/span&gt;&lt;span class="n"&gt;isEmpty&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PQ&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--&amp;gt; stay tuned  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;get&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;top&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--&amp;gt; stay tuned  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ€å…³é”®çš„ä¸¤ä¸ªå‡½æ•°æ˜¯&lt;code&gt;add&lt;/code&gt;å’Œ&lt;code&gt;poll&lt;/code&gt;, å®ç°è¿™ä¸¤ä¸ªæ“ä½œçš„å…³é”®åœ¨äºä¸¤ä¸ªåŸºæœ¬æ“ä½œ: &lt;code&gt;siftup()&lt;/code&gt;å’Œ&lt;code&gt;siftdown()&lt;/code&gt;. åœ¨PQçš„æ€§è´¨è¢«æ‰°ä¹±çš„æ—¶å€™, ä½¿ç”¨è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥ä½¿PQæ¢å¤æ€§è´¨(æ‰€è°“çš„"è°ƒæ•´").   &lt;/p&gt;
&lt;h3 id="siftup"&gt;siftup&lt;/h3&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªæ–°å…ƒç´ åˆ°æ¥, é¦–å…ˆå°†å…¶æ”¾åœ¨æœ€å(æœ€åº•å±‚æœ€å³è¾¹çš„èŠ‚ç‚¹), å¦‚æœæ–°æ¥èŠ‚ç‚¹çš„ä¼˜å…ˆçº§æ¯”è¾ƒé«˜, å¯ä»¥ç”¨siftupå°†å…¶æå‡åˆ°ä¸€ä¸ªåˆé€‚çš„å±‚æ¬¡. ç”¨å…¬å¸ç»“æ„æ¥ç±»æ¯”å°±æ˜¯æ–°å…¥èŒçš„å‘˜å·¥ç”±äºèƒ½åŠ›å¼ºè¢«æé«˜åˆ°äº†é«˜å±‚, è€Œæå‡çš„åŠæ³•å°±æ˜¯: å’Œä¸Šå¸äº¤æ¢å²—ä½(ä¹Ÿå°±æ˜¯å’Œçˆ¶èŠ‚ç‚¹äº¤æ¢ä½ç½®).   &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸ªæ“ä½œåªè¦ä¸æ–­æŠŠè¯¥å…ƒç´ ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢, ç›´åˆ°é‡åˆ°ä¸€ä¸ªä¼˜å…ˆçº§å¤§äºè¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æˆ–è€…å·²ç»åˆ°äº†æœ€é«˜å¤„åœæ­¢. ä»£ç å¾ˆçŸ­:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;siftup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;newly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i/2&lt;/span&gt;&lt;span class="o"&gt;]&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;/=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="siftdown"&gt;siftdown&lt;/h3&gt;
&lt;p&gt;siftdownçš„åŠŸèƒ½å’Œsiftupç›¸å: å¦‚æœåœ¨æœ€é«˜å¤„æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„å…ƒç´ , éœ€è¦å°†å…¶"ä¸‹æ”¾". æ–¹æ³•å°±æ˜¯æŠŠå®ƒå’Œå­èŠ‚ç‚¹é‡Œé¢ä¼˜å…ˆçº§è¾ƒé«˜çš„è¿›è¡Œäº¤æ¢.   &lt;/p&gt;
&lt;p&gt;ä»£ç ä¹Ÿä¸é•¿, ä¸è¿‡ç¬¬ä¸€æ¬¡å†™å¯èƒ½ä¸å¤ªç®€æ´:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;siftdown&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;isEmpty&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nothing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sift&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;siftdown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;last&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;level&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;max&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;element&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i*2&lt;/span&gt;&lt;span class="o"&gt;]&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;max&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;left&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;child&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;max&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i*2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="k"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i*2+1&lt;/span&gt;&lt;span class="o"&gt;]&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;max&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;right&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;max&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i*2+1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bigger&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;than&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;both&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;child&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pq&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="implementation-of-add-and-poll_1"&gt;implementation of add and poll&lt;/h2&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸¤ä¸ªsiftçš„åŸºæœ¬æ“ä½œ, addå’Œpollçš„æ“ä½œå°±ç®€å•äº†. &lt;br/&gt;
&lt;strong&gt;add&lt;/strong&gt;&lt;br/&gt;
åŠ å…¥æ–°å…ƒç´ çš„æ—¶å€™, åªè¦å…ˆæŠŠå®ƒæ”¾åœ¨æœ€åé¢, ç„¶åè°ƒç”¨siftup()å‡½æ•°è°ƒæ•´ä¸€ä¸‹pqå³å¯:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void add(int n){ // insert element to PQ  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    assert size+1&amp;lt;MAX_CAPACITY;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    pq[++size] = n;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    siftup();  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;poll&lt;/strong&gt;&lt;br/&gt;
å †é¡¶å…ƒç´ è¢«æ‹¿èµ°ä»¥å, æˆ‘ä»¬å¯ä»¥å…ˆæŠŠæœ€åä¸€ä¸ªå…ƒç´ æ”¾åœ¨é¡¶éƒ¨, ç„¶åè°ƒç”¨siftdownè¿›è¡Œè°ƒæ•´:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public int poll(){ // get and remove top element  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    assert !isEmpty();  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int top = pq[1];  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    pq[1] = pq[size--];// put last element on the top  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    siftdown();  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    return top;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="pq-application_1"&gt;PQ application&lt;/h1&gt;
&lt;p&gt;æ¥ä¸‹æ¥è®²ä¸€ä¸‹PQçš„åº”ç”¨.   &lt;/p&gt;
&lt;h3 id="heapsort"&gt;heapsort&lt;/h3&gt;
&lt;p&gt;ç”±äºæ¯æ¬¡å‡ºé˜Ÿçš„éƒ½æ˜¯åœ¨å‰©ä¸‹å…ƒç´ é‡Œé¢æœ€å¤§(å°)çš„, æ‰€ä»¥åªè¦æŠŠæ•°ç»„çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªpqé‡Œ, ç„¶åä¾æ¬¡pollå‡ºæ¥, å¾—åˆ°çš„åºåˆ—å°±æ˜¯æ’åºå¥½äº†çš„.   &lt;/p&gt;
&lt;p&gt;ä¸ç®¡æ˜¯æ’å…¥è¿˜æ˜¯åˆ é™¤æ“ä½œ, æ¯æ¬¡è°ƒæ•´çš„å¤æ‚åº¦ä¸ºlog(n) (å †çš„é«˜åº¦), æ‰€ä»¥ç®—æ³•å¤æ‚åº¦ä¸º O(NlgN). å®é™…ä½¿ç”¨çš„æ—¶å€™æ•ˆç‡æ¯”å¿«é€Ÿæ’åº/åˆå¹¶æ’åºç•¥å·®, ä»¥åä¸“é—¨å†™ä¸€ç¯‡å…³äºæ’åºç®—æ³•çš„æ–‡ç« æ—¶å†èŠ.   &lt;/p&gt;
&lt;h3 id="heapify"&gt;heapify&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆå‰é¢çš„siftdownå‡½æ•°å¾ˆæ˜æ˜¾å¯ä»¥ä¿®æ”¹ä¸€ä¸‹åŠ ä¸Šä¸€ä¸ªå‚æ•°å˜ä¸º&lt;code&gt;siftdown(int i)&lt;/code&gt;(iä»£è¡¨è¦å‘ä¸‹è°ƒæ•´çš„å…ƒç´ çš„ä¸‹æ ‡).   &lt;/p&gt;
&lt;p&gt;åœ¨heapsorté‡Œç¬¬ä¸€æ­¥æ˜¯è¦å»ºç«‹ä¸€ä¸ªPQ. æœ€naiveçš„å»ºå †æ“ä½œå°±æ˜¯æ–°å»ºä¸€ä¸ªç©ºçš„heapç„¶åä¸æ–­å‘é‡Œé¢åŠ å…¥æ•°ç»„&lt;code&gt;a&lt;/code&gt;é‡Œçš„å…ƒç´ (ç©ºé—´å¤æ‚åº¦N, æ—¶é—´å¤æ‚åº¦NlgN). å…¶å®è¿™ä¸ªæ“ä½œå¯ä»¥åšçš„æ›´å¥½: æˆ‘ä»¬&lt;em&gt;å…ˆç›´æ¥æŠŠæ•°ç»„aå½“ä½œpq[]æ•°ç»„&lt;/em&gt;, ç°åœ¨æ˜¾ç„¶å®ƒä¸æ»¡è¶³PQæ€§è´¨, åªéœ€è¦&lt;em&gt;å¤šæ¬¡ä½¿ç”¨siftdown&lt;/em&gt;è¿›è¡Œè°ƒæ•´å³å¯.   &lt;/p&gt;
&lt;p&gt;å‡è®¾ä¸€å…±æœ‰h(=lgN)å±‚, ç”±äºæœ€åä¸€å±‚çš„èŠ‚ç‚¹ä¸å¿…è°ƒç”¨siftdown, æˆ‘ä»¬åªè¦ä»å€’æ•°ç¬¬äºŒå±‚å¼€å§‹è°ƒç”¨siftdownå³å¯, ç»“åˆå‰é¢æåˆ°çš„pqçš„æ€§è´¨(N/2ä»¥åçš„èŠ‚ç‚¹éƒ½åœ¨æœ€åä¸€å±‚), å†™æ³•å¾ˆç®€å•(ç®€å•èµ·è§è®¤ä¸ºaä¹Ÿæ˜¯æŠŠç¬¬0ä¸ªå…ƒç´ ç©ºå‡ºæ¥å¥½äº†):   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public static void heapify(int[] a){  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int N = a.length;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(int i=N/2;i&amp;lt;=1;i--){  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        siftdown(a, i);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)çš„ ! ä¸ºä»€ä¹ˆå‘¢?&lt;br/&gt;
â†’ ç¬¬kå±‚èŠ‚ç‚¹æœ‰2^kä¸ªèŠ‚ç‚¹, è¿™ä¸€å±‚çš„èŠ‚ç‚¹å‘ä¸‹è°ƒæ•´æœ€å¤šä¼šè¿›è¡Œh-kæ­¥, æ‰€ä»¥è®¡ç®—é‡æ˜¯ä¸€ä¸ªæ±‚å’Œè¡¨è¾¾å¼: &lt;br/&gt;
&lt;code&gt;Sigma( 2^k * (h-k) ) for k=0,...,h-1&lt;/code&gt;&lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/heap-summary/pasted_image002.png"/&gt;&lt;br/&gt;
(å…·ä½“è§ &lt;a href="http://algs4.cs.princeton.edu/24pq/"&gt;http://algs4.cs.princeton.edu/24pq/&lt;/a&gt; é‡Œé¢Q20çš„ç­”æ¡ˆ)  &lt;/p&gt;
&lt;h3 id="top-k-elements-of-a-stream"&gt;top K elements of a stream&lt;/h3&gt;
&lt;p&gt;é—®é¢˜æè¿°: ä¸€ç³»åˆ—æ•°å­—ä¸€ä¸ªä¸€ä¸ªåˆ°è¾¾, å½“æ‰€æœ‰æ•°(å‡è®¾æœ‰Nä¸ª)éƒ½åˆ°è¾¾ä»¥å, æ±‚æœ€å¤§çš„Kä¸ªæ•°å­—.   &lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„PQåº”ç”¨ â‡’ ä½¿ç”¨ä¸€ä¸ªæœ€å°å †(minPQ)å³å¯è¾¾åˆ°è¿™ä¸ªæ•ˆæœ: æ–°å»ºä¸€ä¸ªminPQ(æœ€å°çš„æ•°å­—åœ¨æœ€ä¸Šé¢, æ¯æ¬¡å½“ä¸€ä¸ªæ•°å­—nåˆ°è¾¾æ—¶:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;if minPQ.size&amp;lt;K â†’ &lt;code&gt;minPQ.add(n)&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;if minPQ.size==K â†’ æ¯”è¾ƒnå’ŒminPQ.top():   &lt;ul&gt;
&lt;li&gt;if n&amp;gt;minPQ.top(): &lt;code&gt;minPQ.poll(); minPQ.add(n)&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;else pass...  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="median-of-a-stream"&gt;median of a stream&lt;/h3&gt;
&lt;p&gt;é—®é¢˜æè¿°: ä¸€ç³»åˆ—æ•°å­—ä¸€ä¸ªä¸€ä¸ªåˆ°è¾¾, æ±‚ä»–ä»¬çš„ä¸­ä½æ•°(median)?&lt;br/&gt;
è¿™ä¸ªçš„è§£æ³•æ˜¯ä½¿ç”¨&lt;em&gt;ä¸¤ä¸ªPQ&lt;/em&gt;, ä¸€ä¸ªæœ€å¤§å †&lt;code&gt;maxpq&lt;/code&gt;ä¸€ä¸ªæœ€å°å †&lt;code&gt;minpq&lt;/code&gt;, ç„¶å&lt;em&gt;maxpqé‡Œå­˜æ”¾è¾ƒ&lt;strong&gt;&lt;em&gt;å°&lt;/em&gt;&lt;/strong&gt;çš„ä¸€åŠæ•°å­—, minpqé‡Œå­˜æ”¾è¾ƒ&lt;strong&gt;&lt;em&gt;å¤§&lt;/em&gt;&lt;/strong&gt;çš„ä¸€åŠæ•°å­—: &lt;/em&gt;&lt;code&gt;maxpq.top()&amp;lt;=minpq.top()&lt;/code&gt;. &lt;br/&gt;
å¹¶ä¸”æˆ‘ä»¬è¦æ±‚: &lt;code&gt;minpq.size &amp;lt;= maxpq.size &amp;lt;= minpq.size+1&lt;/code&gt;&lt;br/&gt;
â‡’ è¿™æ ·ä¸­ä½æ•°æˆ–è€…æ˜¯maxpq.top(), æˆ–è€…æ˜¯ä¸¤ä¸ªtopçš„å¹³å‡å€¼äº†~  &lt;/p&gt;
&lt;p&gt;åˆå§‹æ—¶ä¸¤ä¸ªpqéƒ½æ˜¯ç©ºçš„, æ¯æ¬¡æ•°å­—nåˆ°æ¥æ—¶:&lt;br/&gt;
&lt;em&gt; å…ˆæŠŠnæ”¾è¿›maxpqé‡Œ&lt;br/&gt;
&lt;/em&gt; å¦‚æœ&lt;code&gt;maxpq.size&amp;gt;minpq.size+1&lt;/code&gt;çš„è¯: &lt;code&gt;minpq.add(maxpq.poll())&lt;/code&gt; &lt;/p&gt;
&lt;h1 id="more-about-heap_1"&gt;more about heap&lt;/h1&gt;
&lt;h3 id="k-way-heap"&gt;k-way heap&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»çš„PQå…¶å®æ˜¯binary heap, å³è¿™æ£µæ ‘æ˜¯ä¸€ä¸ªå®Œå…¨&lt;strong&gt;äºŒ&lt;/strong&gt;å‰æ ‘, ä½†æ˜¯æˆ‘ä»¬å®Œå…¨å¯ä»¥åšæˆå®Œå…¨&lt;strong&gt;K&lt;/strong&gt;å‰æ ‘, å°±æ˜¯æ‰€è°“çš„K-way heapäº†.  &lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„å¥½å¤„æ˜¯heapçš„é«˜åº¦ä¼šå˜å¾—æ›´å°(ä»log2(N)å˜ä¸ºlogK(N)), ä¸è¿‡ç”±äºæ¯ä¸ªåˆ†å‰å˜æˆäº†Kä¸ª, æ‰€ä»¥siftdownæ¯æ¬¡å¾ªç¯çš„æ“ä½œå¤æ‚åº¦ä¹Ÿä¼šå¢åŠ (ä»2å˜ä¸ºK).   &lt;/p&gt;
&lt;h3 id="more-flexible-heap"&gt;more "flexible" heap&lt;/h3&gt;
&lt;p&gt;åœ¨æŸäº›åº”ç”¨ä¸­(æ¯”å¦‚Dijkstraç®—æ³•), æˆ‘ä»¬å¸Œæœ›åœ¨æ’å…¥åä¿®æ”¹æŸä¸ªå…ƒç´ çš„ä¼˜å…ˆçº§, è¿™æ—¶å€™éœ€è¦å¯¹è¿™ä¸ªæ ‡å‡†çš„heapåšä¸€äº›ä¿®æ”¹, éœ€è¦ç”¨ä¸€ä¸ªæ•°ç»„æŠŠå…ƒç´ çš„"é€»è¾‘ç¼–å·"å’Œåœ¨pqæ•°ç»„é‡Œçš„"å®é™…ç¼–å·"ç›¸äº’è½¬æ¢.   &lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¸ªä¼šæ¯”è¾ƒsubtle(å…¶å®æˆ‘å·²ç»è®°ä¸èµ·æ¥äº†...), è§: &lt;a href="http://x-wei.github.io/algoII_week2_2.html"&gt;http://x-wei.github.io/algoII_week2_2.html&lt;/a&gt; (IndexedPQéƒ¨åˆ†)&lt;/p&gt;</summary><category term="algorithm"></category></entry><entry><title>quick sort and more: å¿«é€Ÿæ’åºç®—æ³•æ€»ç»“</title><link href="https://x-wei.github.io/tech/quick-sort-and-more.html" rel="alternate"></link><published>2015-12-07T00:00:00+01:00</published><updated>2015-12-07T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-12-07:tech/quick-sort-and-more.html</id><summary type="html">&lt;p&gt;ä»Šå¤©æ€»ç»“ä¸€ä¸‹éå¸¸æœ‰ç”¨çš„å¿«é€Ÿæ’åº(qsort)ç®—æ³•, ä»¥åŠç”±æ­¤è¡ç”Ÿçš„ä¸€äº›å…¶ä»–ç›¸å…³ç®—æ³•(Knuth shuffle, quick select, 3-way partition).   &lt;/p&gt;
&lt;p&gt;å¿«é€Ÿæ’åºçš„ç®—æ³•å¯ä»¥ç”¨ä¸‰å¥è¯æè¿°:&lt;br/&gt;
&lt;strong&gt;[Algo]&lt;/strong&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©åŸºå‡†é¡¹(pivot element, ä¸€èˆ¬å–ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºpivot)  &lt;/li&gt;
&lt;li&gt;æŠŠæ•°ç»„é‡Œæ‰€æœ‰å°äºpivotçš„ç§»åŠ¨åˆ°pivotå·¦è¾¹, å¤§äºpivotçš„ç§»åŠ¨åˆ°å³è¾¹ â‡’ æ­¤æ—¶pivotå·²ç»ä½äºæœ€ç»ˆæ’åºæ—¶çš„æ­£ç¡®ä½ç½®  &lt;/li&gt;
&lt;li&gt;å¯¹pivotå·¦å³ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«é€’å½’è¿›è¡Œå¿«é€Ÿæ’åº  &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±ä»¥ä¸Šæè¿°å¯è§, qsortæ˜¯ä¸€ä¸ªé€’å½’ç®—æ³•, æˆ‘ä»¬å¯ä»¥æŠŠå®ƒçš„å‡½æ•°å£°æ˜å†™æˆ: &lt;code&gt;void qsort(int[] a, int lo, int hi)&lt;/code&gt;, è¡¨ç¤ºæ’åºa[lo, hi]ä¹‹é—´(é—­åŒºé—´)çš„æ‰€æœ‰å…ƒç´ .   &lt;/p&gt;
&lt;h2 id="quick-partition"&gt;quick partition&lt;/h2&gt;
&lt;p&gt;ç”±ä¸Šé¢æè¿°å¯ä»¥è§, qsortæœ€å…³é”®çš„æ˜¯ç¬¬äºŒæ­¥: æŠŠæ•°ç»„å…ƒç´ ä»¥pivotåˆ†ä¸ºä¸¤éƒ¨åˆ†. è¿™ä¸ªæ“ä½œå°±æ˜¯quick partition.   &lt;/p&gt;
&lt;p&gt;å‡½æ•°å£°æ˜ä¸º: &lt;code&gt;int partition(int[] a, int lo, int hi)&lt;/code&gt;, è¯¥å‡½æ•°è¿”å›pivot(å³subarrayçš„ç¬¬ä¸€ä¸ªå…ƒç´ &lt;code&gt;a[lo]&lt;/code&gt;)æ‰€åœ¨çš„ä½ç½®.   &lt;/p&gt;
&lt;p&gt;å¦‚æœå…è®¸æ–°å»ºä¸€ä¸ªä¸´æ—¶æ•°ç»„çš„è¯, é‚£ä¹ˆè¿™ä¸ªå°±ä¸æ˜¯ä»€ä¹ˆé—®é¢˜, ä½†æ˜¯ä¸ºäº†èŠ‚çº¦ç©ºé—´å ç”¨, ç°åœ¨éœ€è¦ç›´æ¥ä¿®æ”¹(in-place)ä½¿å¾—a[lo] åˆ°, è€Œä¸”å¸Œæœ›å¯ä»¥ç”¨å°½é‡å°‘çš„äº¤æ¢(&lt;code&gt;swap(int[]a, int i, int j)&lt;/code&gt;)æ“ä½œ, å°±ä¸æ˜¯å¾ˆevidentäº†.   &lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°çš„å†™æ³•æ˜¯ç”¨ä¸¤ä¸ªæŒ‡é’ˆiå’Œjåˆ†åˆ«ä»ä¸¤ç«¯å‘ä¸­é—´èµ°, å¦‚æœä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ä¸€ä¸ªå°äºpivotä¸€ä¸ªå¤§äºpivoté‚£ä¹ˆå°±è¿›è¡Œäº¤æ¢, å½“ä¸¤ä¸ªæŒ‡é’ˆç¢°é¢çš„æ—¶å€™ç»“æŸ(æœ€åæŠŠpivotå’ŒæŒ‡é’ˆå…ƒç´ äº¤æ¢). è¯·çœ‹ä¸‹é¢è¿™ä¸ªèŒèŒçš„å›¾(å›¾ç‰‡æ¥è‡ª&amp;lt;&amp;lt;å•Šå“ˆ!ç®—æ³•&amp;gt;&amp;gt;): &lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/quick-sort-and-more/pasted_image003.png"/&gt;&lt;br/&gt;
é€‰å–ç¬¬ä¸€ä¸ªå…ƒç´ (6)ä¸ºpivot, ç„¶åjå‘å·¦èµ°ç›´åˆ°é‡åˆ°ä¸€ä¸ªå°äºpivot(6)çš„æ•°åœæ­¢, iå‘å³èµ°ç›´åˆ°é‡åˆ°ä¸€ä¸ªå¤§äºpivotçš„æ•°åœæ­¢(&lt;em&gt;æ³¨æ„è¦è®©jå…ˆç§»åŠ¨&lt;/em&gt;), æ­¤æ—¶äºŒè€…äº¤æ¢: &lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/quick-sort-and-more/pasted_image004.png"/&gt;&lt;br/&gt;
åªè¦é‡å¤è¿™ä¸ªè¿‡ç¨‹, ç›´åˆ°i&amp;gt;=jä¸ºæ­¢, æ­¤æ—¶åªè¦æœ€åæŠŠpivotå’Œj(&lt;em&gt;æ³¨æ„æ˜¯jè€Œä¸æ˜¯i&lt;/em&gt;)æŒ‡å‘çš„å…ƒç´ äº¤æ¢å³å¯: &lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/quick-sort-and-more/pasted_image005.png"/&gt;&lt;br/&gt;
æ‰€ä»¥pivotçš„ä½ç½®å°±æ˜¯j, å‡½æ•°è¿”å›jå³å¯.    &lt;/p&gt;
&lt;p&gt;javaå®ç°:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&amp;gt;=&lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="c1"&gt;--);// move j to a point where a[j]&amp;lt;pivot  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&amp;lt;=&lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;point&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;meets&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="c1"&gt;--);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡Œæœ‰å‡ ç‚¹è¦æ³¨æ„çš„:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®©jå…ˆç§»åŠ¨  &lt;/li&gt;
&lt;li&gt;æœ€åpivotè¦å’Œjäº¤æ¢è€Œä¸æ˜¯å’Œiäº¤æ¢: å› ä¸ºæœ€åæ”¾åœ¨æœ€å·¦è¾¹çš„åº”è¯¥æ˜¯ä¸€ä¸ªå°äºpivotçš„æ•°å˜›  &lt;/li&gt;
&lt;li&gt;ç§»åŠ¨çš„æ—¶å€™åˆ«å¿˜äº†éœ€è¦åŠ æ•°ç»„ä¸‹æ ‡çš„è¾¹ç•Œæ£€æŸ¥(&lt;code&gt;i&amp;lt;=hi&lt;/code&gt;, &lt;code&gt;j&amp;gt;=lo&lt;/code&gt;)  &lt;/li&gt;
&lt;li&gt;partition()çš„å¤æ‚åº¦æ˜¯çº¿æ€§çš„&lt;strong&gt;O(n)&lt;/strong&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="knuth-shuffle"&gt;Knuth shuffle&lt;/h2&gt;
&lt;p&gt;qsortä¹‹æ‰€ä»¥å¿«, æ˜¯å› ä¸ºæ¯æ¬¡éƒ½èƒ½å¤ŸæŒ‰ç…§pivotåˆ†ä¸ºå¤§è‡´åŒæ ·é•¿åº¦çš„ä¸¤ä¸ªå­æ•°ç»„(æ‰€ä»¥æ¯æ¬¡å­é—®é¢˜çš„è§„æ¨¡é™¤ä»¥äºŒ), æ‰€ä»¥å¤æ‚åº¦ä¸º&lt;strong&gt;O(NlogN)&lt;/strong&gt;. æœ€åæƒ…å†µä¸‹, å¦‚æœæ¯æ¬¡ä¸¤ä¸ªå­æ•°ç»„ä¸­å¯èƒ½æœ‰ä¸€ä¸ªé•¿åº¦ä¸º0, é‚£ä¹ˆæ¯æ¬¡å­é—®é¢˜çš„è§„æ¨¡åªå‡å°‘äº†1, æ‰€ä»¥å¤æ‚åº¦å˜æˆäº†quadratic &lt;strong&gt;O(N2)&lt;/strong&gt;.  &lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢è¿™ç§æœ€åæƒ…å†µçš„å‡ºç°, å¯ä»¥åœ¨ä¸€åˆ‡å¼€å§‹ä¹‹å‰æŠŠæ•°ç»„æ‰“ä¹±é¡ºåº, æ‰€ä»¥è¿™ä¸€èŠ‚è®¨è®ºå¿«é€Ÿshuffleçš„ç®—æ³•. æœ€ç»å…¸çš„å°±æ˜¯Knuthçš„shuffleç®—æ³•äº†, ç®—æ³•å¾ˆç®€ç­”, æè¿°ä¸º: for(k=1 to n): æ¯æ¬¡æŠŠç¬¬kä¸ªå…ƒç´ å’Œå‰kä¸ªå…ƒç´ ä¸­çš„éšæœºä¸€ä¸ªå…ƒç´ äº¤æ¢.  &lt;/p&gt;
&lt;p&gt;ä»£ç åªæœ‰ä¸¤è¡Œ:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;void shuffle(int[] a){  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(int K=0; K&amp;lt;a.length; K++)  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        swap(K, Random.nextInt(K+1));  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…³äºç®—æ³•çš„æ­£ç¡®æ€§, å…¶å®åªè¦è¯æ˜"å…ƒç´ iåœ¨shuffleåæœ€ç»ˆä½äºä½ç½®i"çš„æ¦‚ç‡ä¸º1/Nå³å¯, ä¸éš¾è¯æ˜.   &lt;/p&gt;
&lt;h2 id="quick-sort"&gt;quick sort&lt;/h2&gt;
&lt;p&gt;å¥½äº† æœ‰äº†ä»¥ä¸Šä¸¤ä¸ªè¾…åŠ©å‡½æ•°å°±å¯ä»¥å†™qsortå‡½æ•°äº†:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;void qsort(int[] a, int lo, int hi){//recursive helper function  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    if(lo&amp;gt;=hi) return;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int p = partition(a, lo, hi);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    qsort(a, lo, p-1);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    qsort(a, hi, p+1);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;void qsort(int[] a){  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    shuffle(a);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    qsort(a, 0, a.length-1);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…¶å®qsortçš„ä¸»ä½“å°±æ˜¯é‚£ä¸ªpartitionå‡½æ•°, å•ç‹¬æŠŠpartitionåˆ—å‡ºæ¥æ˜¯å› ä¸ºå®ƒä¸æ­¢å¯ä»¥ç”¨åœ¨æ’åº, è¿˜å¯ä»¥ç”¨æ¥åšquick select, è§quick selectèŠ‚.    &lt;/p&gt;
&lt;h2 id="quick-select"&gt;quick select&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;å¯¹äºä¸€ä¸ªæ²¡æœ‰æ’åºçš„æ•°ç»„, å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°å®ƒçš„ä¸­å€¼(median)?&lt;/em&gt;&lt;br/&gt;
ä»¥ä¸Šè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå°±åœ¨&lt;code&gt;partition()&lt;/code&gt;å‡½æ•°.   &lt;/p&gt;
&lt;p&gt;ä¹‹å‰è¯´è¿‡, &lt;code&gt;partition()&lt;/code&gt;å‡½æ•°çš„è¿”å›å€¼è¡¨ç¤ºpivotåœ¨æ’åºå¥½çš„æ•°ç»„ä¸­çš„ä½ç½®(rank), è¿™ä¸ªæ¶ˆæ¯éå¸¸æœ‰ç”¨: ä¸­å€¼åªä¸è¿‡æ˜¯rankç­‰äºé•¿åº¦é™¤ä»¥2çš„å…ƒç´ è€Œå·².   &lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¯»æ‰¾rankç­‰äºkçš„å…ƒç´ , æˆ‘ä»¬ç”¨partitionå‡½æ•°å¯ä»¥æ¯æ¬¡æŠŠé—®é¢˜è§„æ¨¡ç¼©å°: å¦‚æœpartition()=p&lt;k, å¦‚æœp="" é‚£ä¹ˆpivotå·¦è¾¹çš„subarrayä¸å¿…è€ƒè™‘,=""&gt;ké‚£ä¹ˆå³è¾¹subarrayä¸ç”¨è€ƒè™‘, å¦‚æœæ•°ç»„äº‹å…ˆshuffleè¿‡äº†çš„è¯, é—®é¢˜è§„æ¨¡æ¯æ¬¡ç¼©å°ä¸€åŠ.   &lt;/k,&gt;&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä¸€ä¸ªå‡½æ•°, å¯»æ‰¾rankç­‰äºkçš„å…ƒç´ , ä»£ç ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾:   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;findKth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;shuffle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¯¥ç®—æ³•å†…å±‚å¾ªç¯ä¸ºO(hi-lo), æ¯æ¬¡é—®é¢˜è§„æ¨¡å‡å°‘ä¸€åŠ, æ‰€ä»¥å¤æ‚åº¦ä¸ºN+N/2+N/4+...+1 = 2N, å¤æ‚åº¦ä¸ºçº¿æ€§æ—¶é—´!  &lt;/p&gt;
&lt;h2 id="3-way-qsort"&gt;3-way qsort&lt;/h2&gt;
&lt;p&gt;qsortä¹‹å‰æœ‰ä¸ªbug: åœ¨æ•°ç»„é‡Œå¾ˆå¤šé‡å¤å…ƒç´ çš„æ—¶å€™, æ•ˆç‡ä¼šä¸‹é™ä¸ºO(N2). åŸå› æ˜¯qsortæ²¡æœ‰å¥½å¥½å¤„ç†é‡å¤å…ƒç´ çš„é—®é¢˜.   &lt;/p&gt;
&lt;p&gt;äºæ˜¯Dijkstraæå‡ºäº†ä¸€ä¸ª&lt;strong&gt;3-way partition&lt;/strong&gt;çš„ç®—æ³•: æŠŠæ•°ç»„åˆ†ä¸ºä¸‰éƒ¨åˆ†: å·¦è¾¹&lt;code&gt;[lo, lt)&lt;/code&gt;ä¸¥æ ¼å°äºpivot, ä¸­é—´&lt;code&gt;[lt, gt]&lt;/code&gt;ç­‰äºpivot, å³è¾¹&lt;code&gt;(gt, hi]&lt;/code&gt;ä¸¥æ ¼å¤§äºpivot.   &lt;/p&gt;
&lt;p&gt;ç®—æ³•åˆå§‹åŒ–&lt;code&gt;lt=lo, gt=hi, i=lo&lt;/code&gt;, ç”¨æŒ‡é’ˆiå‘å³æ‰«æ, [i,gt]ä¸ºæœªå¤„ç†åˆ°çš„éƒ¨åˆ†. &lt;br/&gt;
ç®—æ³•å¾ˆsubtle, invariantæ˜¯è¿™æ ·çš„:   &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;a[lo,lt-1] &amp;lt; pivot  &lt;/li&gt;
&lt;li&gt;a[lt, i-1] = pivot  &lt;/li&gt;
&lt;li&gt;a[i,gt] = unseen  &lt;/li&gt;
&lt;li&gt;a[gt+1, hi] &amp;gt; pivot  &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/quick-sort-and-more/pasted_image006.png"/&gt;&lt;br/&gt;
è¿™ä¸ªå›¾å¾ˆæœ‰åŠ©äºå†™ä»£ç : &lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/quick-sort-and-more/pasted_image007.png"/&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;qsort3way&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="err"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;gt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i,gt&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;unseen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]==&lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;lt,i-1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;gt+1, hi&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gt&lt;/span&gt;&lt;span class="c1"&gt;--, i);  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;lo, lt-1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pivot&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lt&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;qsort3way&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;qsort3way&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gt&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¯´å®ƒå¾ˆsubtle, é™¤äº†å› ä¸ºæ²¡æœ‰é‚£ä¸ªå›¾æˆ‘å†™ä¸å‡ºæ¥ä»¥å¤–, è¿˜æœ‰å°±æ˜¯, åœ¨æŠŠiå’Œltäº¤æ¢æ—¶, iå¯ä»¥increment (å› ä¸ºæˆ‘ä»¬çŸ¥é“&lt;code&gt;a[lt]==pivot&lt;/code&gt;), ä½†æ˜¯iå’Œgtäº¤æ¢æ—¶, i&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;increment: å› ä¸ºa[gt]ä¸çŸ¥é“å¤šå¤§, æ‰€ä»¥iä½ç½®è¦ç»§ç»­æ£€æŸ¥.   &lt;/p&gt;
&lt;p&gt;å¦å¤–è¯´ä¸€å¥, quicksortçš„æ€æƒ³åœ¨radix sortå’Œtrieé‡Œé¢ä¹Ÿæœ‰é—ªç°, è§æˆ‘å…³äºè¿™ä¸¤ä¸ªä¸»é¢˜çš„MOOCç¬”è®°...&lt;/p&gt;</summary><category term="algorithm"></category></entry><entry><title>æœ€çŸ­è·¯å¾„ä¸‰å‰‘å®¢: Floyd, Dijkstra, Bellman</title><link href="https://x-wei.github.io/tech/shortest-path-summary.html" rel="alternate"></link><published>2015-10-18T17:00:00+02:00</published><updated>2015-10-18T17:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-10-18:tech/shortest-path-summary.html</id><summary type="html">&lt;p&gt;weighted graphçš„æœ€çŸ­è·¯å¾„é—®é¢˜æœ‰ä¸‰ä¸ªéå¸¸æœ‰åçš„ç®—æ³•, åˆ†åˆ«ä»¥ä¸‰ä¸ªå¤§ç‰›çš„åå­—å‘½å, ä»Šå¤©ç”¨å°½é‡ç®€æ´çš„ç¯‡å¹…ä¸€ä¸€ä»‹ç».    &lt;/p&gt;
&lt;p&gt;ç®€å•èµ·è§(è¿™å›åªå†™ä¼ªä»£ç å¥½äº†), å¯¹äºå›¾çš„å®šä¹‰å¦‚ä¸‹:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;node index = &lt;code&gt;{1,2,...,n}&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;e[u,v]&lt;/code&gt; = distance of edge(u,v); if (u,v) is not an edge, &lt;code&gt;e[u,v]=INF&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;ä»¤N=ç‚¹çš„æ•°é‡, M=è¾¹çš„æ•°é‡   &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ren-yi-liang-dian-zui-duan-lu-jing-floyd-warshall"&gt;ä»»æ„ä¸¤ç‚¹æœ€çŸ­è·¯å¾„: Floyd-Warshall&lt;/h1&gt;
&lt;p&gt;Floydç®—æ³•è§£å†³çš„é—®é¢˜æ˜¯: å¯¹äº&lt;strong&gt;ä»»æ„&lt;/strong&gt;ä¸¤ä¸ªèŠ‚ç‚¹&lt;code&gt;s&lt;/code&gt;(source)å’Œ&lt;code&gt;t&lt;/code&gt;(target), æ±‚såˆ°è¾¾tçš„æœ€çŸ­è·¯å¾„.    &lt;/p&gt;
&lt;p&gt;Floydç®—æ³•çš„æ€æƒ³æ˜¯åŠ¨æ€è§„åˆ’:    &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰&lt;code&gt;d(i,j,k)&lt;/code&gt;ä¸ºç‚¹iåˆ°ç‚¹jä¹‹é—´, &lt;strong&gt;åªå…è®¸å€Ÿé“èŠ‚ç‚¹1...kçš„æœ€çŸ­è·¯å¾„&lt;/strong&gt; &lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–: &lt;code&gt;d(i,j,0)=e[i,j]&lt;/code&gt;(å³iåˆ°jä¹‹é—´ä¸ç»ç”±å…¶ä»–ä»»ä½•ä¸­è½¬èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„)   &lt;/li&gt;
&lt;li&gt;æ›´æ–°dijçš„å…¬å¼å°±æ˜¯: &lt;code&gt;d(i,j,k)=min( d(i,j,k-1), d(i,k-1,k-1)+e[k,j])&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;æ›´æ–°næ¬¡   &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯æ¬¡æ›´æ–°dijçš„æ„æ€å°±æ˜¯: ç°åœ¨ä»iåˆ°jå¯ä»¥ç»è¿‡èŠ‚ç‚¹käº†, é‚£ä¹ˆçœ‹ä¸€ä¸‹ijä¹‹é—´ä»kè¿™ä¸ªç‚¹ç»è¿‡çš„è¯(i â†’ k â†’ j è¿™æ¡è·¯)èƒ½ä¸èƒ½ç¼©çŸ­dij.    &lt;/p&gt;
&lt;p&gt;iåˆ°jæœ€çŸ­è·¯å¾„æœ€ç»ˆå°±æ˜¯: &lt;code&gt;d(i,j,n)&lt;/code&gt; å³iåˆ°jçš„è·¯ç¨‹å¯ä»¥ç»è¿‡1~nä¸­çš„ä»»ä½•ä¸­è½¬èŠ‚ç‚¹.    &lt;/p&gt;
&lt;p&gt;ä¼ªä»£ç ç‰¹åˆ«çŸ­(å…¶å®çœŸä»£ç ä¹Ÿä¸€æ ·çŸ­....):    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;for all [i,j]: // initialize   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    d[i,j] = e[i,j]    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;for k = 1 ~ n: // relax for k times:    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for all [i,j]:   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        d[i,j] = min(d[i,j], d[i,k] + e[k,j])&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ ¸å¿ƒä»£ç åªæœ‰æœ€åä¸‰è¡Œ... è¿è¡Œç»“æŸå&lt;code&gt;d[i,j]&lt;/code&gt;å°±ä¿å­˜ç€ä»»æ„iå’Œjä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦.  &lt;br/&gt;
ç¨‹åºä¸»å¾ªç¯næ¬¡, æ¯æ¬¡è¦å¤„ç†éå†æ‰€æœ‰çš„ijç»„åˆ, æ‰€ä»¥å¤æ‚åº¦æ˜¯&lt;strong&gt;O(N^3)&lt;/strong&gt;.    &lt;/p&gt;
&lt;h1 id="dan-yuan-zui-duan-lu-jing-dijkstra"&gt;å•æºæœ€çŸ­è·¯å¾„: Dijkstra&lt;/h1&gt;
&lt;p&gt;Dijkstraç®—æ³•è§£å†³çš„é—®é¢˜æ˜¯: æ²¡æœ‰è´Ÿæƒè¾¹çš„æƒ…å†µä¸‹, ä»&lt;strong&gt;æºèŠ‚ç‚¹&lt;/strong&gt;&lt;code&gt;s&lt;/code&gt;åˆ°å…¶ä»–ä»»æ„èŠ‚ç‚¹&lt;code&gt;t&lt;/code&gt;çš„è·¯å¾„é•¿åº¦.    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»´æŠ¤ä¸€ä¸ªdistæ•°ç»„, dist[i]å°±è¡¨ç¤º(ç›®å‰ä¸ºæ­¢)såˆ°içš„æœ€çŸ­è·ç¦».    &lt;/li&gt;
&lt;li&gt;å¯¹äºæ¯ä¸ªå…ƒç´ , &lt;strong&gt;æ ‡è®°&lt;/strong&gt;æ˜¯å¦å…¶distæ˜¯å¦å·²ç»ç¡®å®šä¸å†æ›´æ”¹(æˆ–è€…è¯´ç»´æŠ¤ä¸¤ä¸ªé›†åˆ: ä¸€ä¸ªé›†åˆçš„distç¡®å®š, å¦ä¸€ä¸ªæœªç¡®å®š).    &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dijkstraç®—æ³•æ˜¯ä¸€ç§è´ªå¿ƒç­–ç•¥: æ¯æ¬¡åœ¨æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹é‡ŒæŒ‘é€‰è·ç¦»sæœ€è¿‘çš„é‚£ä¸ªç‚¹, æŠŠè¿™ä¸ªç‚¹æ ‡è®°ä¸ºå·²ç»ç¡®å®šdist, ç„¶åå¯¹ä»è¿™ä¸ªç‚¹å‡ºå‘çš„è¾¹è¿›è¡Œæ¾å¼›.    &lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ ‡è®°æ¯ä¸ªç‚¹, è¿™é‡Œç”¨ä¸€ä¸ªboolæ•°ç»„è¡¨ç¤º: &lt;code&gt;determined[i]&lt;/code&gt;ä¸ºtrueè¡¨ç¤ºiçš„distå·²ç»æ˜¯æœ€çŸ­è·¯ç¨‹, ä¸ºfalseè¡¨ç¤ºè¿˜ä¸ç¡®å®š.    &lt;/p&gt;
&lt;p&gt;ç®—æ³•å¦‚ä¸‹:    &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–&lt;code&gt;dist[i] = e[s,i]&lt;/code&gt;, &lt;code&gt;determined[i]&lt;/code&gt;å…¨ä¸ºfalse   &lt;/li&gt;
&lt;li&gt;åœ¨distæœªç¡®å®šçš„å…ƒç´ é‡Œ(&lt;code&gt;determined[i]==false&lt;/code&gt;)å¯»æ‰¾ä¸€ä¸ªdistæœ€å°çš„èŠ‚ç‚¹&lt;code&gt;u:&lt;/code&gt; &lt;ul&gt;
&lt;li&gt;æ ‡è®°&lt;code&gt;u&lt;/code&gt;çš„distå·²ç»ç¡®å®š&lt;code&gt;determined[i]=true&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;ç”¨uçš„æ‰€æœ‰å‡ºè¾¹è¿›è¡Œæ¾å¼›: såˆ°iå¦‚æœç»è¿‡(u,i)è¿™æ¡è¾¹ä¼šä¸ä¼šå˜è¿‘? &lt;code&gt;dist[i] = min(dist[i], dist[u]+e[u,i])&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;é‡å¤å¾ªç¯ç›´åˆ°æ‰€æœ‰çš„ç‚¹éƒ½ç¡®å®šdist(or é‡å¤Néå³å¯: &lt;em&gt;æ¯æ¬¡åªä¼šç¡®å®šä¸€ä¸ªæ–°çš„èŠ‚ç‚¹çš„è·ç¦»&lt;/em&gt;)   &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¼ªä»£ç :    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nl"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s,i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;determined&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;false&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;loop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;times&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;argmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;among&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;determined&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]==&lt;/span&gt;&lt;span class="k"&gt;false&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;determined&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;determine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;loop&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;such&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u,v&lt;/span&gt;&lt;span class="o"&gt;]&amp;lt;&lt;/span&gt;&lt;span class="nl"&gt;INF&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="o"&gt;]+&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u,v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç çš„å¤æ‚åº¦ä¸ºO(N^2), ä¸è¿‡å¦‚æœç”¨å †æ¥ä¼˜åŒ–å¯»æ‰¾æœ€è¿‘çš„uçš„è·ç¦», å¤æ‚åº¦å¯ä»¥å˜å¾—æ›´ä½.    &lt;/p&gt;
&lt;h1 id="you-fu-quan-bian-de-dan-yuan-zui-duan-lu-jing-bellman-ford"&gt;æœ‰è´Ÿæƒè¾¹çš„å•æºæœ€çŸ­è·¯å¾„: Bellman-Ford&lt;/h1&gt;
&lt;p&gt;Dijkstraç®—æ³•çš„ç¼ºç‚¹åœ¨äºä¸èƒ½å¤„ç†è¾¹é•¿ä¸ºè´Ÿæ•°çš„æƒ…å†µ, è€Œè¿™å°±æ˜¯Bellman-Fordç®—æ³•è§£å†³çš„.    &lt;/p&gt;
&lt;p&gt;Bellmanç®—æ³•ä¹Ÿæ˜¯ä¸€ç§åŠ¨æ€è§„åˆ’(åŠ¨æ€è§„åˆ’è¿™ä¸ªä¸œè¥¿å°±æ˜¯Bellmanæå‡ºæ¥çš„):    &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰&lt;code&gt;d(i,k)&lt;/code&gt;ä¸ºæºç‚¹såˆ°i&lt;strong&gt;æœ€å¤šç»è¿‡kæ¡è¾¹çš„&lt;/strong&gt;æœ€çŸ­è·ç¦»   &lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–: &lt;code&gt;d(i,1)=e[s,i]&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;æ¯æ¬¡æ›´æ–°diçš„å…¬å¼: &lt;code&gt;for all (u,v): d(v,k)=min( d(v,k-1), d(u,k-1)+e[u,v] )&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;æ›´æ–°n-1æ¬¡   &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ˜¯æ›´æ–°n-1æ¬¡? å› ä¸ºsåˆ°içš„æœ€çŸ­è·¯å¾„è‡³å¤šåªæœ‰n-1æ¡è¾¹(å³såˆ°içš„è·¯å¾„ç»è¿‡äº†æ‰€æœ‰nä¸ªç‚¹).  &lt;br/&gt;
æ³¨æ„æ¯æ¬¡æ›´æ–°, éœ€è¦æŠŠ&lt;strong&gt;æ‰€æœ‰çš„è¾¹&lt;/strong&gt;è¯•ä¸€é: çœ‹çœ‹ç”¨æ¯æ¡è¾¹(u,v)èƒ½ä¸èƒ½æ¾å¼›dv.    &lt;/p&gt;
&lt;p&gt;ä¼ªä»£ç :    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nl"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s,i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;loop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;times&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;such&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u,v&lt;/span&gt;&lt;span class="o"&gt;]&amp;lt;&lt;/span&gt;&lt;span class="nl"&gt;INF&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="o"&gt;]+&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u,v&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ ¸å¿ƒä»£ç ä¹Ÿæ˜¯æœ€åä¸‰è¡Œ... å¤ªtmç²¾å¦™äº†!!    &lt;/p&gt;
&lt;p&gt;å¤–å±‚å¾ªç¯N-1æ¬¡, å†…å±‚å¾ªç¯Mæ¬¡, æ‰€ä»¥ä»£ç çš„å¤æ‚åº¦æ˜¯O(NM).   &lt;/p&gt;
&lt;h1 id="more"&gt;More&lt;/h1&gt;
&lt;p&gt;ä»¥ä¸‹é—®é¢˜æœ‰ç©ºå†å†™...   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;negative cycle   &lt;/li&gt;
&lt;li&gt;A*   &lt;/li&gt;
&lt;/ul&gt;</summary><category term="algorithm"></category></entry><entry><title>æ·±åº¦ä¼˜å…ˆæœç´¢(DFS)å°ç»“</title><link href="https://x-wei.github.io/tech/dfs-summary.html" rel="alternate"></link><published>2015-10-18T00:00:00+02:00</published><updated>2015-10-18T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-10-18:tech/dfs-summary.html</id><summary type="html">&lt;p&gt;ä»Šå¤©æ€»ç»“ä¸€ä¸‹ä¹Ÿè®¸æ˜¯æœç´¢é—®é¢˜é‡Œæœ€é‡è¦çš„ç®—æ³•: DFS !    &lt;/p&gt;
&lt;p&gt;ç”±äºæ ‘å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªgraph, è¿™é‡Œè¿˜æ˜¯åªå†™å¯¹äºgraphçš„DFSç®—æ³•. Graphç±»çš„å®šä¹‰è¿˜æ˜¯ç”¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¿å­˜é‚»å±…ä¿¡æ¯:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public class GraphNode{      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int val;      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    List&amp;lt;GraphNode&amp;gt; neighbors;      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢é‡å¤, ä»ç„¶ç”¨ä¸€ä¸ªHaseSetè®°å½•èµ°è¿‡çš„èŠ‚ç‚¹:    &lt;/p&gt;
&lt;p&gt;&lt;code&gt;HasheSet&amp;lt;GraphNode&amp;gt; visited = new HasheSet&amp;lt;GraphNode&amp;gt;();&lt;/code&gt; &lt;/p&gt;
&lt;h2 id="recursive-dfs"&gt;Recursive DFS&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆå†™é€’å½’ç‰ˆæœ¬çš„DFS, DFSå°±æ˜¯ä¸€æ¡è·¯èµ°åˆ°åº•, ä¸æ’å—å¢™ä¸å›å¤´, æ‰€ä»¥é€’å½’å†™èµ·æ¥å¾ˆè‡ªç„¶: æ¯åˆ°ä¸€ä¸ªèŠ‚ç‚¹, æ ‡è®°å…¶å·²ç»è®¿é—®è¿‡äº†, ç„¶åå¯¹äºé‚»å±…é‡Œé¢æ²¡æœ‰è®¿é—®çš„èŠ‚ç‚¹ç»§ç»­é€’å½’è¿›è¡ŒDFS.    &lt;/p&gt;
&lt;p&gt;é€’å½’çš„DFSä»£ç éå¸¸ç®€æ´:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void DFS(GraphNode nd){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    System.out.println(nd.val);    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.add(nd);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(GraphNode next: nd.neighbors){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        if( !visited.contains(next) )   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            DFS(next);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è™½ç„¶è¿™ä¸ªç®—æ³•å¾ˆçŸ­, ä½†æ˜¯å®ƒéå¸¸é‡è¦, å›æº¯ç®—æ³•(backtracking)å…¶å®å°±ç›¸å½“äºåœ¨é—®é¢˜çš„æ±‚è§£åŸŸåšä¸€ä¸ªdfs. å¦å¤–æ‹“æ‰‘æ’åºä¹Ÿæ˜¯åŸºäºé€’å½’dfsè¿›è¡Œä¸€ç‚¹ç‚¹ä¿®æ”¹.    &lt;/p&gt;
&lt;h2 id="non-recursive-dfs"&gt;Non-recursive DFS&lt;/h2&gt;
&lt;p&gt;éé€’å½’ç‰ˆæœ¬çš„dfsåŒæ ·å¾ˆé‡è¦, å› ä¸ºæ¯•ç«Ÿéé€’å½’çš„ç‰ˆæœ¬æ•ˆç‡é«˜ä¸€äº›, å¦å¤–è¿™ä¸ªç®—æ³•å’Œbfséå¸¸ç›¸ä¼¼, åªä¸è¿‡æŠŠé˜Ÿåˆ—queueæ¢æˆäº†æ ˆstackè€Œå·²:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void DFS(GraphNode start){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    Stack&amp;lt;GraphNode&amp;gt; s = new Stack&amp;lt;GraphNode&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    q.push(start);      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.add(start);      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    while(!s.empty()){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        GraphNode cur = s.pop();      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        System.out.println(cur.val);      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        for(GraphNode next: cur.children){       &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            if(!visited.contains(next)){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                s.push(next);      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                visited.add(next); // mark node as visited when adding to stack!       &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            }      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        }      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }//while      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åŒæ ·è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯åœ¨æŠŠä¸€ä¸ªèŠ‚ç‚¹å…¥æ ˆçš„æ—¶åˆ»å°±å°†å…¶æ ‡è®°ä¸ºå·²è®¿é—®.    &lt;/p&gt;
&lt;h2 id="for-trees-dfs-with-depth"&gt;(for Trees) DFS with depth&lt;/h2&gt;
&lt;p&gt;å’Œä¸Šæ¬¡&lt;a href="http://x-wei.github.io/bfs-summary.html"&gt;bfs&lt;/a&gt;ä¸€æ ·, &lt;strong&gt;å¯¹äºæ ‘è€Œè¨€&lt;/strong&gt;, åœ¨dfsæœç´¢çš„è¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥è®°å½•è¯¥èŠ‚ç‚¹æ‰€åœ¨çš„depth.    &lt;/p&gt;
&lt;p&gt;éé€’å½’ç‰ˆæœ¬çš„ç¨‹åºå°±æ˜¯ç”¨ä¸€ä¸ªå’Œä¸Šé¢&lt;code&gt;s&lt;/code&gt;å¹³è¡Œçš„æ ˆè®°å½•æ·±åº¦, ç¨‹åºå’Œ"BFS with distance"å¾ˆåƒ. é€’å½’ç‰ˆæœ¬åªè¦åœ¨å‡½æ•°ç­¾åé‡ŒåŠ ä¸Šä¸€ä¸ªdepthçš„å‚æ•°å³å¯. è¿™ä¸¤ä¸ªå®ç°éƒ½å¾ˆç®€å•, å°±ä¸å†™äº†.    &lt;/p&gt;
&lt;p&gt;æ³¨æ„è¿™ä¸ªåªå¯¹äºæ ‘æœ‰æ„ä¹‰, å¯¹ä¸€ä¸ªå›¾è€Œè¨€æ²¡æœ‰depthä¸€è¯´...    &lt;/p&gt;
&lt;h2 id="dfs-for-binary-tree-preorder-traversal"&gt;DFS for binary tree: Preorder traversal&lt;/h2&gt;
&lt;p&gt;dfså¦ä¸€ä¸ªæœ‰ç”¨çš„æ€§è´¨æ˜¯: å¯¹äº&lt;strong&gt;äºŒå‰æ ‘&lt;/strong&gt;è€Œè¨€, dfså¾—åˆ°çš„èŠ‚ç‚¹é¡ºåºæ­£æ˜¯å…¶å‰åºéå†(preorder traversal)çš„é¡ºåº.    &lt;/p&gt;
&lt;p&gt;å…¶å®å‰åºéå†çš„å®šä¹‰å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªé€’å½’ç‰ˆæœ¬çš„dfsäº†:  &lt;br/&gt;
&lt;code&gt;[preorder(node)] = node.val + [preorder(node.left)] + [preorder(node.right)]&lt;/code&gt; &lt;/p&gt;
&lt;h2 id="dfs-with-path"&gt;DFS with path&lt;/h2&gt;
&lt;p&gt;å¦‚æœåœ¨è®¿é—®åˆ°æŸä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™æƒ³åŒæ—¶è·å¾—åˆ°è¯¥ç‚¹çš„è·¯å¾„, å…¶å®ä¹Ÿä¸éº»çƒ¦.    &lt;/p&gt;
&lt;p&gt;å¯¹äºé€’å½’ç‰ˆæœ¬çš„dfsè€Œè¨€, å¯ä»¥åœ¨å‚æ•°é‡Œé¢ç”¨ä¸€ä¸ªListè®°å½•åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„.    &lt;/p&gt;
&lt;p&gt;éé€’å½’çš„ç‰ˆæœ¬çš„è¯... è²Œä¼¼ä¸æ˜¯å¾ˆtrival, éœ€è¦å¯¹stackåšå¥½ç»´æŠ¤, å¯èƒ½éœ€è¦ä¸€ä¸ªhashmapä»€ä¹ˆçš„... ä»¥åæœ‰ç©ºäº†å†å†™å†™.    &lt;/p&gt;
&lt;h2 id="cycle-detection"&gt;Cycle Detection&lt;/h2&gt;
&lt;p&gt;åˆ¤æ–­ä¸€ä¸ªæœ‰å‘å›¾æ˜¯å¦å­˜åœ¨å›è·¯æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜, ç®€å•ä¿®æ”¹dfså°±å¯ä»¥åšåˆ°äº†.    &lt;/p&gt;
&lt;p&gt;åœ¨é€’å½’ç‰ˆæœ¬çš„dfsé‡Œ, æˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªç‚¹æ”¹ä¸º&lt;strong&gt;ä¸‰ç§æ ‡è®°&lt;/strong&gt;:  &lt;br/&gt;
&lt;em&gt;æœªè®¿é—®è¿‡(0), æ­£åœ¨è®¿é—®å…¶é‚»å±…èŠ‚ç‚¹(1), å·²ç»è®¿é—®å®Œè¯¥èŠ‚ç‚¹ä»¥åŠæ‰€æœ‰è¯¥èŠ‚ç‚¹å¯ä»¥åˆ°è¾¾çš„èŠ‚ç‚¹(2)&lt;/em&gt;.    &lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°å›è·¯å‘¢? &lt;em&gt;å°±æ˜¯å½“å‰èŠ‚ç‚¹vçš„ä¸€ä¸ªé‚»å±…uçš„çŠ¶æ€ä¸º1çš„æ—¶å€™&lt;/em&gt;. å› ä¸ºè¯¥èŠ‚ç‚¹çŠ¶æ€ä¸º1, å³è¿˜æ²¡æœ‰æŠŠå®ƒä»¥åçš„èŠ‚ç‚¹å…¨éƒ¨éå†, æ‰€ä»¥å½“å‰èŠ‚ç‚¹vè‚¯å®šå¯ä»¥ä»uåˆ°è¾¾, è€Œç°åœ¨åˆå¯ä»¥ä»våˆ°è¾¾u, æ‰€ä»¥æ„æˆä¸€ä¸ªå›è·¯.    &lt;/p&gt;
&lt;p&gt;ä¸ºäº†è¡¨ç¤ºä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‰ç§çŠ¶æ€, æˆ‘ä»¬æŠŠvisitedçš„å®šä¹‰æ”¹ä¸€ä¸‹, å®šä¹‰ä¸ºä¸€ä¸ªhashmap:     &lt;br/&gt;
&lt;code&gt;HasheMap&amp;lt;GraphNode, Boolean&amp;gt; visited = new HasheMap&amp;lt;GraphNode, Boolean&amp;gt;();&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;èŠ‚ç‚¹ä¸åœ¨visitedè¡¨ç¤ºè¿˜æœªè®¿é—®è¿‡, èŠ‚ç‚¹å¯¹åº”ä¸ºfalseè¡¨ç¤ºæ­£åœ¨è®¿é—®, èŠ‚ç‚¹å¯¹åº”ä¸ºtrueè¡¨ç¤ºå·²ç»è®¿é—®è¯¥èŠ‚ç‚¹ä»¥åŠæ‰€æœ‰å¯ä»¥ä»å®ƒåˆ°è¾¾çš„èŠ‚ç‚¹.    &lt;/p&gt;
&lt;p&gt;å†™ä¸€ä¸‹ä»£ç :    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void DFS(GraphNode nd){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.put(nd, false); // mark as status-1   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(GraphNode next: nd.neighbors){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        if( !visited.contains(next) )   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            DFS(next);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        else if(visited.get(next)==false) // found cycle   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            System.out.println("Cycle detected!!!");   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }// now all touchable nodes from nd are visited   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.put(nd, true); // mark as status-2   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;éé€’å½’ç‰ˆæœ¬çš„è¯è²Œä¼¼ä¹Ÿä¸å¾ˆå®¹æ˜“, æš‚æ—¶ä¸å†™äº†, ä»¥åæœ‰ç©ºäº†è€ƒè™‘ä¸€ä¸‹...   &lt;/p&gt;
&lt;h2 id="topology-sort"&gt;Topology Sort&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€èŠ‚(ä»¥åŠä¸Šä¸€èŠ‚)å‚è€ƒè¿™ä¸ªéå¸¸æ£’çš„è§†é¢‘: &lt;a href="https://class.coursera.org/algo-003/lecture/52"&gt;https://class.coursera.org/algo-003/lecture/52&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;æ‹“æ‰‘æ’åºæ˜¯ä¸€ä¸ªdfsçš„åº”ç”¨, æ‰€è°“æ‹“æ‰‘æ’åºæ˜¯æŒ‡åœ¨ä¸€ä¸ªDAG(æœ‰å‘æ— å›è·¯å›¾)é‡Œç»™æ¯ä¸ªèŠ‚ç‚¹å®šä¹‰ä¸€ä¸ªé¡ºåº(v1...vn), ä½¿å¾—æŒ‰ç…§è¿™ä¸ªé¡ºåºéå†çš„èŠ‚ç‚¹, æ¯ä¸€ä¸ªèŠ‚ç‚¹viéƒ½æ˜¯ä¹‹å‰éå†è¿‡çš„çš„èŠ‚ç‚¹(v1 ~ vi-1)æ‰€æŒ‡å‘çš„(æˆ–æ²¡æœ‰ä»»ä½•å…¶ä»–èŠ‚ç‚¹æŒ‡å‘çš„).    &lt;/p&gt;
&lt;p&gt;å¥½åƒè¿˜æ²¡è¯´æ¸…æ¥š... æ‹“æ‰‘æ’åºçš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯å¯¹äºå„ç§ä¾èµ–æ€§(æ¯”å¦‚å­¦ä¹ è¯¾ç¨‹Aéœ€è¦å…ˆå­¦ä¹ è¿‡è¯¾ç¨‹B)ç»„æˆçš„å›¾å¯»æ‰¾ä¸€ä¸ªèŠ‚ç‚¹éå†çš„é¡ºåºä½¿å…¶å¯è¡Œ.    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;propositions&lt;/strong&gt;:    &lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ‹“æ‰‘æ’åºçš„ç»“æœä¸å”¯ä¸€.    &lt;/li&gt;
&lt;li&gt;æœ‰å›è·¯çš„å›¾ä¸å­˜åœ¨æ‹“æ‰‘é¡ºåº.   &lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å‡ºè¾¹, é‚£ä¹ˆå®ƒå¯ä»¥æ”¾åœ¨æ‹“æ‰‘æ’åºçš„æœ€åé¢(æ²¡æœ‰èŠ‚ç‚¹ä»¥æ¥å®ƒ).   &lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å…¥è¾¹, é‚£ä¹ˆå®ƒå¯ä»¥æ”¾åœ¨æ‹“æ‰‘æ’åºçš„æœ€åé¢.    &lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•ä¿®æ”¹ä¸€ä¸‹é€’å½’çš„dfså°±å¯ä»¥å¤„ç†æ‹“æ‰‘æ’åº: ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨&lt;code&gt;K&lt;/code&gt;(åˆå§‹åŒ–ä¸ºn=æ‰€æœ‰èŠ‚ç‚¹æ•°), æ¯å½“ä¸€ä¸ªç‚¹å·²ç»éå†å®Œæ¯•(æ‰€æœ‰é€šè¿‡è¿™ä¸ªç‚¹å¯ä»¥åˆ°è¾¾çš„ç‚¹éƒ½å·²ç»è¢«èµ°è¿‡)ä»¥å, å°±æŠŠè¿™ä¸ªç‚¹çš„é¡ºåºè®¾ä¸ºK, åŒæ—¶å‡å°‘K.    &lt;/p&gt;
&lt;p&gt;å°±ç”¨ä¸€ä¸ªHashMapæ¥ä¸ºæ¯ä¸ªèŠ‚ç‚¹å…³è”ä¸€ä¸ªåºå·å¥½äº†:  &lt;br/&gt;
&lt;code&gt;HasheMap&amp;lt;GraphNode, Integer&amp;gt; order = new HasheMap&amp;lt;GraphNode, Integer&amp;gt;();&lt;/code&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void DFS(GraphNode nd){      &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(GraphNode next: nd.neighbors){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        if( !visited.contains(next) )   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            DFS(next);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }// all touchable nodes from nd are visited   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    order.put(nd, K--);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯ç‰¹åˆ«ç®€å•, å¤ªç¥å¥‡äº†!    &lt;/p&gt;
&lt;p&gt;ä¸Šé¢åªæ˜¯å¯¹äºä¸€ä¸ªç‚¹è¿›è¡Œçš„, ä¸ºäº†ç»™æ‰€æœ‰ç‚¹æ‹“æ‰‘æ’åº, åªè¦ä»ä¸€ä¸ªæ²¡æœ‰å‡ºè¾¹çš„èŠ‚ç‚¹å‡ºå‘è¿›è¡Œéå†, ä¸€ç›´è¿è¡Œåˆ°æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å·²ç»è®¿é—®è¿‡ä¸ºæ­¢.    &lt;/p&gt;</summary><category term="algorithm"></category></entry><entry><title>å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)å°ç»“</title><link href="https://x-wei.github.io/tech/bfs-summary.html" rel="alternate"></link><published>2015-10-08T00:00:00+02:00</published><updated>2015-10-08T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-10-08:tech/bfs-summary.html</id><summary type="html">&lt;p&gt;ä»Šå¤©æ€»ç»“ä¸€ä¸‹å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS). BFSæ˜¯æ ‘/å›¾çš„éå†çš„å¸¸ç”¨ç®—æ³•ä¹‹ä¸€, å¯¹äºæ²¡æœ‰è¾¹æƒé‡çš„å›¾æ¥è¯´å¯ä»¥è®¡ç®—æœ€çŸ­è·¯å¾„.  &lt;br/&gt;
ç”±äºæ ‘çš„BFSåªæ˜¯å›¾çš„BFSçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ, è€Œä¸”æ¯”è¾ƒç®€å•ä¸éœ€è¦visitedæ ‡è®°, è¿™é‡Œåªå†™ä¸€ä¸‹å›¾çš„BFSå¥½äº†.  &lt;br/&gt;
å…ˆå®šä¹‰ä¸€ä¸ªGraphç±», è¿™é‡Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¿å­˜é‚»å±…ä¿¡æ¯:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public class GraphNode{   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int val;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    List&amp;lt;GraphNode&amp;gt; neighbors;   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="bfs-for-treesgraphs"&gt;BFS for trees/graphs&lt;/h2&gt;
&lt;p&gt;å›¾çš„éå†éœ€è¦æ³¨æ„ä¸èµ°é‡å¤èŠ‚ç‚¹, æ‰€ä»¥éœ€è¦ä¸€ä¸ªHashSet(åå­—å«visited)æ¥ä¿å­˜å“ªäº›èŠ‚ç‚¹å·²ç»è®¿é—®è¿‡äº†. éœ€è¦æ³¨æ„çš„æ˜¯, &lt;em&gt;åœ¨æŠŠä¸€ä¸ªèŠ‚ç‚¹æ”¾è¿›é˜Ÿåˆ—queueçš„æ—¶åˆ»å°±è¦æŠŠå®ƒæ”¾è¿›visited&lt;/em&gt;, è€Œä¸æ˜¯åœ¨é˜Ÿåˆ—é‡Œå–å‡ºæ¥çš„æ—¶åˆ»å†æ”¾.    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void BFS(GraphNode start){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    LinkedList&amp;lt;GraphNode&amp;gt; q = new LinkedList&amp;lt;GraphNode&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    HasheSet&amp;lt;GraphNode&amp;gt; visited = new HasheSet&amp;lt;GraphNode&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    q.push(start);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.add(start);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    while(!q.empty()){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        GraphNode cur = q.poll();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        System.out.println(cur.val);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        for(GraphNode next: cur.children){    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            if(!visited.contains(next)){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                q.push(next);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                visited.add(next); // mark node as visited when adding to queue!    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }//while   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="bfs-with-distance"&gt;BFS with distance&lt;/h2&gt;
&lt;p&gt;åœ¨BFSçš„åŒæ—¶æˆ‘ä»¬å¯ä»¥è®°å½•ä»startèŠ‚ç‚¹åˆ°å½“å‰nodeçš„è·ç¦», æ–¹æ³•æ˜¯æŠŠä¸€ä¸ªè·ç¦»ä¿¡æ¯åŒæ—¶å…¥é˜Ÿ(å°è£…ä¸€ä¸ª&lt;code&gt;Pair&amp;lt;GraphNode, Integer&amp;gt;&lt;/code&gt;), æˆ–è€…ä½¿ç”¨ä¸€ä¸ªä¸queue&lt;em&gt;å¹³è¡Œ&lt;/em&gt;çš„é˜Ÿåˆ—ä¿å­˜è·ç¦»ä¿¡æ¯.  &lt;br/&gt;
åœ¨ä¸Šé¢çš„ä»£ç ä¸­, åŠ å…¥:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;//...   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;LinkedList&amp;lt;Integer&amp;gt; distq = new LinkedList&amp;lt;Integer&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;distq.push(0);// distance from start to start   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//...   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;// in the while(!q.empty()) loop:    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    int d = distq.poll();//get distance from start to current node   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    for(GraphNode next: node.children){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        distq.push(d+1);// distance from start to next node   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        //...&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯¹äºTreeçš„æƒ…å†µæ¥è¯´, è¿™é‡Œçš„distå…¶å®å°±æ˜¯å½“å‰èŠ‚ç‚¹çš„æ·±åº¦depth.    &lt;/p&gt;
&lt;h2 id="properties"&gt;properties&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ€§è´¨1:&lt;/strong&gt; &lt;br/&gt;
æ¯ä¸ªèŠ‚ç‚¹nodeçš„distanceéƒ½æ˜¯nodeè·ç¦»èµ·å§‹ç‚¹startçš„æœ€çŸ­è·ç¦».    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€§è´¨2:&lt;/strong&gt; &lt;br/&gt;
è·ç¦»startè¿‘çš„èŠ‚ç‚¹(depthæµ…çš„èŠ‚ç‚¹)ä¸€å®šæ¯”è·ç¦»startè¿œçš„èŠ‚ç‚¹æ—©è¢«è®¿é—®åˆ°.    &lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å¯¹ä¸€ä¸ªæ ‘BFSçš„æ—¶å€™èŠ‚ç‚¹çš„è®¿é—®é¡ºåº:  &lt;br/&gt;
&lt;img alt="" class="img-responsive" src="../images/bfs-summary/pasted_image.png"/&gt; &lt;/p&gt;
&lt;h2 id="bfs-by-layer"&gt;BFS "by layer"&lt;/h2&gt;
&lt;p&gt;å‚è€ƒä¸Šé¢çš„æ€§è´¨, å¯ä»¥ä¸€æ¬¡å¤„ç†"ä¸€å±‚"çš„èŠ‚ç‚¹, "ä¸€å±‚"çš„æ„æ€æ˜¯æŒ‡æ‰€æœ‰èŠ‚ç‚¹è·ç¦»startçš„è·ç¦»ç›¸åŒ. ä»£ç åœ¨whileå¾ªç¯é‡Œä¸æ˜¯ä¸€æ¬¡pollä¸€ä¸ªèŠ‚ç‚¹, è€Œæ˜¯ä¸€æ¬¡æŠŠqueueçš„å†…å®¹å¤„ç†å®Œ, ç„¶åæ¢æ–°çš„queueè¿›å…¥ä¸‹ä¸€æ¬¡whileå¾ªç¯. ä»£ç é‡æ–°å†™ä¸€ä¸‹:    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public void BFS(GraphNode start){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    ArrayList&amp;lt;GraphNode&amp;gt; q = new ArrayList&amp;lt;Tree&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    HasheSet&amp;lt;GraphNode&amp;gt; visited = new HasheSet&amp;lt;GraphNode&amp;gt;();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    q.push(start);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    visited.add(start);   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    while(!q.empty()){   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        ArrayList&amp;lt;GraphNode&amp;gt; newq = new ArrayList&amp;lt;Tree&amp;gt;();// create a new queue   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        for(GraphNode cur: q){// deal with all nodes in the queue    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            System.out.print(cur.val+", ");// all nodes in q are of the same distance/depth   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            for(GraphNode next: cur.children)    &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                if(!visited.contains(next))   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;                    { newq.push(next);visited.add(next); }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        System.out.println();   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        q = newq;//replace q with newq   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }//while   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šç¨‹åºæ¯æ¬¡æ‰“å°ä¸€è¡Œ, ç¬¬iè¡ŒåŒ…æ‹¬äº†è·startè·ç¦»ä¸ºiçš„æ‰€æœ‰èŠ‚ç‚¹.  &lt;br/&gt;
ç”±äºè¿™æ ·çš„è¯æ¯æ¬¡ä¸å¿…åœ¨é˜Ÿé¦–pollå‡ºå…ƒç´ (è€Œæ˜¯ä¾æ¬¡å¤„ç†æ‰€æœ‰queueçš„å…ƒç´ ), æ‰€ä»¥å¯ä»¥æ”¹ç”¨ArrayList. æ­¤æ—¶whileå¾ªç¯é‡Œçš„ä¸å˜é‡æ˜¯: æ‰€æœ‰qé‡Œé¢çš„èŠ‚ç‚¹è·ç¦»startçš„è·ç¦»éƒ½ç›¸åŒ.    &lt;/p&gt;
&lt;h2 id="complexity"&gt;complexity&lt;/h2&gt;
&lt;p&gt;å‡è®¾ä¸€ä¸ªå›¾æœ‰Nä¸ªèŠ‚ç‚¹å’ŒMæ¡è¾¹, BFSä¼šèµ°éæ‰€æœ‰èŠ‚ç‚¹, æ—¶é—´æ˜¯O(N), ç„¶åç”±äºæ¯ä¸ªèŠ‚ç‚¹ä¼šæ£€æŸ¥æ‰€æœ‰çš„å‡ºè¾¹, æœ€ç»ˆæ‰€æœ‰çš„è¾¹éƒ½ä¼šè¢«æ£€æŸ¥è¿‡, æ—¶é—´æ˜¯O(M), æ‰€ä»¥BFSçš„æ—¶é—´å¤æ‚åº¦æ˜¯&lt;strong&gt;O(N+M)&lt;/strong&gt;.    &lt;/p&gt;
&lt;p&gt;é˜Ÿåˆ—é‡Œé¢æœ€å¤šå¯èƒ½å­˜æ”¾æ‰€æœ‰èŠ‚ç‚¹, ç©ºé—´å¤æ‚åº¦ä¸º&lt;strong&gt;O(N)&lt;/strong&gt;.    &lt;/p&gt;</summary><category term="algorithm"></category></entry><entry><title>Mindmap of algorithms &amp; data structures</title><link href="https://x-wei.github.io/tech/algo-ds-mindmap.html" rel="alternate"></link><published>2015-10-05T00:00:00+02:00</published><updated>2015-10-05T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-10-05:tech/algo-ds-mindmap.html</id><summary type="html">&lt;p&gt;Here is a mindmap of the common algorithms and data structures, it can give an overview of the algorithmic terms.    &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/algo-ds-mindmap/Algo%20%26%20DS.png"/&gt; &lt;/p&gt;
&lt;p&gt;I shall update its content later on. And maybe write some blog entries on some of the items.   &lt;/p&gt;
&lt;p&gt;This mindmap is drawn using &lt;a href="http://www.xmind.net/"&gt;xmind&lt;/a&gt;.   &lt;/p&gt;</summary><category term="algorithm"></category></entry><entry><title>numpy: list, array, matrixå°ç»“</title><link href="https://x-wei.github.io/tech/list_array_matrix.html" rel="alternate"></link><published>2015-09-09T00:00:00+02:00</published><updated>2015-09-09T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-09-09:tech/list_array_matrix.html</id><summary type="html">&lt;p&gt;pythonç§‘å­¦è®¡ç®—åŒ…çš„åŸºç¡€æ˜¯numpy, é‡Œé¢çš„arrayç±»å‹ç»å¸¸é‡åˆ°. ä¸€å¼€å§‹å¯èƒ½æŠŠè¿™ä¸ªarrayå’Œpythonå†…å»ºçš„åˆ—è¡¨(list)æ··æ·†, è¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹åˆ—è¡¨(list), å¤šç»´æ•°ç»„(np.ndarray)å’ŒçŸ©é˜µ(np.matrix)çš„åŒºåˆ«.    &lt;/p&gt;
&lt;h2 id="listlie-biao"&gt;liståˆ—è¡¨&lt;/h2&gt;
&lt;p&gt;åˆ—è¡¨å±äºpythonçš„ä¸‰ç§åŸºæœ¬é›†åˆç±»å‹ä¹‹ä¸€, å…¶ä»–ä¸¤ç§æ˜¯å…ƒç»„(tuple)å’Œå­—å…¸(dict). tupleå’ŒliståŒºåˆ«ä¸»è¦åœ¨äºæ˜¯ä¸æ˜¯mutableçš„.    &lt;/p&gt;
&lt;p&gt;listå’Œjavaé‡Œçš„æ•°ç»„ä¸åŒä¹‹å¤„åœ¨äº, pythonçš„listå¯ä»¥åŒ…å«ä»»æ„ç±»å‹çš„å¯¹è±¡, ä¸€ä¸ªlisté‡Œå¯ä»¥åŒ…å«int, stringæˆ–è€…å…¶ä»–ä»»ä½•å¯¹è±¡, å¦å¤–listæ˜¯å¯å˜é•¿åº¦çš„(listæœ‰&lt;code&gt;append&lt;/code&gt;, &lt;code&gt;extend&lt;/code&gt;å’Œ&lt;code&gt;pop&lt;/code&gt;ç­‰æ–¹æ³•).   &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥, pythonå†…å»ºçš„æ‰€è°“"åˆ—è¡¨"å…¶å®æ˜¯åŠŸèƒ½å¾ˆå¼ºå¤§çš„æ•°ç»„, ç±»æ¯”ä¸€ä¸‹å¯ä»¥è¯´å®ƒå¯¹åº”äºjavaé‡Œé¢çš„&lt;code&gt;ArrayList&amp;lt;Object&amp;gt;&lt;/code&gt; .    &lt;/p&gt;
&lt;h2 id="ndarrayduo-wei-shu-zu"&gt;ndarrayå¤šç»´æ•°ç»„&lt;/h2&gt;
&lt;p&gt;ndarrayæ˜¯numpyçš„åŸºçŸ³, å…¶å®å®ƒæ›´åƒä¸€ä¸ªjavaé‡Œé¢çš„æ ‡å‡†æ•°ç»„: æ‰€æœ‰å…ƒç´ æœ‰ä¸€ä¸ªç›¸åŒæ•°æ®ç±»å‹(dtype), ä¸è¿‡å¤§å°ä¸æ˜¯å›ºå®šçš„.    &lt;/p&gt;
&lt;p&gt;ndarrayå¯¹äºå¤§è®¡ç®—é‡çš„æ€§èƒ½éå¸¸å¥½, æ‰€ä»¥listè¦åšè¿ç®—çš„æ—¶å€™ä¸€å®šè¦å…ˆè½¬ä¸ºarray(&lt;code&gt;np.array(_a_list_)&lt;/code&gt;).    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ndarrayå¸¦æœ‰ä¸€äº›éå¸¸å®ç”¨çš„&lt;a href="http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html"&gt;å‡½æ•°&lt;/a&gt;, åˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„: &lt;code&gt;sum, cumsum, argmax, reshape, T, ...&lt;/code&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ndarrayæœ‰&lt;a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#arrays-indexing"&gt;fancy indexing&lt;/a&gt;, éå¸¸å®ç”¨, æ¯”å¦‚: &lt;code&gt;a[a&amp;gt;3]&lt;/code&gt; è¿”å›æ•°ç»„é‡Œå¤§äº3çš„å…ƒç´    &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ndarrayä¹‹é—´çš„ä¹˜æ³•: å¦‚æœç”¨ä¹˜æ³•è¿ç®—ç¬¦&lt;code&gt;*&lt;/code&gt;çš„è¯, è¿”å›çš„æ˜¯æ¯ä¸ªä½ç½®å…ƒç´ ç›¸ä¹˜(ç±»ä¼¼matlabé‡Œé¢çš„&lt;code&gt;.*&lt;/code&gt;), æƒ³è¦çŸ©é˜µç›¸ä¹˜éœ€è¦ç”¨&lt;code&gt;dot()&lt;/code&gt;.   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸¸è§çŸ©é˜µçš„ç”Ÿæˆ: &lt;code&gt;ones, zeros, eye, diag, ...&lt;/code&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="matrixju-zhen"&gt;matrixçŸ©é˜µ&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;matrixæ˜¯ndarrayçš„å­ç±»&lt;/em&gt;, æ‰€ä»¥å‰é¢ndarrayé‚£äº›ä¼˜ç‚¹éƒ½ä¿ç•™äº†.    &lt;/p&gt;
&lt;p&gt;åŒæ—¶, matrixå…¨éƒ¨éƒ½æ˜¯äºŒç»´çš„, å¹¶ä¸”åŠ å…¥äº†ä¸€äº›æ›´ç¬¦åˆç›´è§‰çš„å‡½æ•°, æ¯”å¦‚å¯¹äºmatrixå¯¹è±¡è€Œè¨€, ä¹˜å·è¿ç®—ç¬¦å¾—åˆ°çš„æ˜¯çŸ©é˜µä¹˜æ³•çš„ç»“æœ. å¦å¤–&lt;code&gt;mat.I&lt;/code&gt;å°±æ˜¯é€†çŸ©é˜µ...   &lt;/p&gt;
&lt;p&gt;ä¸è¿‡åº”ç”¨æœ€å¤šçš„è¿˜æ˜¯ndarrayç±»å‹.    &lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™:  &lt;br/&gt;
&lt;a href="http://docs.scipy.org/doc/numpy/reference/index.html"&gt;http://docs.scipy.org/doc/numpy/reference/index.html&lt;/a&gt; &lt;br/&gt;
&lt;a href="http://math.mad.free.fr/depot/numpy/base.html"&gt;http://math.mad.free.fr/depot/numpy/base.html&lt;/a&gt; &lt;br/&gt;
&lt;a href="http://stackoverflow.com/questions/4151128/what-are-the-differences-between-numpy-arrays-and-matrices-which-one-should-i-u"&gt;http://stackoverflow.com/questions/4151128/what-are-the-differences-between-numpy-arrays-and-matrices-which-one-should-i-u&lt;/a&gt; &lt;/p&gt;</summary><category term="python"></category></entry><entry><title>Scrapy ä¸Šæ‰‹ç¬”è®°</title><link href="https://x-wei.github.io/tech/Scrapy%20%E4%B8%8A%E6%89%8B%E7%AC%94%E8%AE%B0.html" rel="alternate"></link><published>2015-04-19T00:00:00+02:00</published><updated>2015-04-19T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-04-19:tech/Scrapy ä¸Šæ‰‹ç¬”è®°.html</id><summary type="html">&lt;p&gt;Scrapyæ˜¯ç”¨æ¥çˆ¬å–æ•°æ®çš„å¾ˆæµè¡Œçš„åŒ…, è¿™é‡Œå°è®°ä¸€ä¸‹. ä»¥å‰å‡ å¤©åšçš„&lt;a href="https://github.com/X-Wei/OneArticleCrawler"&gt;ä¸€ä¸ªçˆ¬è™«&lt;/a&gt;ä¸ºä¾‹å­, è¿™ä¸ªçˆ¬è™«æŠŠéŸ©å¯’ä¸€ä¸ªappçš„å‰ä¹ç™¾å¤šæœŸçš„æ–‡ç« æŠ“äº†ä¸‹æ¥. &lt;/p&gt;
&lt;h2 id="i-installation"&gt;I. installation&lt;/h2&gt;
&lt;p&gt;scrapyçš„å®‰è£…å‚è€ƒ: &lt;a href="http://scrapy-chs.readthedocs.org/zh_CN/latest/topics/ubuntu.html"&gt;http://scrapy-chs.readthedocs.org/zh_CN/latest/topics/ubuntu.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;(ç›´æ¥pipå®‰è£…çš„å¥½åƒç¼ºå°‘ä»€ä¹ˆåŒ…)&lt;/p&gt;
&lt;h2 id="ii-prerequisite"&gt;II. prerequisite&lt;/h2&gt;
&lt;h3 id="xpath"&gt;XPath&lt;/h3&gt;
&lt;p&gt;éœ€è¦å­¦ä¹ scrapyé¦–å…ˆéœ€è¦ä¼šXPath, è¿™æ˜¯ä¸€ç§æ–¹ä¾¿ä¸åœ¨html/xmlæ–‡æ¡£é‡ŒæŸ¥æ‰¾æ‰€éœ€å…ƒç´ çš„è¯­å¥. è¿™ä¸ªè¿˜æ˜¯å¾ˆå¥½å­¦çš„, å…¶å®åªéœ€è¦èŠ±ä¸€åˆ»é’Ÿæ—¶é—´çœ‹çœ‹w3schoolçš„&lt;a href="http://www.w3school.com.cn/xpath/"&gt;æ•™ç¨‹&lt;/a&gt;, å°±å¯ä»¥æŒæ¡å¤Ÿç”¨çš„çŸ¥è¯†è¿›è¡Œä¸‹ä¸€æ­¥äº†. &lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ€»ç»“ä¸€ä¸‹æˆ‘è§‰å¾—ä¼šç”¨åˆ°çš„è¯­å¥(ä¸å…¨, ä¸è¿‡ç»å¸¸ç”¨åˆ°): &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;//book&lt;/code&gt;    é€‰å–æ‰€æœ‰åå­—å«åšbookçš„å…ƒç´ &lt;/li&gt;
&lt;li&gt;&lt;code&gt;bookstore/book&lt;/code&gt; é€‰å–bookstoreçš„å­å…ƒç´ ä¸­æ‰€æœ‰å«bookçš„å…ƒç´ &lt;/li&gt;
&lt;li&gt;&lt;code&gt;//title[@lang='eng']&lt;/code&gt; é€‰å–langå±æ€§ä¸º"eng"çš„æ‰€æœ‰titleå…ƒç´ &lt;/li&gt;
&lt;li&gt;&lt;code&gt;//titile/text()&lt;/code&gt; é€‰å–titleå…ƒç´ çš„æ–‡å­—å†…å®¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;descendant-or-self::text()&lt;/code&gt;: é€‰å–è‡ªå·±æˆ–è€…æ‰€æœ‰åä»£èŠ‚ç‚¹çš„æ–‡å­—å†…å®¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–è¿˜æœ‰ä¸ªåœ¨çº¿æµ‹è¯•XPathè¯­å¥çš„ç½‘ç«™, å¯ä»¥ç”¨è¿™ä¸ªæµ‹è¯•XPathè¯­å¥: &lt;/p&gt;
&lt;p&gt;&lt;a href="http://xpath.online-toolz.com/tools/xpath-editor.php"&gt;http://xpath.online-toolz.com/tools/xpath-editor.php&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="shen-cha-yuan-su"&gt;å®¡æŸ¥å…ƒç´ &lt;/h3&gt;
&lt;p&gt;å†ä¸€ä¸ªå°±æ˜¯è¦ç”¨chromeçš„"å®¡æŸ¥å…ƒç´ "åŠŸèƒ½, ç”¨è¿™ä¸ªåŠŸèƒ½å¯ä»¥çœ‹åˆ°æƒ³æŸ¥æ‰¾çš„ç½‘é¡µå†…å®¹å¯¹åº”åœ¨htmlæ–‡ä»¶çš„ä½ç½®, ç”šè‡³å¯ä»¥ç›´æ¥å³é”®å¤åˆ¶æƒ³è¦çš„å…ƒç´ çš„XPath......(ä¸è¿‡æœ‰æ—¶å€™å¹¶ä¸æ˜¯æœ€åˆç†çš„, æ‰€ä»¥åˆšæ‰XPathä¹Ÿä¸æ˜¯ç™½å­¦...)&lt;/p&gt;
&lt;h2 id="iii-scrapy-shell_1"&gt;III. scrapy shell&lt;/h2&gt;
&lt;p&gt;ç½‘ä¸Šçš„æ•™ç¨‹ä¸€èˆ¬æ˜¯ä»ä¸€ä¸ª&lt;a href="http://doc.scrapy.org/en/latest/intro/tutorial.html"&gt;tutorial&lt;/a&gt;å¼€å§‹çš„, ä»‹ç»äº†ä¸€ä¸ªå°é¡¹ç›®, ä½†æ˜¯æˆ‘è§‰å¾—ä»scrapy shellå¼€å§‹åº”è¯¥æ›´åˆç†, æœ‰æ—¶å€™ç”šè‡³æ²¡å¿…è¦å»ºç«‹ä¸€ä¸ªå·¥ç¨‹, åœ¨è¿™ä¸ªshellé‡Œå°±å¯ä»¥æŠ“åˆ°æƒ³è¦çš„æ•°æ®. &lt;/p&gt;
&lt;p&gt;å¯åŠ¨çš„åŠæ³•å¾ˆç®€å•: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$scrapy shell 'url'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…¶ä¸­&lt;code&gt;url&lt;/code&gt;å°±å†™æƒ³è¦çˆ¬å–çš„ä¸€ä¸ªç½‘å€. &lt;/p&gt;
&lt;p&gt;è¿™ä¸ªshellç®€å•è¯´æ¥, å°±æ˜¯ä¸€ä¸ªæµ‹è¯•çˆ¬è™«çš„äº¤äº’ç¯å¢ƒ, é™¤äº†&lt;em&gt;å¤šäº†ä¸€äº›ç‰¹æ®Šå˜é‡å’Œå‡½æ•°&lt;/em&gt;, å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„(i)python shell. &lt;/p&gt;
&lt;p&gt;å…ˆè¯´ä¸¤ä¸ªscrapy shellå¤šå‡ºæ¥çš„å˜é‡: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;response&lt;/code&gt;: æŠŠå¯åŠ¨çš„&lt;code&gt;url&lt;/code&gt;æŠ“å–åå¾—åˆ°çš„&lt;code&gt;Response&lt;/code&gt;å¯¹è±¡, æ¯”å¦‚ &lt;code&gt;response.body&lt;/code&gt;å°±åŒ…å«äº†æŠ“å–æ¥çš„htmlå†…å®¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sel&lt;/code&gt;: ç”¨åˆšåˆšæŠ“å–çš„å†…å®¹å»ºç«‹çš„ä¸€ä¸ª&lt;code&gt;Selector&lt;/code&gt;å¯¹è±¡, ç®€å•ç†è§£, Selectorå¯¹è±¡å¯ä»¥è®©æˆ‘ä»¬æ‰§è¡ŒXPathè¯­å¥æå–æƒ³è¦çš„å†…å®¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»å¸¸çš„ç”¨æ³•å°±æ˜¯ç”¨&lt;code&gt;response&lt;/code&gt;å¯¹è±¡æŸ¥çœ‹çˆ¬å–çš„æƒ…å†µ(&lt;code&gt;response.status&lt;/code&gt;), ç”¨&lt;code&gt;sel&lt;/code&gt;å¯¹è±¡æµ‹è¯•XPathçš„æ­£ç¡®:
&lt;code&gt;sel.xpath("xpath_statement").extract()&lt;/code&gt; ä¼šåœ¨è·å–çš„response.bodyé‡Œç”¨xpathæŸ¥æ‰¾å¹¶æå–å†…å®¹. &lt;/p&gt;
&lt;p&gt;å†è¯´ä¸¤ä¸ªscrapy shellæ·»åŠ çš„å‡½æ•°:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;fetch(request_or_url)&lt;/code&gt;: ä¿®æ”¹è¯·æ±‚æˆ–è€…ç½‘å€, è¿™æ ·scrapy shellä¼šä»æ–°ç”¨è¿™ä¸ªrequest/urlæŠ“å–æ•°æ®, ç›¸åº”çš„selå’Œresponseç­‰å¯¹è±¡ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°. &lt;/li&gt;
&lt;li&gt;&lt;code&gt;view(response)&lt;/code&gt;: åœ¨æµè§ˆå™¨é‡ŒæŸ¥çœ‹åˆšåˆšæŠ“å–çš„å†…å®¹.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œä¸¾ä¸ªä¾‹å­, æŠ“å–ä¸€ä¸ªçš„æ–‡ç« æ ‡é¢˜: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;'http://wufazhuce.com/one/vol.921#articulo'&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;......&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;Out&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sel&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'//*[@id="tab-articulo"]/div/h2/text()'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="k"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;ScrapyDeprecationWarning&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;"sel"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shortcut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;deprecated&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;"response.xpath()"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;"response.css()"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;"response.selector"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;instead&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;Out&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u'\n\t\t\t\t\t\t\u78b0\u4e0d\u5f97\u7684\u4eba\t\t\t  \t\t'&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;3&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sel&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'//*[@id="tab-articulo"]/div/h2/text()'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="k"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="w"&gt;                            &lt;/span&gt;&lt;span class="n"&gt;ç¢°ä¸å¾—çš„äºº&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;scrapy shellçš„å®Œæ•´æ–‡æ¡£åœ¨: 
&lt;a href="http://doc.scrapy.org/en/latest/topics/shell.html"&gt;http://doc.scrapy.org/en/latest/topics/shell.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="iv-scrapy-project"&gt;IV. scrapy project&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¯´å»ºç«‹scrapyå·¥ç¨‹, è¿™ä¸ªæŒ‰ç…§tutorialèµ°å°±å¥½äº†. 
å»ºç«‹å·¥ç¨‹: 
&lt;code&gt;scrapy startproject my_proj&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¼šæ–°å»ºä¸€ä¸ªmy_projæ–‡ä»¶å¤¹, é‡Œé¢çš„ç»“æ„æ˜¯: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ tree &lt;/span&gt;
&lt;span class="code-line"&gt;.&lt;/span&gt;
&lt;span class="code-line"&gt;â””â”€â”€ my_proj&lt;/span&gt;
&lt;span class="code-line"&gt;    â”œâ”€â”€ scrapy.cfg&lt;/span&gt;
&lt;span class="code-line"&gt;    â””â”€â”€ my_proj&lt;/span&gt;
&lt;span class="code-line"&gt;        â”œâ”€â”€ __init__.py&lt;/span&gt;
&lt;span class="code-line"&gt;        â”œâ”€â”€ items.py&lt;/span&gt;
&lt;span class="code-line"&gt;        â”œâ”€â”€ pipelines.py&lt;/span&gt;
&lt;span class="code-line"&gt;        â”œâ”€â”€ settings.py&lt;/span&gt;
&lt;span class="code-line"&gt;        â””â”€â”€ spiders&lt;/span&gt;
&lt;span class="code-line"&gt;            â””â”€â”€ __init__.py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¦ä¿®æ”¹çš„æ–‡ä»¶ä¸»è¦æœ‰ä¸¤ä¸ª: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;items.py&lt;/code&gt; å®šä¹‰è¦æŠ“å–çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;spiders/xxx.py&lt;/code&gt; å®šä¹‰è‡ªå·±çš„çˆ¬è™«&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="1-zi-ding-yi-pa-chong"&gt;1. è‡ªå®šä¹‰çˆ¬è™«&lt;/h3&gt;
&lt;p&gt;å…ˆå®šä¹‰çˆ¬è™«, åœ¨spidersæ–‡ä»¶å¤¹é‡Œé¢, æ–°å»ºä¸€ä¸ªpythonæ–‡ä»¶, è¿™é‡Œå®šä¹‰ä¸€ä¸ª&lt;code&gt;scrapy.spider.Spider&lt;/code&gt;çš„å­ç±»: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;OneSpider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spider&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Spider&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"one_spider"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;start_urls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;"http://wufazhuce.com/one/vol.&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;#articulo"&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;924&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;title_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'//*[@id="tab-articulo"]/div/h2/text()'&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡Œ, Spiderå­ç±»ä¸€å®šéœ€è¦å®šä¹‰ä¸‰ä¸ªä¸œè¥¿: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;ï¼šã€€ æ˜¯çˆ¬è™«çš„åå­—, ä¸€ä¼šçˆ¬å–çš„æ—¶å€™éœ€è¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;start_urls&lt;/code&gt;:ã€€å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse()&lt;/code&gt; æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;çˆ¬è™«å¯åŠ¨çš„æ—¶å€™ä¼šæŠŠæ¯ä¸€ä¸ªstart_urlsé‡Œçš„ç½‘å€ä¸‹è½½, ç”Ÿæˆçš„&lt;code&gt;Response&lt;/code&gt;å¯¹è±¡ä¼šä¼ å…¥è¿™ä¸ª&lt;code&gt;parse()&lt;/code&gt;æ–¹æ³•, è¿™ä¸ªæ–¹æ³•è´Ÿè´£è§£æè¿”å›çš„&lt;code&gt;Response&lt;/code&gt;å¯¹è±¡, æå–æ•°æ®(ç”Ÿæˆitem)ä»¥åŠç”Ÿæˆéœ€è¦è¿›ä¸€æ­¥å¤„ç†çš„URLçš„ Request å¯¹è±¡ç­‰...&lt;/p&gt;
&lt;h3 id="2-bao-cun-zhua-qu-de-xin-xi-dao-item"&gt;2. ä¿å­˜æŠ“å–çš„ä¿¡æ¯åˆ°item&lt;/h3&gt;
&lt;p&gt;åˆšæ‰åªæ˜¯åšåˆ°äº†æŠ“å–éœ€è¦çš„ä¿¡æ¯, è¿˜æ²¡æœ‰èƒ½å¤Ÿä¿å­˜åˆ°æ–‡ä»¶é‡Œ, ä¸‹é¢è¦å°†æŠ“å–çš„ä¿¡æ¯åšæˆä¸€ä¸ª&lt;code&gt;Item&lt;/code&gt;ä¿å­˜.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¦–å…ˆå®šä¹‰è¦ä¿å­˜çš„ä¿¡æ¯:&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;ä¿®æ”¹items.pyæ–‡ä»¶, é‡Œé¢å®šä¹‰ä¸€ä¸ª&lt;code&gt;scrapy.Item&lt;/code&gt;çš„å­ç±»:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;OnearticleItem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Item&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# define the fields for your item here like:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;vol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scrapy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ–‡ä»¶å¾ˆç®€å•, åªæ˜¯è¯´æ˜ä¸€ä¸‹è¦æŠ“å–çš„ä¿¡æ¯, ä»–ä»¬éƒ½æ˜¯&lt;code&gt;scrapy.Field()&lt;/code&gt;, è¿™ä¸ªä¸œè¥¿ç±»ä¼¼ä¸€ä¸ªå­—å…¸.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç„¶ååœ¨çˆ¬è™«é‡Œä¿å­˜item:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿å­˜æŠ“å–çš„å†…å®¹, åœ¨parse()æ–¹æ³•é‡Œ, å¾—åˆ°éœ€è¦çš„æ•°æ®ä»¥å, æ–°å»ºä¸€ä¸ª&lt;code&gt;OnearticleItem&lt;/code&gt;, æŠŠæŠ“åˆ°çš„å†…å®¹æ”¾è¿›è¿™ä¸ªitemé‡Œ, ç„¶åè¿”å›è¿™ä¸ªitemå³å¯. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;nb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;findall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'\d+'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;title_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'//*[@id="tab-articulo"]/div/h2/text()'&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;author_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'//*[@id="tab-articulo"]/div/p/text()'&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;content_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'//div[@class="articulo-contenido"]/descendant-or-self::text()'&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;author_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;  &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xpath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;nb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OnearticleItem&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'vol'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nb&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'title'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'author'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'content'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="3-yun-xing-pa-chong"&gt;3. è¿è¡Œçˆ¬è™«&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸Šçš„æ–‡ä»¶ä¿®æ”¹å¥½äº†ä»¥å, åªéœ€&lt;em&gt;åœ¨å‘½ä»¤è¡Œé‡Œ&lt;/em&gt;å¯åŠ¨çˆ¬è™«å³å¯, è¿™æ—¶å€™å°±ç”¨åˆ°äº†åˆšæ‰å®šä¹‰çš„spiderçš„&lt;code&gt;name&lt;/code&gt;å±æ€§:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$scrapy crawl one_spider -o one.csv&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¤§çº¦å‡ åˆ†é’ŸåŠŸå¤«, ä¹ç™¾å¤šç¯‡æ–‡ç« å°±æ”¾åˆ°äº†one.csvæ–‡ä»¶é‡Œ~&lt;/p&gt;</summary><category term="python"></category><category term="scrapy"></category></entry><entry><title>è¿ç­¹çš„åŠ›é‡: ç”¨çº¿æ€§è§„åˆ’è§£å†³Google 2014 HashCodeé—®é¢˜</title><link href="https://x-wei.github.io/tech/hashcode2014-solved-by-LP.html" rel="alternate"></link><published>2015-02-02T00:00:00+01:00</published><updated>2015-02-02T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2015-02-02:tech/hashcode2014-solved-by-LP.html</id><summary type="html">&lt;p&gt;INF580(programmation par contraintes) å¤§æ¦‚æ˜¯åœ¨Xå­¦åˆ°çš„æœ€æœ‰ç”¨çš„ä¸€é—¨è¯¾, å®ƒè®©æˆ‘èƒ½å¤Ÿç”¨æŠŠè¿ç­¹å­¦(MAP557)é‡Œå­¦åˆ°çš„ä¸œè¥¿å’Œè®¡ç®—æœºç»“åˆèµ·æ¥: ç”¨ç”µè„‘çš„åŠ›é‡è§£å†³(å¤§è§„æ¨¡)è¿ç­¹é—®é¢˜. &lt;/p&gt;
&lt;p&gt;è¿™é—¨è¯¾çš„projetæ˜¯å»å¹´å·´é»è°·æ­Œä¸¾è¡Œçš„ä¸€ä¸ªæ¯”èµ›çš„é¢˜ç›®: æœ€ä¼˜åŒ–è°·æ­Œè¡—æ™¯æ‹ç…§å°è½¦çš„è·¯çº¿. åšè¿™ä¸ªprojetçš„ä¸‰å‘¨é‡Œ, æˆ‘å’ŒManuä»ä¸€å¼€å§‹ä¿¡å¿ƒæ»¡æ»¡, åˆ°ä¸­é—´ä¸€ç­¹è«å±•, å†åˆ°åæ¥æŸ³æš—èŠ±æ˜, ä»¥åŠæœ€åä¹˜èƒœè¿½å‡»ç»ˆäºåœ¨ä»Šæ™šå¾—åˆ°äº†è¿‘ä¹å®Œç¾çš„è§£ç­”, éå¸¸ç²¾å½©, è¿™é‡Œç‰¹æ„ä¸€è®°.&lt;/p&gt;
&lt;h1 id="wen-ti-miao-shu"&gt;é—®é¢˜æè¿°&lt;/h1&gt;
&lt;p&gt;è°·æ­Œé‚£æ¬¡æ¯”èµ›çš„é¢˜ç›®åœ¨è¿™é‡Œ(æˆ‘ä»¬åšçš„æ˜¯Main Roundçš„é¢˜ç›®): &lt;a href="https://sites.google.com/site/hashcode2014/tasks"&gt;https://sites.google.com/site/hashcode2014/tasks&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´, å°±æ˜¯å·²çŸ¥å·´é»çš„é“è·¯ä¿¡æ¯, è®¾æ³•ç”¨å…«è¾†è½¦(æ¯è¾†è½¦çš„è¡Œé©¶æ—¶é—´æœ‰é™)ä»å·´é»è°·æ­Œå‡ºå‘, å°½å¯èƒ½å¤šçš„èµ°éå·´é»çš„æ‰€æœ‰è¡—é“, å‚èµ›è€…ç»™å‡ºè¿™äº›è½¦çš„è·¯çº¿, ä»–ä»¬çš„åˆ†æ•°å°±æ˜¯è¿™å…«è¾†è½¦èµ°è¿‡çš„è¡—é“çš„é•¿åº¦ä¹‹å’Œ(é‡å¤èµ°çš„è¡—é“ä¸ç®—åˆ†). &lt;/p&gt;
&lt;p&gt;å»å¹´å››æœˆä»½æˆ‘ä»¬ä¹Ÿå‚åŠ äº†è¿™ä¸ªæ¯”èµ›, ä¸è¿‡å½“æ—¶çº ç»“äºå¦‚ä½•è®¾è®¡æ¯è¾†è½¦çš„è·¯çº¿, æœ€ååªæ˜¯ç”¨äº†è´ªå¿ƒç®—æ³•, å†åŠ ä¸Šä¸€ç‚¹ç‚¹çš„éšæœº, å¾—åˆ°çš„ç»“æœå¹¶ä¸å¥½... å½“æ—¶ENSçš„äººåŒ…æ½äº†å‰ä¸‰å, è€Œä¸”æ¯”èµ›åè¿›ä¸€æ­¥æŠŠåˆ†æ•°åˆ·åˆ°äº†æ»¡åˆ†: ä»–ä»¬çš„è·¯çº¿å¯ä»¥æŠŠæ‰€æœ‰è¡—é“éƒ½è·‘é. &lt;/p&gt;
&lt;p&gt;è¿™å­¦æœŸå­¦äº†INF580ä»¥å, æ‰‹é‡Œæœ‰äº†&lt;strong&gt;JaCoP&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;AMPL&lt;/strong&gt;ç­‰"é‡å‹æ­¦å™¨", æˆ‘ä»¬ç»è¿‡ä¸€ç•ªåŠªåŠ›ä¹Ÿå¾—åˆ°äº†æ»¡åˆ†, è€Œä¸”ç”¨äº†å‡ ä¹æœ€å°‘çš„æ—¶é—´. ä»£ç æ”¾åœ¨äº†: &lt;a href="https://github.com/X-Wei/INF580_HashCode2014"&gt;https://github.com/X-Wei/INF580_HashCode2014&lt;/a&gt; (é‡Œé¢è¿˜æœ‰ä¸ªpdfçš„æŠ¥å‘Š, æ¯”è¿™ç¯‡åšå®¢é‡Œè¯´çš„ç²¾ç‚¼).&lt;/p&gt;
&lt;h1 id="i-chu-bu-jian-mo"&gt;I. åˆæ­¥å»ºæ¨¡&lt;/h1&gt;
&lt;h2 id="xian-xing-gui-hua-lpmo-xing"&gt;çº¿æ€§è§„åˆ’(LP)æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;ç«™åœ¨ä¸€ä¸ªæ›´é«˜çš„è§’åº¦ä¸Šè€ƒè™‘è¿™ä¸ªé—®é¢˜, ä»ä¸€ä¸ªçº¿æ€§è§„åˆ’çš„è§’åº¦çœ‹, ç»™å®šä¸€ä¸ªå›¾&lt;code&gt;G(V,E)&lt;/code&gt;, ç›®æ ‡æ˜¯æœ€å¤§åŒ–èµ°è¿‡çš„è¡—é“é•¿åº¦, å¦‚æœç”¨å¯¹æ¯æ¡è¡—é“&lt;code&gt;e&lt;/code&gt;, å®šä¹‰ä¸€ä¸ª&lt;code&gt;x_e&lt;/code&gt;,: å½“ä¸€æ¡è¡—è¢«ç»è¿‡çš„æ—¶å€™ä½¿å®ƒä¸º1, å¦åˆ™ä¸º0, é‚£ä¹ˆç›®æ ‡å‡½æ•°å°±æ˜¯ä¸€ä¸ªxçš„çº¿æ€§ç»„åˆ(ç³»æ•°å°±æ˜¯å¯¹åº”è¡—é“çš„é•¿åº¦). &lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœä¸€æ¡è¡—è¢«ç»è¿‡äº†å¤§äºä¸€æ¬¡, &lt;code&gt;x_e&lt;/code&gt;ä¹Ÿåªèƒ½æ˜¯1, æ‰€ä»¥å†å¼•å…¥ä¸€ä¸ªå˜é‡&lt;code&gt;y_e&lt;/code&gt;: ç”¨æ¥è¡¨ç¤ºä¸€æ¡è¡—è¢«ç»è¿‡çš„&lt;strong&gt;æ¬¡æ•°&lt;/strong&gt;. æ‰€ä»¥&lt;code&gt;x_e&lt;/code&gt;å¯ä»¥çœ‹æˆæ˜¯&lt;code&gt;y_e&lt;/code&gt;çš„indicatriceå‡½æ•°: &lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/equation.png"/&gt;, è¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡å¢åŠ çº¿æ€§çº¦æŸ: &lt;code&gt;x_e&amp;lt;=y_e&lt;/code&gt; å³å¯å®ç°, å› ä¸º&lt;code&gt;x_e&lt;/code&gt;çš„å–å€¼èŒƒå›´æ˜¯{0,1}. &lt;/p&gt;
&lt;p&gt;ä¸è¿‡ä¸€æ¡è¡—å¯èƒ½ä»ä¸¤ä¸ªæ–¹å‘è¢«ç»è¿‡(&lt;code&gt;G&lt;/code&gt;é‡Œé¢çš„è¾¹æ˜¯æœ‰å‘çš„), å¦‚æœ&lt;code&gt;e&lt;/code&gt;'ä»£è¡¨åæ–¹å‘çš„&lt;code&gt;e&lt;/code&gt;, é‚£ä¹ˆè¿˜åº”è¯¥å¢åŠ çº¦æŸ:  &lt;code&gt;x_e+x_e'&amp;lt;=1&lt;/code&gt; å°±å¥½äº†. &lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥&lt;code&gt;y&lt;/code&gt;è¦æ»¡è¶³çš„å°±æ˜¯æ‰€æœ‰çš„&lt;code&gt;y&lt;/code&gt;è¦ç»„æˆä¸€ä¸ª&lt;em&gt;è·¯å¾„(path)&lt;/em&gt;, å¯¹äºæ—¢ä¸æ˜¯èµ·ç‚¹åˆä¸æ˜¯ç»ˆç‚¹çš„ä¸€ä¸ªèŠ‚ç‚¹&lt;code&gt;v&lt;/code&gt;, è¿˜æ˜¯å¾ˆå¥½å†™çš„, ç±»ä¼¼flot: &lt;code&gt;sum(è¿›å…¥vçš„y_e) = sum(ä»væµå‡ºçš„y_e)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;å¯¹äºèµ·ç‚¹&lt;code&gt;v_start&lt;/code&gt;æ¥è¯´, å…¶å®ä¹Ÿä¸éš¾: &lt;code&gt;sum(è¿›å…¥v_startçš„y_e) = sum(ä»v-startæµå‡ºçš„y_e)+1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¯¹äºç»ˆç‚¹çš„è¯, æœ‰ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬ä¸çŸ¥é“è½¦ä¼šåœåœ¨å“ªé‡Œ! Manuå¤ªèªæ˜äº†, å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹&lt;code&gt;v&lt;/code&gt;å¼•å…¥äº†å¦ä¸€ä¸ªå˜é‡&lt;code&gt;f_v&lt;/code&gt;,å–å€¼èŒƒå›´ä¹Ÿæ˜¯{0,1}, å¦‚æœåœ¨èŠ‚ç‚¹&lt;code&gt;v&lt;/code&gt;åœä¸‹æ¥, é‚£ä¹ˆ&lt;code&gt;f_v&lt;/code&gt;ç­‰äº1, å¦åˆ™å°±æ˜¯0. æ‰€ä»¥ä¸Šé¢çš„çº¦æŸå¯ä»¥å†™æˆ: &lt;code&gt;sum(è¿›å…¥vçš„y) = sum(ä»væµå‡ºçš„y_e)+f_v&lt;/code&gt;. å¦å¤–åˆ«å¿˜äº†åªèƒ½åœåœ¨ä¸€ä¸ªèŠ‚ç‚¹, æ‰€ä»¥å†åŠ çº¦æŸ: &lt;code&gt;sum(æ‰€æœ‰çš„f_v)=1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šçš„ç›®æ ‡å‡½æ•°ä»¥åŠçº¦æŸ, è™½ç„¶æ•°ç›®åºå¤§, ä½†æ˜¯éƒ½æ˜¯çº¿æ€§çš„, æ‰€ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°çº¿æ€§è§„åˆ’é—®é¢˜, å†™æˆæ•°å­¦å½¢å¼å°±æ˜¯: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;h2 id="cong-solutionde-dao-lu-jing"&gt;ä»solutionå¾—åˆ°è·¯å¾„&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ä¸Šé¢é‚£ä¸ªçº¿æ€§è§„åˆ’é—®é¢˜è§£å†³äº†, æˆ‘ä»¬å¾—åˆ°çš„å°†ä¼šæ˜¯é‚£äº›å˜é‡&lt;code&gt;x&lt;/code&gt;,&lt;code&gt;y&lt;/code&gt;,ä»¥åŠ&lt;code&gt;f&lt;/code&gt;, ä½†æ˜¯éœ€è¦ä»ä¸­æå–ä¸€æ¡è·¯å¾„æœ€åæ‰èƒ½ä½œä¸ºsolution!! &lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜å®é™…ä¸Šå¯ä»¥å½’ç»“ä¸º: ç»™å®šä¸€ä¸ªä¸€ç¬”ç”»çš„æ›²çº¿(å…¶å®å°±æ˜¯é‚£äº›&lt;code&gt;y&lt;/code&gt;: å¯ä»¥æƒ³è±¡æŠŠæ¯æ¡è¾¹éƒ½å¤åˆ¶&lt;code&gt;y&lt;/code&gt;æ¬¡, å¾—åˆ°çš„å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªæ›²çº¿äº†), æ‰¾å‡ºä¸€ä¸ªå¯ä»¥å°†å…¶ä¸€ç¬”ç”»å‡ºæ¥çš„è·¯å¾„(è¿™æ¡è·¯å¾„ä¹Ÿå«"æ¬§æ‹‰è·¯å¾„", æ²¡"æ±‰å¯†å°”é¡¿è·¯å¾„"æœ‰å). èªæ˜çš„Manuå¾ˆå¿«æƒ³å‡ºæ¥ä¸€ä¸ªç®—æ³•(æˆ‘ä»¬å«å®ƒ"Orsiniç®—æ³•"): å¤§æ„æ˜¯å½“èµ°åˆ°åº•æ²¡æœ‰èµ°å®Œçš„æ—¶å€™, æŠŠé‚£äº›é”™è¿‡çš„è·¯å¾„å¤¹åœ¨åŸè·¯å¾„çš„ä¸­é—´å°±å¥½äº†. &lt;/p&gt;
&lt;p&gt;ç®—æ³•æè¿°å¦‚ä¸‹: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;i) ä»èµ·ç‚¹å¼€å§‹å‡ºå‘èµ°, æŠŠèµ°è¿‡çš„è¾¹æ¶‚ä¸Šé¢œè‰²(ä»¥åä¸èƒ½å†èµ°), åªè¦è¿˜å¯ä»¥ç»§ç»­èµ°(è¿˜æœ‰æ²¡æœ‰ç€è‰²çš„è¾¹å¯èµ°)å°±ä¸€ç›´èµ°ä¸‹å», ä¸€ç›´åˆ°æ— è·¯å¯èµ°. (åº”è¯¥ä¼šåœåœ¨&lt;code&gt;f=1&lt;/code&gt;çš„åœ°æ–¹), å¾—åˆ°è·¯å¾„&lt;code&gt;p0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ii)  å¦‚æœæ‰€æœ‰è¾¹å·²ç»è¢«èµ°è¿‡äº†: &lt;strong&gt;over&lt;/strong&gt;. å¦‚æœæ²¡æœ‰: æ‰¾ä¸€ä¸ªæ²¡æœ‰èµ°è¿‡çš„è¾¹ä¸&lt;code&gt;p0&lt;/code&gt;çš„äº¤å‰ç‚¹: &lt;code&gt;v&lt;/code&gt;(å¦‚æœæ‰¾ä¸åˆ°çš„è¯è¯´æ˜æœ‰é—®é¢˜: åé¢å°±é‡åˆ°è¿™ä¸ªé—®é¢˜äº†), ç„¶åæ‰§è¡Œ(iii)&lt;/p&gt;
&lt;p&gt;iii) ä»&lt;code&gt;v&lt;/code&gt;å‡ºå‘, åœ¨è¿›è¡Œç±»ä¼¼(i)çš„æ“ä½œå¾—åˆ°ä¸€æ¡è·¯å¾„(åº”è¯¥æ˜¯ä¸€ä¸ªç¯), ç„¶åæŠŠ&lt;code&gt;p0&lt;/code&gt;ä»&lt;code&gt;v&lt;/code&gt;é‚£é‡ŒåŠˆå¼€, æŠŠè¿™ä¸ªç¯å¡åˆ°ä¸­é—´ç»„æˆæ–°çš„&lt;code&gt;p0&lt;/code&gt;, ç„¶åå†æ‰§è¡Œ(ii).  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„è·¯å¾„äº†. &lt;/p&gt;
&lt;h2 id="yi-kai-shi-de-xiang-fa"&gt;ä¸€å¼€å§‹çš„æƒ³æ³•&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šçš„å»ºæ¨¡æ˜¯é’ˆå¯¹ä¸€è¾†è½¦çš„, æˆ‘ä»¬ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯: å¯¹ä¸€è¾†è½¦è¿›è¡Œè¿™ä¸ªæ“ä½œ, å¾—åˆ°ç»“æœä»¥åæ›´æ–°ä¸€ä¸‹&lt;code&gt;G&lt;/code&gt;(æŠŠé‚£äº›å·²ç»èµ°è¿‡çš„è¡—é“çš„é•¿åº¦è®¾ä¸º0, ç„¶åå†èµ°ä¸‹ä¸€è¾†è½¦... è¿™æ ·è·‘8æ¬¡å°±èƒ½å¾—åˆ°æœ€ä¼˜è§£äº†. &lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡çœ‹èµ·æ¥&lt;em&gt;ä¼¼ä¹&lt;/em&gt;éƒ½éå¸¸å®Œç¾......&lt;/p&gt;
&lt;h1 id="iiyu-dao-de-wen-ti_1"&gt;II.é‡åˆ°çš„é—®é¢˜&lt;/h1&gt;
&lt;h2 id="ji-suan-neng-li-wen-ti"&gt;è®¡ç®—èƒ½åŠ›é—®é¢˜&lt;/h2&gt;
&lt;p&gt;å†™å¥½äº†AMPLçš„ç¨‹åºä»¥å, æˆ‘ä»¬é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯: è¿™ä¹ˆå¤§çš„é—®é¢˜, ä¸€èˆ¬ç”µè„‘ç®—ä¸å‡ºæ¥(æ›¾ç»ç”¨glpkè®©ç”µè„‘è·‘äº†ä¸€å¤œ, è¿˜æ˜¯æ²¡æœ‰å¾—åˆ°ç»“æœ). &lt;/p&gt;
&lt;p&gt;åæ¥é—®è€å¸ˆ, è€å¸ˆè¯´glpkå¹¶ä¸æ˜¯éå¸¸é«˜æ•ˆçš„æ±‚è§£å™¨, ç„¶åæ¨èç»™äº†æˆ‘ä»¬ä¸€ä¸ªéå¸¸ç»™åŠ›çš„ç½‘ç«™: &lt;a href="http://neos-server.org/neos/"&gt;NEOS&lt;/a&gt; ! è¿™ä¸ªç½‘ç«™å¯ä»¥è®©äººä¸Šä¼ AMPLç¨‹åº, ç„¶åç”¨å®ƒä»¬çš„æœåŠ¡å™¨è·‘, è€Œä¸”ä½¿ç”¨çš„æ±‚è§£å™¨ä¹Ÿæ˜¯å•†ç”¨çš„, æ¯”å¼€æºæ±‚è§£å™¨å¿«çš„ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§(æˆ‘ä»¬å‘ç°æœ€å¿«çš„æ±‚è§£å™¨æ˜¯&lt;em&gt;Gurobi&lt;/em&gt;, ååˆ†ç»™åŠ›). &lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¸€æ¥è®¡ç®—çš„é—®é¢˜å°±è§£å†³äº†, ä½†æ˜¯æˆ‘ä»¬å¾ˆå¿«å‘ç°ä¸€ä¸ªæ›´ä¸¥é‡çš„é—®é¢˜, æ˜¯æˆ‘ä»¬çš„å»ºæ¨¡é‡Œçš„ä¸€ä¸ªä¸¥é‡ç¼ºé™·...&lt;/p&gt;
&lt;h2 id="subtourwen-ti"&gt;subtouré—®é¢˜&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å…´å†²å†²çš„æ‹¿NEOSçš„ç»“æœè·‘Orsiniç®—æ³•çš„æ—¶å€™, å‘ç°æ€»æ˜¯æŠ¥é”™: ä¹Ÿå°±æ˜¯åœ¨ç¬¬äºŒæ­¥, ç¨‹åºæ— æ³•æ‰¾åˆ°ä¸€ä¸ªå’Œ&lt;code&gt;p0&lt;/code&gt;æœ‰äº¤å‰ç‚¹çš„è¾¹: &lt;em&gt;ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬çš„æ¨¡å‹å¾—åˆ°çš„è·¯å¾„å¹¶ä¸æ˜¯åªæœ‰ä¸€ä¸ªconnected component!!! &lt;/em&gt;ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¾—åˆ°çš„è§£å…¶å®æ˜¯ä¸€æ¡ä»èµ·ç‚¹åˆ°æŸä¸ªç»ˆç‚¹çš„è·¯å¾„, å¤–åŠ å¾ˆå¤šå’Œè¿™ä¸ªè·¯å¾„æ²¡æœ‰äº¤ç‚¹çš„åœˆåœˆ(subtour)!&lt;/p&gt;
&lt;p&gt;æ˜¯å•Š, è¿™ä¸ªé—®é¢˜å¾ˆç±»ä¼¼æ—…è¡Œå•†é—®é¢˜(TSP), è€ŒTSPçš„å›°éš¾ä¹‹ä¸€ å°±æ˜¯è¦è§£å†³subtourçš„è¯éœ€è¦åŠ å…¥2^nä¸ªæ–°çš„çº¦æŸ.... 2^10000ä¸ªçº¦æŸ? impossible...&lt;/p&gt;
&lt;h1 id="iii-subtourwen-ti-de-jie-jue_1"&gt;III. subtouré—®é¢˜çš„"è§£å†³"&lt;/h1&gt;
&lt;h2 id="ge-chong-jiu-jie"&gt;å„ç§çº ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸€æ¬¡PCä¸Šæœ‰ä¸€é“é¢˜ç›®ä»‹ç»äº†TSP subtouré—®é¢˜çš„ä¸€ç§å»ºæ¨¡æ–¹å¼, "potentiel"å»ºæ¨¡, å¯ä»¥é˜²æ­¢åŠ å…¥2^nä¸ªçº¦æŸ: ä¸ºæ¯ä¸ªèŠ‚ç‚¹&lt;code&gt;v&lt;/code&gt;å¼•å…¥æ–°çš„å˜é‡&lt;code&gt;u_v&lt;/code&gt;,&lt;code&gt;u_v&lt;/code&gt;ä»£è¡¨äº†èŠ‚ç‚¹&lt;code&gt;v&lt;/code&gt;è¢«è®¿é—®çš„é¡ºåº, çº¦æŸåšçš„éå¸¸å·§å¦™, æ˜¯è¿™æ ·çš„: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/pasted_image002.png"/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·, å½“&lt;code&gt;x_ij&lt;/code&gt;æ˜¯1çš„æ—¶å€™, å°±ä¿è¯&lt;code&gt;u_j&lt;/code&gt;æ¯”&lt;code&gt;u_i&lt;/code&gt;å¤§1, è€Œå½“&lt;code&gt;x_ij&lt;/code&gt;æ˜¯0çš„æ—¶å€™, è¿™ä¸ªçº¦æŸåˆ™éå¸¸æ¾å¼›, å‡ ä¹ç›¸å½“äºæ²¡æœ‰. &lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¸ªæ–¹æ³•å¥—åˆ°æˆ‘ä»¬è¿™ä¸ªprojetçš„è¯ä¹Ÿæœ‰é—®é¢˜: é‚£å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ª&lt;code&gt;u_v&lt;/code&gt;, æ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ€å¤šè®¿é—®ä¸€æ¬¡.... ä¸è¿‡æˆ‘ä»¬å¾ˆå¿«æƒ³åˆ°äº†åŠæ³•: æŠŠæ‰€æœ‰èŠ‚ç‚¹å¤åˆ¶ä¸€ä¸ª(å¤åˆ¶"ä¸€å±‚"), ç„¶åæ¯æ¡è¾¹çš„è¯ä¹Ÿè¿›è¡Œå¤åˆ¶, åŒæ—¶åŠ ä¸Šé‚£äº›è¿æ¥å„å±‚çš„è¾¹. &lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­, åŸæ¥çš„ä¸€æ¡è¾¹æ˜¯: &lt;code&gt;(u, v)&lt;/code&gt;, æˆ‘ä»¬å¤åˆ¶äº†ä¸€å±‚, è¿™äº›æ–°èŠ‚ç‚¹å«å®ƒä»¬&lt;code&gt;u',v&lt;/code&gt;',... é‚£ä¹ˆåœ¨è¿™ä¸ªä¸¤å±‚çš„å›¾é‡Œ, æˆ‘ä»¬è¦æŠŠåŸæ¥çš„è¿™æ¡è¾¹å˜æˆ4æ¡: &lt;code&gt;(u, v)&lt;/code&gt;, &lt;code&gt;(u, v')&lt;/code&gt;, &lt;code&gt;(u', v)&lt;/code&gt; å’Œ &lt;code&gt;(u', v')&lt;/code&gt;. è¿™æ ·å°±å¯ä»¥ä¿è¯è·¯å¾„å¯ä»¥ç»è¿‡ä¸€ä¸ªç‚¹ä¸¤æ¬¡äº†, å¦‚æœæƒ³è¦ä¿è¯å¯ä»¥ç»è¿‡ä¸€ä¸ªç‚¹Kæ¬¡, åªè¦åšKå±‚å°±å¥½äº†(æ¯æ¡è¾¹å˜æˆK^2æ¡). &lt;/p&gt;
&lt;p&gt;ç„¶å, &lt;code&gt;x&lt;/code&gt;ä¹Ÿä¸éœ€è¦äº†, å› ä¸ºæ¯æ¡è¾¹çš„&lt;code&gt;y&lt;/code&gt;æœ€å¤§å°±æ˜¯1. ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ç›®æ ‡å‡½æ•°, ç”±äºä¸€æ¡è¾¹å˜æˆäº†å››æ¡, å¦‚æœèµ°å››éçš„è¯å°±å¤šç®—äº†å››æ¬¡è¿™æ¡è¾¹çš„é•¿åº¦... æœ‰ä¸¤ç§è§£å†³åŠæ³•: ä¸€æ˜¯ç±»ä¼¼å‰é¢çš„æ–¹æ³•, ç»™æ¯æ¡è¾¹æŒ‡å®šå®šä¸€ä¸ªindicatrice, è¿™æ ·å°±ä¸ä¼šé‡å¤äº†, è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„åŠæ³•æ˜¯, åœ¨å››æ¡è¾¹é‡Œ, åªå–ä¸€æ¡è¾¹çš„é•¿åº¦ä¿æŒä¸å˜, å…¶ä»–é•¿åº¦éƒ½è®¾æˆ0, ç®—æ³•è‡ªç„¶ä¼šä¼˜å…ˆèµ°é‚£æ¡é•¿åº¦ä¸æ˜¯0çš„è¾¹(è¿™ä¸ªæ²¡æœ‰ä»”ç»†è¯æ˜, ä¸è¿‡è²Œä¼¼æ˜¯è¿™æ ·çš„). æˆ‘ä»¬é‡‡ç”¨äº†ç¬¬äºŒä¸ªåŠæ³•.... &lt;/p&gt;
&lt;p&gt;å°±è¿™æ ·åºŸäº†å¥½å¤§åŠŸå¤«, å†™å¥½äº†ä¸¤å±‚èŠ‚ç‚¹çš„ç¨‹åº, é€å»NEOSä¸€è·‘.... è¶…æ—¶äº†(è¶…è¿‡8håNEOSä¼šè‡ªåŠ¨åœæ­¢æ±‚è§£è¿‡ç¨‹)... åæ¥æˆ‘ä»¬å‘ç°å³ä½¿æ˜¯ä¸å¤šåŠ æ–°ä¸€å±‚çš„ç¨‹åº, ä¹Ÿä¼šè¶…æ—¶. é‚£èŠ‚PCé‡Œä¹Ÿè¯´, è¿™ç§å»ºæ¨¡æ–¹æ³•å®é™…ä¸Šè®¡ç®—æ•ˆç‡æ¯”åŠ å…¥2^Nä¸ªçº¦æŸçš„å»ºæ¨¡è¿˜è¦å·®... &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ€»ç»“ä¸€ä¸‹å°±æ˜¯: é—®é¢˜è¿˜æ˜¯æ²¡æœ‰è§£å†³...&lt;/p&gt;
&lt;h2 id="rao-guo-subtourwen-ti"&gt;ç»•è¿‡subtouré—®é¢˜&lt;/h2&gt;
&lt;p&gt;å°±åœ¨ä¸€ç­¹è«å±•ä¹‹é™…, Manuæè®®æŠŠæœç´¢çš„èŒƒå›´ç¼©å°: ä¸ç”¨æ•´ä¸ªå·´é»çš„æ•°æ®, åªå–èµ·ç‚¹é™„è¿‘çš„åŒºåŸŸ, è¿™æ ·çš„è¯, è¯´ä¸å®šæˆ‘ä»¬åŸå…ˆçš„æ¨¡å‹å¾—åˆ°çš„ç»“æœä¼šå°‘ä¸€ç‚¹connected components... è¯•äº†ä¸€ä¸‹, æœç„¶! è™½ç„¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚è·¯å¾„çš„è¿é€šæ€§, å¾—åˆ°çš„ç»“æœç¡®å®(å‡ ä¹)åªæœ‰ä¸€ä¸ªè”é€šåˆ†æ”¯! &lt;/p&gt;
&lt;p&gt;åæ¥å°±æƒ³åˆ°äº†ä¸€ä¸ªå¾ˆèªæ˜çš„åŠæ³•: ç”¨å…«å€çš„Tä½œä¸ºæ—¶é—´é™åˆ¶, è®©ä¸€è¾†è½¦å»è·‘, ç”±äºæ—¶é—´å¾ˆå……åˆ†, æˆ‘ä»¬å¾—åˆ°çš„è§£åº”è¯¥ä¸å¤ªä¼šå‡ºç°å¤šä¸ªè”é€šåˆ†æ”¯, ç„¶åä¸€æ—¦å¾—åˆ°äº†è¿™ä¸ªè·¯å¾„(åæ¥æˆ‘ä»¬å«å®ƒ"big path"), åªéœ€è¦æŠŠå®ƒåˆ†æˆ8æ®µ, æ¯è¾†è½¦å…ˆä»èµ·ç‚¹(å·´é»è°·æ­Œ)è·‘åˆ°æ¯ä¸€æ®µçš„å¼€å¤´, ç„¶åæ²¿ç€è¿™æ¡è·¯è·‘å°±å¥½äº†å•Š!! è™½ç„¶ä»å·´é»è°·æ­Œè·‘åˆ°æ¯ä¸€æ®µçš„èµ·ç‚¹ä¼šç¨å¾®æµªè´¹ä¸€äº›æ—¶é—´, ä½†æ˜¯è¿™ç‚¹æŸå¤±å…¶å®å¾®ä¸è¶³é“!! è€Œä¸”ä¹Ÿä¸ç”¨è·‘8æ¬¡LPè¿™ä¹ˆéº»çƒ¦äº† -- è¦æ˜¯æ—©ç‚¹æƒ³åˆ°è¿™ä¸ªå°±å¥½äº†!!&lt;/p&gt;
&lt;p&gt;è€Œä¸”å¾ˆç¥å¥‡çš„æ˜¯, æŠŠæ—¶é—´å˜æˆäº†8Tä»¥å, æˆ‘ä»¬çš„Lpæ¨¡å‹è®¡ç®—çš„æ›´å¿«äº†: åŸå…ˆè¦è®¡ç®—30åˆ†é’Ÿå·¦å³, ç°åœ¨åªè¦å·®ä¸å¤š3åˆ†é’Ÿå°±å‡ºç»“æœäº†!! è¿™ä¸€ç‚¹æ²¡å¤ªæƒ³æ˜ç™½, å¯èƒ½æ˜¯æœç´¢çš„ç©ºé—´å˜å°äº†??&lt;/p&gt;
&lt;p&gt;è¯´å†™å°±å†™, æœ€çŸ­è·¯å¾„ç”¨Dijkstraç®—æ³•å°±èƒ½å¾—åˆ°äº†, ä¸ä¸€ä¼šå°±å†™å‡ºäº†è¿™ä¸ªæŠŠä¸€æ¡big pathå˜æˆ8æ¡small pathçš„ç¨‹åº. ç„¶åæˆ‘ä»¬ä¸€ä¸¾å¾—åˆ°äº†1957596åˆ†(ç¦»æ»¡åˆ†è¿˜å·®äº†ä¸¤åƒç±³å·¦å³)!!&lt;/p&gt;
&lt;h1 id="iv-jin-yi-bu-you-hua_1"&gt;IV. è¿›ä¸€æ­¥ä¼˜åŒ–&lt;/h1&gt;
&lt;p&gt;ä¼˜åŒ–çš„è¯æœ‰ä¸¤ä¸ªæ–¹å‘: ç¬¬ä¸€ä¸ªæ–¹å‘æ˜¯ä¿®æ”¹é‚£ä¸ªç¨‹åºä»£ç , ä½¿å¾—æ¯æ¬¡èµ°åˆ°big pathæŸæ®µèµ·ç‚¹çš„æ—¶å€™å¯ä»¥å°‘èµ°äº›è·¯, ä¸è¿‡è¿™ä¸ªæ–¹å‘åº”è¯¥æ²¡ä»€ä¹ˆå‰é€”: ç¨‹åºå†™èµ·æ¥éº»çƒ¦ä¸è¯´, å¯ä»¥æ”¹è¿›çš„ç©ºé—´ä¹Ÿå¾ˆæœ‰é™, å› ä¸ºbig pathä¸€å…±ä¹Ÿæ²¡æœ‰å‰©å¤šå°‘æ—¶é—´, æ‰€ä»¥å…«è¾†è½¦æ˜¯ä¸å¯èƒ½æŠŠbig pathèµ°å®Œçš„. ç¬¬äºŒä¸ªæ–¹å‘åˆ™æ˜¯è®¾æ³•ä¼˜åŒ–big pathçš„æ—¶é—´ä½¿ç”¨, ä½¿å¾—å®ƒåœ¨å¾—åˆ°æœ€é•¿è·¯å¾„çš„åŒæ—¶ä½¿ç”¨å°½é‡å°‘çš„æ—¶é—´. &lt;/p&gt;
&lt;h2 id="yin-ru-shi-jian-zheng-ze-xiang"&gt;å¼•å…¥æ—¶é—´æ­£åˆ™é¡¹&lt;/h2&gt;
&lt;p&gt;å…¶å®8Tä½œä¸ºæ—¶é—´æ¥è¯´éå¸¸å……è£•, ä½†æ˜¯æˆ‘ä»¬çš„è§£é‡Œé¢, big pathè¿˜æ˜¯æŠŠæ—¶é—´ç”¨çš„å·®ä¸å¤šäº†: å› ä¸ºæ—¶é—´æ ¹æœ¬æ²¡æœ‰å‡ºç°åœ¨ç›®æ ‡å‡½æ•°é‡Œ. æ‰€ä»¥, å¯ä»¥æŠŠæ—¶é—´ä¹Ÿä½œä¸ºç›®æ ‡å‡½æ•°åŠ ä¸Šå», ä¸è¿‡è¦æ³¨æ„æœ€ä¼˜å…ˆè¦ä¼˜åŒ–çš„è¿˜æ˜¯è·¯å¾„é•¿åº¦, æ‰€ä»¥æ—¶é—´é¡¹å‰é¢è¦ä¹˜ä»¥ä¸€ä¸ªéå¸¸å°çš„æ•°(æ¯”å¦‚0.000001), ç±»ä¼¼åšregularization. &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ–°çš„ç›®æ ‡å‡½æ•°æ˜¯: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/pasted_image003.png"/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¸€è¿è¡Œ, æˆ‘ä»¬çš„big pathå±…ç„¶å‰©ä¸‹äº†å…­åƒå¤šç§’çš„æ—¶é—´!!! è¿™äº›æ—¶é—´è¶³å¤Ÿå…«è¾†è½¦è·‘åˆ°å„æ®µçš„èµ·ç‚¹äº†!! æˆ‘ä»¬è¿™æ ·, å…«è¾†è½¦èµ°å®Œäº†big pathæ‰€æœ‰çš„è·¯ç¨‹å¾—åˆ°çš„ç»“æœç¦»æ»¡åˆ†åªå·®äº†7ç±³, è€Œæœ€åä¸€è¾†è½¦è¿˜æœ‰ä¸¤åƒå¤šç§’æ²¡æœ‰èµ°! &lt;/p&gt;
&lt;p&gt;æ£€æŸ¥äº†ä¸€ä¸‹, å‘ç°æœ‰ä¸€ä¸ª7ç±³é•¿çš„è·¯æ˜¯å”¯ä¸€å‰©ä¸‹æ²¡èµ°è¿‡çš„è·¯: äºæ˜¯åªè¦å†è®©æœ€åä¸€è¾†è½¦å»èµ°ä¸€ä¸‹å°±å¥½äº†(å› ä¸ºæ—¶é—´å¤Ÿç”¨), æœ€ç»ˆæˆ‘ä»¬çš„æ–¹æ¡ˆèµ°å®Œäº†æ•´ä¸ªå·´é»:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/pasted_image005.png"/&gt;&lt;/p&gt;
&lt;p&gt;ç­‰ä¸€ä¸‹, è¿™é‡Œæœ‰ç‚¹å¥‡æ€ª: ä¸ºä»€ä¹ˆä¼˜åŒ–å¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯æœ€ä¼˜çš„(æ²¡æœ‰èµ°å®Œæ‰€æœ‰çš„è·¯ç¨‹)? æˆ‘ä»¬é€šè¿‡åæ¥æ‰‹åŠ¨èµ°é‚£æ¡å‰©ä¸‹çš„è·¯éƒ½æ²¡æœ‰è¶…æ—¶, æ‰€ä»¥è¯´å…¶å®è‚¯å®šå¯ä»¥åœ¨8Tçš„æ—¶é—´èµ°éæ‰€æœ‰è¡—é“çš„! åæ¥æŸ¥äº†ä¸€ä¸‹æ‰å‘ç°, åŸæ¥Gurobiå¹¶ä¸æ˜¯è¿”å›æœ€ä¼˜è§£, è€Œæ˜¯å½“å½“å‰å¯è¡Œè§£ä¸æœ€ä¼˜è§£è¶³å¤Ÿæ¥è¿‘çš„æ—¶å€™å°±ç›´æ¥åœæ­¢, è¿™ä¸ªå‚æ•°çš„åå­—å«mipgap, æ›´å¤šå‚æ•°å¯ä»¥å‚è€ƒè¿™é‡Œ: &lt;a href="http://www.gurobi.com/documentation/6.0/ampl-gurobi-guide/parameters"&gt;http://www.gurobi.com/documentation/6.0/ampl-gurobi-guide/parameters&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆNEOSå¾—åˆ°çš„è§£ä¸æ˜¯æœ€ä¼˜çš„, ä¸è¿‡è¿˜å¥½, é€šè¿‡æœ€åæ‰‹åŠ¨æ·»åŠ é‚£æ¡æ²¡èµ°çš„è¾¹, è¿˜æ˜¯èµ°å®Œäº†æ‰€æœ‰çš„è¡—é“. &lt;/p&gt;
&lt;p&gt;............&lt;/p&gt;
&lt;p&gt;åªæ˜¯ä½œä¸ºå¼ºè¿«ç—‡çš„è¯è§‰å¾—è¿˜æ˜¯æœ‰ç‚¹......ä¸å¤Ÿå®Œç¾.&lt;/p&gt;
&lt;h2 id="zhi-jie-you-hua-shi-jian"&gt;ç›´æ¥ä¼˜åŒ–æ—¶é—´&lt;/h2&gt;
&lt;p&gt;ä»Šæ™š, æœºæ™ºçš„Manuæƒ³åˆ°äº†è§£å†³åŠæ³•: æ—¢ç„¶çŸ¥é“æ‰€æœ‰çš„è¡—é“éƒ½ä¼šè¢«èµ°é, ç›´æ¥ä¸æŠŠå®ƒçœ‹æˆç›®æ ‡, è€Œæ˜¯ç›´æ¥ä½œä¸ºçº¦æŸå¥½äº†, ç„¶åçº¦æŸç›´æ¥æ”¹æˆä¼˜åŒ–æ—¶é—´! &lt;/p&gt;
&lt;p&gt;è¦å°±ç»è¿‡æ‰€æœ‰è¡—é“çš„çº¦æŸå¾ˆç®€å•, é‚£å°±æ˜¯å¯¹ä»»ä½•è¡—é“&lt;code&gt;e&lt;/code&gt;, éƒ½æœ‰: &lt;code&gt;y_e+y_e'&amp;gt;=1&lt;/code&gt;. å¦å¤–è‚¯å®šæ‰€æœ‰è¡—é“éƒ½ä¼šç»è¿‡, &lt;code&gt;x&lt;/code&gt;å°±æ²¡æœ‰å¿…è¦å­˜åœ¨äº†. &lt;/p&gt;
&lt;p&gt;LPæ¨¡å‹è¡¨è¾¾ä¸º: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./è¿ç­¹çš„åŠ›é‡_ç”¨LPè§£å†³Google_2014_Hashcode/pasted_image004.png"/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨è¿™æ ·çš„æ¨¡å‹, æˆ‘ä»¬çš„big path çœä¸‹äº†ä¸€ä¸‡ä¸¤åƒå¤šç§’, æ‰€ä»¥æˆ‘ä»¬çš„æœ€ç»ˆç»“æœé‡Œ, æœ€åçš„ä¸€è¾†è½¦è·‘å®Œä»¥åè¿˜æœ‰9596ç§’æ²¡æœ‰ç”¨!!&lt;/p&gt;
&lt;p&gt;åˆ°è¿™ä¸€æ­¥, çœŸçš„å¯ä»¥ç®—æ˜¯å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜äº†, è€Œä¸”å¼ºè¿«ç—‡ä¹Ÿå¾—æ•‘äº†. &lt;/p&gt;
&lt;p&gt;Yeah!  : )&lt;/p&gt;</summary><category term="LP"></category><category term="algorithm"></category></entry><entry><title>ä¸€ä¸ªç®€å•çš„pythonè¿›åº¦æ¡</title><link href="https://x-wei.github.io/tech/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84python%E8%BF%9B%E5%BA%A6%E6%9D%A1.html" rel="alternate"></link><published>2014-08-14T00:00:00+02:00</published><updated>2014-08-14T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-08-14:tech/ä¸€ä¸ªç®€å•çš„pythonè¿›åº¦æ¡.html</id><summary type="html">&lt;p&gt;åœ¨å¤„ç†å¤§é‡æ•°çš„æ—¶å€™, å¦‚æœè¾“å‡ºç±»ä¼¼ "process i out of n files..." è¿™æ ·çš„å†…å®¹æ¥æŒ‡ç¤ºè¿›åº¦çš„è¯, è™½ç„¶å¯ä»¥æ˜¾ç¤ºç›®å‰çš„è¿›åº¦(ç”¨æ¥å®‰æ…°ç­‰å¾…çš„å¿ƒæƒ…...)ä½†æœ‰ä¸ªé—®é¢˜æ˜¯, å¦‚æœè¾“å‡ºäº†å¤ªå¤šè¡Œ(æ¯”å¦‚ä¸€ä¸‡è¡Œ...), å°±çœ‹ä¸åˆ°å‰é¢çš„å†…å®¹äº†... &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æƒ³æ‰¾ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹é¢çš„è¿›åº¦æ¡, å…¶å®pythonå·²ç»æœ‰äº†(ä¸æ­¢ä¸€ä¸ª)è¿›åº¦æ¡çš„åŒ…äº†, æ¯”å¦‚&lt;a href="https://pypi.python.org/pypi/progressbar/2.3-dev"&gt;progressbar&lt;/a&gt;, ä½†æ˜¯ä¸çŸ¥ä¸ºä»€ä¹ˆè¿™ä¸ªåŒ…åœ¨windowsä¸‹é¢æ²¡æœ‰èƒ½åšåˆ°åˆ·æ–°æ˜¾ç¤º -- å°±æ˜¯åˆ·æ–°è¿›åº¦çš„æ—¶å€™, æ²¡æœ‰æŠŠåŸå…ˆé‚£ä¸€è¡Œå»æ‰, è€Œæ˜¯åœ¨ä¸‹é¢å†è¾“å‡ºäº†ä¸€è¡Œ... (ä¸è¿‡åæ¥åœ¨linuxä¸‹é¢ä½¿ç”¨è¿™ä¸ªåŒ…æ˜¯æ²¡é—®é¢˜çš„, å¥½å¥‡æ€ª...)&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æƒ³åŠæ³•è‡ªå·±å†™äº†ä¸€ä¸ª, å‘ç°è¦å®ç°ä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡è¿˜æ˜¯å¾ˆç®€å•çš„, å…³é”®å°±æ˜¯ä½¿ç”¨&lt;code&gt;\r&lt;/code&gt;, è¿™æ ·ä¼šæŠŠå…‰æ ‡ç§»åŠ¨åˆ°å½“å‰è¡Œçš„å¼€å¤´: è¿™æ ·ä¸‹æ¬¡è¾“å‡ºçš„æ—¶å€™å°±ä¼šæŠŠåŸå…ˆçš„å†…å®¹å†²æ‰äº†. &lt;/p&gt;
&lt;p&gt;ä»£ç åªæœ‰ä¸åˆ°äºŒåè¡Œ: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimpleProgressBar&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="c1"&gt;# `x`: progress in percent ( between 0 and 100)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;pointer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mf"&gt;100.0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="si"&gt;%d%%&lt;/span&gt;&lt;span class="s1"&gt; [&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;]'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'#'&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;pointer&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;'.'&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;pointer&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”¨æ³•ä¹Ÿå¾ˆç®€å•, å…ˆæ–°å»ºä¸€ä¸ªSimpleProgressBarå¯¹è±¡, åœ¨è¦æ›´æ–°è¿›åº¦æ¡çš„æ—¶å€™, è°ƒç”¨updateæ–¹æ³•å³å¯...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# An example of usage...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;pb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SimpleProgressBar&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;pb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;100.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å†åæ§½ä¸€ä¸‹windows, ä¸ä»…é‚£ä¸ªprogressbarçš„åŒ…ä¸å¥½ä½¿, multiprocessingçš„åŒ…ä¹Ÿä¸å¥½ä½¿, éƒé—·... &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[08-15è¡¥å……]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åæ¥æƒ³åˆ°, æ—¢ç„¶ç”¨&lt;code&gt;\r&lt;/code&gt;å°±å¯ä»¥å®ç°åˆ·æ–°å½“å‰è¡Œ, è¿˜è¦ç”¨æ¯›çš„è¿›åº¦æ¡å•Š.... ç›´æ¥è¿™æ ·å†™å°±å¥½äº†:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'processing &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt; out od &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt; items...'&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;301&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„printæœ€åè¦åŠ é€—å· å¦åˆ™å°±æ¢è¡Œäº†...&lt;/p&gt;</summary><category term="python"></category></entry><entry><title>æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ç®€ä»‹</title><link href="https://x-wei.github.io/tech/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8%E7%AE%80%E4%BB%8B.html" rel="alternate"></link><published>2014-08-01T00:00:00+02:00</published><updated>2014-08-01T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-08-01:tech/æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ç®€ä»‹.html</id><summary type="html">&lt;p&gt;ä»¥å‰è™½ç„¶ä¹Ÿç”¨è¿‡æ­£åˆ™è¡¨è¾¾å¼(æ¯”å¦‚é‚£ä¸ªé¥®æ°´æ€æºçš„&lt;a href="http://x-wei.github.io/%E6%B0%B4%E6%BA%90PPP%E6%9D%BF%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%99%A8.html"&gt;PPPç‰ˆå›¾ç‰‡ä¸‹è½½å™¨&lt;/a&gt;...)ä½†æ˜¯é‚£æ—¶å€™åŸºæœ¬ä¸Šæ˜¯ç½‘ä¸Šåˆ°å¤„æœ ç„¶åæŠŠä»£ç æ‹¿è¿‡æ¥æ”¹, æ²¡æœ‰ç³»ç»Ÿçš„å­¦è¿‡è¿™ä¸ªä¸œè¥¿. å‰ä¸€æ®µå®ä¹ ä¸€å¼€å§‹çš„æ—¶å€™è¦å¤„ç†å¾ˆå¤§é‡çš„æ–‡æœ¬, ä»æ–‡æœ¬é‡Œæå–å‡ºéœ€è¦çš„ä¿¡æ¯, æ‰€ä»¥ç”¨åˆ°äº†ä¸å°‘çš„æ­£åˆ™è¡¨è¾¾å¼, ä¹Ÿå¥½å¥½çš„å­¦äº†ä¸€ä¸‹, ç°åœ¨å›æ¥è¿›è¡Œä¸€ä¸‹æ€»ç»“. &lt;/p&gt;
&lt;h2 id="shi-yao-shi-zheng-ze-biao-da-shi"&gt;ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼&lt;/h2&gt;
&lt;p&gt;å¾ˆå¤šæ—¶å€™,æˆ‘ä»¬éœ€è¦åœ¨æ–‡æœ¬é‡Œå¯»æ‰¾æ»¡è¶³ä¸€ç§&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;(&lt;em&gt;pattern&lt;/em&gt;)çš„ä¸€æ®µå­å­—ç¬¦ä¸²(substring), æ³¨æ„æ˜¯ä¸€ç§æ¨¡å¼è€Œä¸æ˜¯æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸². ä¸¾ä¸ªä¾‹å­, åœ¨ä¸€æ®µæ–‡æœ¬é‡Œå¯»æ‰¾è¿™é‡Œé¢å‡ºç°çš„æ‰€æœ‰çš„ç½‘å€, é‚£ä¹ˆå¯¹åº”çš„æ¨¡å¼å°±æ˜¯: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"ä»¥&lt;code&gt;www.&lt;/code&gt;å¼€å¤´, ä¸­é—´æœ‰ä¸€äº›ä¸œè¥¿(å¯ä»¥æ˜¯å­—æ¯ä¹Ÿå¯ä»¥æ˜¯æ•°å­—ç­‰), æœ€åä»¥ &lt;code&gt;.com/.org/.edu...&lt;/code&gt; ç»“å°¾çš„æ‰€æœ‰çš„å­—ç¬¦ä¸²"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å†æ¯”å¦‚, è¦æŸ¥æ‰¾æ–‡æœ¬ä¸­å‡ºç°çš„ç”µè¯å·ç , ç”µè¯å·ç çš„æ ¼å¼æ˜¯åŒºå·åŠ æ¨ªçº¿å†åŠ å·ç , é‚£ä¹ˆæ¨¡å¼å°±åº”è¯¥æ˜¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"ä»¥3ä¸ªæˆ–4ä¸ªæ•°å­—å¼€å¤´, ä¸‰ä¸ªæˆ–å››ä¸ªæ•°å­—ä¹‹åè·Ÿä¸€ä¸ªæ¨ªçº¿, æ¨ªçº¿åå†è·Ÿ7ä¸ªæˆ–8ä¸ªæ•°å­—"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å†å†æ¯”å¦‚, è¦æŸ¥æ‰¾å‡ºç°çš„ç”µå­é‚®ä»¶åœ°å€, é‚£ä¹ˆæ¨¡å¼å¤§æ¦‚æ˜¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"ä»¥å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿å¼€å¤´, ä¹‹åè·Ÿç€ä¸€ä¸ª@ç¬¦å·, @ç¬¦å·ä»¥åä¸€äº›ç”¨ç‚¹åˆ†éš”çš„å­—æ¯æˆ–æ•°å­—, æœ€ååº”è¯¥ä»¥.com/.org/.eduç­‰ç»“æŸ"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥æƒ³è±¡å®é™…åº”ç”¨ä¸­ä¼šæœ‰æè¿°èµ·æ¥æ›´åŠ ç½—å—¦çš„æ¨¡å¼, è€Œ&lt;strong&gt;æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ç”¨æ¥æè¿°è¿™ç§"æ¨¡å¼"çš„è¯­æ³•&lt;/strong&gt;, ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼, å¯ä»¥ç”¨å¾ˆç®€çŸ­çš„ä»£ç è¡¨è¾¾å¾ˆå¤æ‚çš„æ¨¡å¼. æœ‰äººç»™æ­£åˆ™è¡¨è¾¾å¼èµ·äº†ä¸ªåˆ«åå«"&lt;em&gt;å­—ç¬¦ä¸²æ¨¡æ¿&lt;/em&gt;", å…¶å®æ›´è´´åˆ‡... &lt;/p&gt;
&lt;p&gt;è¿˜æœ‰, åé¢æ€»æ˜¯ä¼šæåˆ°"æŸä¸ªæ­£åˆ™è¡¨è¾¾å¼&lt;em&gt;exp&lt;/em&gt;åŒ¹é…(match)äº†æŸä¸ªå­—ç¬¦ä¸²&lt;em&gt;str&lt;/em&gt;", è¿™é‡Œè¯´&lt;strong&gt;"åŒ¹é…"&lt;/strong&gt;çš„æ„æ€å…¶å®æ˜¯&lt;em&gt;"å­—ç¬¦ä¸²stræ»¡è¶³äº†æ­£åˆ™è¡¨è¾¾å¼expæè¿°çš„é‚£ç§æ¨¡å¼"&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;å…³äºæ­£åˆ™è¡¨è¾¾å¼, &lt;a href="http://deerchao.net/tutorials/regex/regex.htm"&gt;è¿™ç¯‡åšå®¢&lt;/a&gt;å¯ä»¥è¯´æ˜¯ç»å…¸ä¹‹ä½œ, æœç´¢"æ­£åˆ™è¡¨è¾¾å¼"è¿™ç¯‡æ–‡ç« å‡ ä¹éƒ½æ˜¯ç¬¬ä¸€ä¸ªè¢«æ‰¾åˆ°çš„. æ¯æ¬¡æˆ‘æœ‰é—®é¢˜éƒ½è¦å†ç¿»å‡ºæ¥çœ‹ä¸€ä¸‹è¿™ç¯‡, è®²çš„éå¸¸å¥½. &lt;/p&gt;
&lt;p&gt;å¦å¤–å¼ºçƒˆæ¨èä¸€ä¸ªéå¸¸èµçš„åœ¨çº¿æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼çš„ç½‘ç«™: &lt;a href="http://regex101.com/"&gt;http://regex101.com/&lt;/a&gt; åšå¾—è¶…çº§æ£’(å…·ä½“æ€ä¹ˆæ£’è§åæ–‡).&lt;/p&gt;
&lt;h2 id="pi-pei-dan-ge-zi-fu"&gt;åŒ¹é…å•ä¸ªå­—ç¬¦&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…æŸä¸ª&lt;em&gt;ç‰¹å®šçš„&lt;/em&gt;å­—ç¬¦:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åªéœ€è¦å†™å‡ºæ¥å°±å¥½äº†, ç±»ä¼¼äºè®°äº‹æœ¬çš„æŸ¥æ‰¾åŠŸèƒ½. 
ex. æŸ¥æ‰¾"abc"è¿™ä¸ªå­—ç¬¦ä¸², æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯: &lt;code&gt;abc&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…&lt;em&gt;æŸä¸€ç±»&lt;/em&gt;å­—ç¬¦:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯”å¦‚åŒ¹é…æ•°å­—, åªéœ€è¦æŠŠå€™é€‰çš„å­—ç¬¦æ”¾è¿›&lt;strong&gt;ä¸­æ‹¬å·&lt;/strong&gt;, è€Œä¸”å¯ä»¥ç”¨æ¨ªçº¿è¡¨ç¤ºä¸€ç³»åˆ—çš„å­—ç¬¦:&lt;/p&gt;
&lt;p&gt;ex. åŒ¹é…ä¸€ä¸ªæ•°å­—: &lt;code&gt;[0-9]&lt;/code&gt;
ex. åŒ¹é…å¤§å†™çš„ä¸€ä¸ªå­—æ¯: &lt;code&gt;[A-Z]&lt;/code&gt;
ex. åŒ¹é…ä¸€ä¸ªæ•°å­—æˆ–å­—æ¯(å¤§å°å†™éƒ½å¯ä»¥): &lt;code&gt;[A-Za-z0-9]&lt;/code&gt;
ex. åŒ¹é…ä¸€ä¸ªå…ƒéŸ³å­—æ¯(aeiouä¸­çš„ä¸€ä¸ª): [aeiou]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…æŸä¸€ç±»ä»¥å¤–çš„å­—ç¬¦:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¿™ä¸€ç±»å­—ç¬¦å‰é¢åŠ ä¸Š&lt;code&gt;^&lt;/code&gt;, èµ·åˆ°çš„ä½œç”¨å°±æ˜¯å–è¿™äº›å­—ç¬¦çš„è¡¥é›†(&lt;strong&gt;"åä¹‰"&lt;/strong&gt;).
ex. åŒ¹é…ä¸€ä¸ªä¸æ˜¯æ•°å­—çš„å­—ç¬¦: &lt;code&gt;[^0-9]&lt;/code&gt;
ex. åŒ¹é…ä»»æ„ä¸€ä¸ªä¸æ˜¯å…ƒéŸ³å­—æ¯çš„å­—ç¬¦: &lt;code&gt;[^aeiou]&lt;/code&gt;
ex. åŒ¹é…ä»¥bå¼€å¤´, ä»¥dç»“å°¾çš„ä¸‰ä¸ªå­—æ¯é•¿çš„å•è¯: &lt;code&gt;b[a-z]d&lt;/code&gt;, "bed", "bad"éƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨åˆ°çš„çš„ç‰¹æ®Šå­—ç¬¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯”å¦‚è¦åŒ¹é…'^'è¿™ä¸ªå­—ç¬¦, ç”±äºè¿™ä¸ªå­—ç¬¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼é‡Œä½¿ç”¨çš„æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦, éœ€è¦åœ¨å‰é¢åŠ &lt;strong&gt;åæ–œæ è½¬ä¹‰&lt;/strong&gt;: &lt;code&gt;\^&lt;/code&gt;
ç±»ä¼¼çš„ç‰¹æ®Šå­—ç¬¦è¿˜æœ‰ä¸å°‘:  &lt;code&gt;&amp;amp;&lt;/code&gt;, &lt;code&gt;.&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;?&lt;/code&gt;, &lt;code&gt;(&lt;/code&gt;, &lt;code&gt;)&lt;/code&gt;, &lt;code&gt;[&lt;/code&gt;, &lt;code&gt;]&lt;/code&gt;,......&lt;/p&gt;
&lt;h2 id="pi-pei-ren-yi-zi-fu"&gt;åŒ¹é…ä»»æ„å­—ç¬¦&lt;/h2&gt;
&lt;p&gt;ç”¨çš„æœ€å¤šçš„æ˜¯è¿™ä¸€ä¸ª:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦: &lt;code&gt;.&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(åœ¨å¼€å¯"å•è¡Œæ¨¡å¼"çš„æ—¶å€™, å¯ä»¥è¿æ¢è¡Œç¬¦ä¸€èµ·åŒ¹é…, è§åæ–‡.)&lt;/p&gt;
&lt;p&gt;ç„¶å, åœ¨åæ–œæ åé¢åŠ æŸäº›å­—æ¯çš„æ—¶å€™æœ‰ç‰¹æ®Šå«ä¹‰(&lt;strong&gt;"å…ƒå­—ç¬¦"&lt;/strong&gt;): &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—: &lt;code&gt;\w&lt;/code&gt;(ç”¨å‰é¢çš„&lt;code&gt;[A-Za-z0-9]&lt;/code&gt;ä¹‹ç±»çš„æ–¹æ³•ä¹Ÿå¯ä»¥åšåˆ°)&lt;/li&gt;
&lt;li&gt;åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦(ç©ºæ ¼æˆ–TAB): &lt;code&gt;\s&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŒ¹é…ä»»æ„æ•°å­—: &lt;code&gt;\d&lt;/code&gt;(ç”¨å‰é¢çš„&lt;code&gt;[0-9]&lt;/code&gt;ä¹Ÿå¯ä»¥åšåˆ°)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŠŠä¸Šé¢è¿™äº›åæ–œæ åŠ å°å†™å­—æ¯å˜æˆåæ–œæ åŠ &lt;em&gt;å¤§å†™å­—æ¯&lt;/em&gt;çš„è¯, æˆäº†å–è¡¥é›†(ç±»ä¼¼å‰é¢é‚£ä¸ª&lt;code&gt;^&lt;/code&gt;çš„ä½œç”¨)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œæ±‰å­—çš„å­—ç¬¦: &lt;code&gt;\W&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºç™½ç¬¦çš„å­—ç¬¦: &lt;code&gt;\S&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŒ¹é…ä»»æ„éæ•°å­—çš„å­—ç¬¦: &lt;code&gt;\D&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥å¦‚æœè¦åŒ¹é…, åŒ…æ‹¬æ¢è¡Œç¬¦çš„è¯, åªéœ€è¦æŠŠ&lt;code&gt;\s \S&lt;/code&gt;ä¸€èµ·ç”¨:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…æ‰€æœ‰å­—ç¬¦, åŒ…æ‹¬æ¢è¡Œç¬¦: &lt;code&gt;[\s\S]&lt;/code&gt; &lt;a href="http://bbs.csdn.net/topics/300041987"&gt;http://bbs.csdn.net/topics/300041987&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="pi-pei-wei-zhi"&gt;åŒ¹é…ä½ç½®&lt;/h2&gt;
&lt;p&gt;æœ‰æ—¶å€™è¿˜è¦æŒ‡å®šæŸäº›ä½ç½®, æ¯”å¦‚è¯´: è¦åŒ¹é…ç½‘å€, ç½‘å€è¦ä»¥"www."å¼€å¤´, æ‰€ä»¥å¦‚æœæœ‰ä¸ªç½‘å€æ˜¯: "www.abcwww.com" çš„è¯, æœ‰å¯èƒ½åŒ¹é…æˆäº†ä¸­é—´é‚£ä¸ª"www.", é‚£ä¹ˆå°±æœ‰é—®é¢˜äº†. æ‰€ä»¥è¦æŒ‡å®š"www."è¦åœ¨ä¸€ä¸ªå­—ç¬¦çš„å¼€å¤´å‡ºç°, è€Œä¸èƒ½æ˜¯åœ¨ä¸­é—´(å‰é¢ä¸èƒ½æœ‰å­—ç¬¦). &lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±ä¸æ˜¯è¦åŒ¹é…æŸä¸ªå…·ä½“çš„å­—ç¬¦ä¸², è€Œæ˜¯&lt;strong&gt;åŒ¹é…ä¸€ä¸ªä½ç½®&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…å•è¯çš„å¼€å§‹æˆ–ç»“æŸ(&lt;em&gt;word boundary&lt;/em&gt;): &lt;code&gt;\b&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å°±æ˜¯æˆ‘ä»¬å‰é¢è¯´çš„æƒ…å†µ, åªéœ€è¦åŠ ä¸Š\b, å°±ä¸ä¼šåŒ¹é…åœ¨æŸä¸ªå•è¯ä¸­é—´å‡ºç°çš„"www."äº†.
ex. åŒ¹é…ç½‘å€å¼€å¤´çš„"www.": &lt;code&gt;\bwww\.&lt;/code&gt; &lt;a href="http://regex101.com/r/oZ6aK1/1"&gt;ä¾‹å­é“¾æ¥&lt;/a&gt; â‡ å¯ä»¥æŠŠæœ€å¼€å§‹é‚£ä¸ª&lt;code&gt;\b&lt;/code&gt;å»æ‰, çœ‹çœ‹ç»“æœæœ‰ä»€ä¹ˆåŒºåˆ«. &lt;/p&gt;
&lt;p&gt;æ³¨æ„è¿™ä¸ª&lt;code&gt;\b&lt;/code&gt;å¯ä»¥æ˜¯å•è¯çš„å¼€å§‹, ä¹Ÿå¯ä»¥æ˜¯å•è¯çš„ç»“æŸ. è¿˜æ˜¯ç½‘å€çš„ä¾‹å­, å¦‚æœä¸€ä¸ªç½‘å€æ˜¯:"www.abcwww.qwert.coming.com"çš„è¯, æˆ‘ä»¬è¯´"åŒ¹é…ä»¥.com"ç»“å°¾çš„å­—ç¬¦ä¸², å°±æœ‰å¯èƒ½æ˜¯åŒ¹é…åˆ°äº†&lt;strong&gt;qwert.com&lt;/strong&gt;ing, ä¹Ÿä¼šæœ‰é—®é¢˜, æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨"com"åé¢åŠ ä¸Šä¸€ä¸ª&lt;code&gt;\b&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ex. åŒ¹é…ç½‘å€ç»“æŸå¤„çš„".com": &lt;code&gt;\.com\b&lt;/code&gt;&lt;a href="http://regex101.com/r/oZ6aK1/2"&gt;ä¾‹å­é“¾æ¥&lt;/a&gt; â‡ åŒç†å¯ä»¥çœ‹çœ‹å»æ‰&lt;code&gt;\b&lt;/code&gt;ä»¥åæœ‰ä»€ä¹ˆä¸åŒ.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åè¿™ä¸ªå…ƒå­—ç¬¦&lt;code&gt;\b&lt;/code&gt;å˜æˆå¤§å†™ä»¥åä¹Ÿæ˜¯åä¹‰, &lt;code&gt;\B&lt;/code&gt;åŒ¹é…æ‰€æœ‰ä¸æ˜¯å•è¯å¼€å¤´æˆ–ç»“æŸçš„ä½ç½®.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´: &lt;code&gt;^&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´, è€Œä¸æ˜¯æŒ‡æ¯ä¸€è¡Œçš„å¼€å¤´! (ä½†æ˜¯åœ¨"å¤šè¡Œæ¨¡å¼"æ—¶å¯ä»¥ä»£è¡¨æ¯ä¸€è¡Œçš„å¼€å¤´, è§åé¢å† ä»¥æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹çš„è®¨è®º)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ: &lt;code&gt;$&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŒæ ·æ˜¯æŒ‡æ•´ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸ. &lt;/p&gt;
&lt;h2 id="zhong-fu-ci-shu"&gt;é‡å¤æ¬¡æ•°&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªå’Œå‰é¢ä»‹ç»çš„åŒ¹é…å­—ç¬¦é…åˆèµ·æ¥(æŒ‡å®šè¦åŒ¹é…çš„å­—ç¬¦, å†æŒ‡å®šå­—ç¬¦é‡å¤çš„æ¬¡æ•°), å°±å¯ä»¥å®Œæˆå¤§éƒ¨åˆ†çš„å·¥ä½œäº†.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­—ç¬¦é‡å¤&lt;em&gt;(exactly)næ¬¡&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åªéœ€è¦æŠŠæ•°å­—næ”¾è¿›&lt;strong&gt;å¤§æ‹¬å·&lt;/strong&gt;é‡Œå°±å¯ä»¥äº†. 
ex. æ‰¾ä¸€ä¸ªå…­ä½çš„æ•°å­—, é‚£ä¹ˆå°±æ˜¯0-9çš„æ•°å­—é‡å¤6æ¬¡: &lt;code&gt;[0-9]{6}&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤&lt;em&gt;måˆ°næ¬¡&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åªéœ€è¦åœ¨å¤§æ‹¬å·é‡ŒæŠŠmå’Œnç”¨é€—å·è¿›è¡Œåˆ†éš”.
ex. æ‰¾ä¸€ä¸ª6åˆ°8ä½çš„æ•°å­—: &lt;code&gt;[0-9]{6,8}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¦é‡å¤m&lt;strong&gt;æˆ–&lt;/strong&gt;næ¬¡çš„è¯, æˆ‘æ²¡æœ‰æ‰¾åˆ°å¥½çš„å†™æ³•, å¯ä»¥ç”¨åé¢ä»‹ç»çš„åˆ†æ”¯æ¡ä»¶å®ç°, ä¸è¿‡æ¯”è¾ƒç¹ç...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤&lt;em&gt;å¤§äºç­‰äºnæ¬¡&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(é‡å¤å°äºç­‰äºnæ¬¡ç­‰ä»·äº0åˆ°mæ¬¡)
å¤§æ‹¬å·é‡Œé¢nåé¢åŠ ä¸€ä¸ªé€—å·:
ex. æ‰¾6ä½ä»¥ä¸Šçš„æ•°å­—: [0-9]{6,}&lt;/p&gt;
&lt;p&gt;å¹³æ—¶ç”¨åˆ°çš„æ¯”è¾ƒå¤šçš„æ˜¯è¦æ±‚&lt;em&gt;"é‡å¤å¤§äºç­‰äº1æ¬¡"&lt;/em&gt;æˆ–è€…&lt;em&gt;"é‡å¤å¤§äºç­‰äº0æ¬¡"&lt;/em&gt;, ç”±äºä¸Šé¢è¿™æ ·çš„å†™æ³•æœ‰çš„æ—¶å€™æ¯”è¾ƒç½—å—¦, æ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ç®€å†™:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤&lt;em&gt;å¤§äºç­‰äº1æ¬¡&lt;/em&gt;: &lt;code&gt;+&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç­‰ä»·äº &lt;code&gt;{1,}&lt;/code&gt;
ex. &lt;code&gt;goo+gle&lt;/code&gt;, å¯ä»¥åŒ¹é…"google", "gooogle", "goooogle"ç­‰, å› ä¸ºç¬¬äºŒä¸ªoå¯ä»¥å‡ºç°å¤§äºç­‰äº1æ¬¡. 
(å½“ç„¶ä¸Šé¢è¿™ä¸ªä¾‹å­ä¹Ÿå¯ä»¥åœ¨å‰ååŠ ä¸Šå•è¯è¾¹ç•Œ&lt;code&gt;\b&lt;/code&gt;, ä»¥é˜²æ­¢åŒ¹é…åˆ°æŸä¸ªé•¿å•è¯çš„ä¸­é—´)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤&lt;em&gt;å¤§äºç­‰äº0æ¬¡&lt;/em&gt;: &lt;code&gt;*&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç­‰ä»·äº &lt;code&gt;{0,}&lt;/code&gt;
ex. åŒ¹é…ä»¥aå¼€å¤´ä»¥tç»“å°¾çš„å•è¯: &lt;code&gt;a[a-z]*t&lt;/code&gt; , "at", "attachment", "act"ç­‰éƒ½ç¬¦åˆæ¡ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤ä¸€æ¬¡æˆ–0æ¬¡: &lt;code&gt;?&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç­‰ä»·äº &lt;code&gt;{0,1}&lt;/code&gt;
ex. åŒ¹é…"color"æˆ–è€…"colour": &lt;code&gt;colou?r&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="tan-lan-greedymo-shi-lan-duo-lazymo-shi"&gt;è´ªå©ª(greedy)æ¨¡å¼/æ‡’æƒ°(lazy)æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;å‰é¢ä»‹ç»çš„é‚£äº›æŒ‡å®šé‡å¤æ¬¡æ•°çš„éƒ¨åˆ†, ç”±äºæœ‰æ—¶æ˜¯æŒ‡å®šä¸€ä¸ªé‡å¤æ¬¡æ•°çš„èŒƒå›´, è€Œç»å¸¸åŒ¹é…åˆ°çš„é‡å¤çš„æ¬¡æ•°ä¹Ÿæ˜¯ä¸€ä¸ªèŒƒå›´, æ‰€ä»¥æœ‰"è´ªå©ª"å’Œ"æ‡’æƒ°"çš„åŒºåˆ«.&lt;/p&gt;
&lt;p&gt;å¥½åƒä¸Šä¸€å¥è¯æ²¡æœ‰è¯´æ¸…æ¥š... ä¸¾ä¸ªä¾‹å­, è¦åŒ¹é…å¤§äºå…­ä½çš„æ•°å­—, æˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯&lt;code&gt;[0-9]{6,}&lt;/code&gt;, æ„æ€æ˜¯è¦æœ‰å…­ä¸ªæˆ–æ›´å¤šçš„é‡å¤æ¬¡æ•°. é‚£ä¹ˆå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²: "123456789", ä¸€å…±æœ‰9ä½, å®ƒæ—¢å¯ä»¥çœ‹ä½œé‡å¤6æ¬¡(å–å‰6ä½), ä¹Ÿå¯ä»¥çœ‹ä½œé‡å¤7æ¬¡, 8æ¬¡, 9æ¬¡... é‚£ä¹ˆå²‚ä¸æ˜¯å«ä¹‰ä¸Šå‡ºç°æ­§ä¹‰(ambiguous)äº†??&lt;/p&gt;
&lt;p&gt;è€Œå®é™…ä¸Š, æˆ‘ä»¬å†™çš„è¡¨è¾¾å¼&lt;code&gt;[0-9]{6,}&lt;/code&gt;åœ¨è¿™ä¸ªä¾‹å­é‡Œæœ€ç»ˆä¼šåŒ¹é…æ‰€æœ‰çš„9ä½, è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å†™çš„è¿™ä¸ªè¡¨è¾¾å¼é»˜è®¤ä¸Šæ˜¯&lt;strong&gt;è´ªå©ªæ¨¡å¼&lt;/strong&gt;çš„, æ„æ€æ˜¯åŒ¹é…é‡å¤&amp;gt;=6æ¬¡çš„çš„é‡å¤, ä½†æ˜¯ä¼š&lt;em&gt;å°½å¯èƒ½å¤šé‡å¤&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;ä¸ä¹‹ç›¸å, &lt;strong&gt;æ‡’æƒ°æ¨¡å¼&lt;/strong&gt;çš„æ„æ€æ˜¯&lt;em&gt;å°½å¯èƒ½å°‘é‡å¤&lt;/em&gt;. &lt;strong&gt;æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤æ˜¯è´ªå©ªæ¨¡å¼&lt;/strong&gt;, è¦å¼€å¯æ‡’æƒ°æ¨¡å¼åªéœ€è¦åœ¨é‡å¤æ¬¡æ•°çš„åé¢åŠ ä¸Šä¸€ä¸ªé—®å·"&lt;code&gt;?&lt;/code&gt;".&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;+?&lt;/code&gt; : é‡å¤&amp;gt;=1æ¬¡, ä½†æ˜¯å°½é‡å°‘é‡å¤&lt;/li&gt;
&lt;li&gt;&lt;code&gt;*?&lt;/code&gt; : é‡å¤&amp;gt;=0æ¬¡, ä½†æ˜¯å°½é‡å°‘é‡å¤&lt;/li&gt;
&lt;li&gt;&lt;code&gt;??&lt;/code&gt; : é‡å¤0æˆ–1æ¬¡, ä½†æ˜¯å°½é‡å°‘é‡å¤&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{n,}?&lt;/code&gt;: é‡å¤&amp;gt;=næ¬¡, ä½†æ˜¯å°½é‡å°‘é‡å¤&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{m,n}?&lt;/code&gt;: é‡å¤måˆ°næ¬¡, ä½†æ˜¯å°½é‡å°‘é‡å¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å†æ’ä¸€å¥, è¿™ä¸ª"è´ªå©ªæ¨¡å¼çš„å¼€å¯æ ‡å¿—"&lt;code&gt;?&lt;/code&gt; å’Œ"é‡å¤æ¬¡æ•°çš„ç¬¦å·"&lt;code&gt;?&lt;/code&gt; è™½ç„¶éƒ½æ˜¯é—®å·, ä½†æ˜¯ç”±äºæ”¾çš„ä½ç½®ä¸ä¸€æ ·, æ‰€ä»¥ä¸ä¼šé€ æˆæ­§ä¹‰, å› ä¸º"é‡å¤æ¬¡æ•°çš„ç¬¦å·"çš„é—®å·æ˜¯å‡ºç°åœ¨"åŒ¹é…å­—ç¬¦"(æ¯”å¦‚&lt;code&gt;\w&lt;/code&gt;, &lt;code&gt;[0-9]&lt;/code&gt;, &lt;code&gt;.&lt;/code&gt;)çš„åé¢çš„, è€Œ"è´ªå©ªæ¨¡å¼çš„å¼€å¯æ ‡å¿—"çš„é—®å·æ˜¯å‡ºç°åœ¨"é‡å¤æ¬¡æ•°"(å¦‚&lt;code&gt;{m,n}&lt;/code&gt;, &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;)çš„åé¢çš„...&lt;/p&gt;
&lt;h2 id="fen-zhi-tiao-jian-alternative"&gt;åˆ†æ”¯æ¡ä»¶(alternative)&lt;/h2&gt;
&lt;p&gt;æ„æ€å°±æ˜¯å¯ä»¥åŒ¹é…ä¸¤ç§æ¨¡å¼çš„ä»»æ„ä¸€ç§, çœ‹ä¾‹å­:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ex1. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸­å›½çš„ç”µè¯å·ç æœ‰çš„åŸå¸‚æ˜¯ä¸‰ä½åŒºå·åŠ æ¨ªçº¿åŠ å…«ä½å·ç (æ¯”å¦‚"021-54749110" â‡ è¿™æ˜¯ä¸Šæµ·ä¸€æ‰€å­¦æ ¡çš„ä¿å«å¤„å·ç ), æœ‰çš„æ˜¯å››ä½åŒºå·åŠ æ¨ªçº¿åŠ ä¸ƒä½æˆ–å…«ä½å·ç çš„(æ¯”å¦‚"0635-8238080" â‡ è¿™æ˜¯å±±ä¸œä¸€æ‰€å¤§å­¦çš„ä¿å«å¤„, ä»¥åŠ"0531-88881234" â‡ è¿™æ˜¯å±±ä¸œå°å°ä¹ˆå“¥çš„å·ç ==...). è¦åŒ¹é…è¿™æ ·çš„å·ç , å¦‚æœè¿™æ ·å†™:
&lt;code&gt;\d{3,4}-\d{7,8}&lt;/code&gt;
(åˆ«å¿˜äº†&lt;code&gt;\d&lt;/code&gt;ç­‰ä»·äº&lt;code&gt;[0-9]&lt;/code&gt;)
é‚£ä¹ˆå…¶å®æ˜¯ä¸å¯¹çš„, å› ä¸ºæˆ‘ä»¬ä¸å…è®¸å‡ºç°3ä½åŒºå·åé¢è·Ÿ7ä½å·ç çš„æƒ…å†µå‡ºç°, æ‰€ä»¥è¿™é‡Œå…¶å®æ˜¯ä¸¤ç§æ¨¡å¼, æ‰€ä»¥æˆ‘ä»¬æ˜¯è¦&lt;strong&gt;åŒ¹é…è¿™ä¸¤ç§æ¨¡å¼å…¶ä¸­çš„ä»»æ„ä¸€ç§&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µä¸‹, åªéœ€è¦æŠŠä¸¤ç§æƒ…å†µåˆ†åˆ«å†™å‡ºæ¥, ä¸­é—´ç”¨&lt;code&gt;|&lt;/code&gt;åˆ†å‰²å³å¯:
&lt;code&gt;\d{3}-\d{8}|\d{4}-\d{7,8}&lt;/code&gt;
ä¸è¿‡çœ‹èµ·æ¥æœ‰ç‚¹ä¹±äº†... å¯ä»¥åŠ ä¸Šå°æ‹¬å·è¿™æ ·æ˜¾å¾—æ›´æ¸…æ¥šä¸€äº›: 
&lt;code&gt;(\d{3}-\d{8})|(\d{4}-\d{7,8})&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å°æ‹¬å·åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢é™¤äº†è®©æ­£åˆ™è¡¨è¾¾å¼(ç¨å¾®)æ›´å®¹æ˜“è¯»ä»¥å¤–, è¿˜æœ‰ä¸€ä¸ªä½œç”¨æ˜¯åé¢æåˆ°çš„"åˆ†ç»„"æˆ–è€…"æ•è·", è¿™ä¸ªåé¢å†è¯´...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ex2.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‰é¢è¯´åˆ°è¿‡æ€ä¹ˆåŒ¹é…é‡å¤m&lt;strong&gt;æˆ–&lt;/strong&gt;næ¬¡çš„æ•°å­—, æˆ‘æ²¡æœ‰æ‰¾åˆ°æ›´æ–¹ä¾¿çš„æ–¹æ³•, åªå¥½ç”¨åˆ†æ”¯æ¡ä»¶å®ç°äº†:
&lt;code&gt;\d{m}|\d{n}&lt;/code&gt;
ä½†æ˜¯è¦æ³¨æ„, è¿™ä¸ªæ—¶å€™ä¼šæœ‰å’Œå‰é¢è´ªå©ª/æ‡’æƒ°ç±»ä¼¼çš„é—®é¢˜: å¦‚æœä¸€ä¸²æ•°å­—æœ‰9ä½é•¿, æˆ‘è¦åŒ¹é…6ä½æˆ–9ä½çš„æ•°å­—, é‚£ä¹ˆåº”è¯¥åŒ¹é…åˆ°å“ªé‡Œå‘¢? &lt;/p&gt;
&lt;p&gt;å…¶å®è¿™ä¸ªæ—¶å€™å–å†³äºæˆ‘ä»¬æ˜¯å†™&lt;code&gt;\d{9}|\d{6}&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;\d{6}|\d{9}&lt;/code&gt;, æ­£åˆ™è¡¨è¾¾å¼æœ‰ç±»ä¼¼äºç¼–ç¨‹è¯­è¨€é‡Œçš„"&lt;strong&gt;æ¡ä»¶çŸ­è·¯&lt;/strong&gt;"(shortcut)æ€§è´¨, ä¸€æ—¦ç¬¬ä¸€ä¸ªæ¨¡å¼æ»¡è¶³äº†, å°±ä¸ä¼šå»å¯»æ‰¾ç«–çº¿åé¢çš„ç¬¬äºŒä¸ªæ¨¡å¼äº†...&lt;/p&gt;
&lt;h2 id="xiao-gua-hao-dui-jie-guo-jin-xing-fen-zu-group-bu-huo"&gt;å°æ‹¬å·: å¯¹ç»“æœè¿›è¡Œåˆ†ç»„(group), "æ•è·"&lt;/h2&gt;
&lt;p&gt;å…ˆè¯´ä¸€å¥åˆ«çš„, å‰é¢ä»‹ç»é‡å¤æ¬¡æ•°çš„éƒ¨åˆ†, ä»‹ç»äº†æ€ä¹ˆæŒ‡å®šæŸä¸ªç±»å‹çš„&lt;em&gt;å•ä¸ªå­—ç¬¦&lt;/em&gt;é‡å¤çš„æ¬¡æ•°, è¦æ˜¯æƒ³å¯»æ‰¾æŸä¸ªç‰¹å®šå­—ç¬¦ç»„åˆçš„é‡å¤æ¬¡æ•°è¯¥æ€ä¹ˆåŠå‘¢? åªéœ€è¦æŠŠè¦é‡å¤çš„éƒ¨åˆ†ç”¨å°æ‹¬å·æ‹¬èµ·æ¥, ç„¶ååé¢æŒ‡å®šé‡å¤çš„æ¬¡æ•°å°±å¯ä»¥äº†...&lt;/p&gt;
&lt;p&gt;ex. å¯»æ‰¾å¥½å‡ ä¸ª"bla"è¿ç€çš„å­—ç¬¦ä¸²: &lt;code&gt;(bla)+&lt;/code&gt;, è¿™æ ·"blablabla"ä¹‹ç±»çš„å­—ç¬¦ä¸²å°±å¯ä»¥è¢«åŒ¹é…äº†. &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å°æ‹¬å·çš„è¿™ç§ä½œç”¨ç±»ä¼¼äºå°æ‹¬å·åœ¨ä¸€èˆ¬ç¼–ç¨‹è¯­è¨€çš„ä½œç”¨, å°±æ˜¯æŠŠä¸€éƒ¨åˆ†å†…å®¹æ”¾åœ¨ä¸€èµ·. ä½†æ˜¯ä¸æ­¤åŒæ—¶, æ¯ä¸€ä¸ªå°æ‹¬å·å…¶å®è¿˜"&lt;strong&gt;æ•è·&lt;/strong&gt;"äº†ä¸€ä¸ª"&lt;strong&gt;åˆ†ç»„&lt;/strong&gt;"(group). æ„æ€å°±æ˜¯åœ¨åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²é‡Œ(å«åšä¸€ä¸ª"match"), æˆ‘ä»¬è¿˜å¯ä»¥å¾—åˆ°å®ƒçš„ä¸€ä¸ªå­å­—ç¬¦ä¸². &lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯ä¸¾ç”µè¯å·ç çš„ä¾‹å­, å‰é¢çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç±»ä¼¼"021-54749110"è¿™æ ·çš„åŒ¹é…ç»“æœ, ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³&lt;em&gt;æŠŠåŒºå·å’ŒåŒºå·åçš„å·ç åˆ†åˆ«ä¿å­˜&lt;/em&gt;çš„è¯, è¿˜éœ€è¦å†&lt;em&gt;åœ¨ç¨‹åºé‡Œ&lt;/em&gt;å¯¹è¿™ä¸ªå­—ç¬¦ä¸²åšä¸ªå¤„ç†: æ¯”å¦‚æŠŠå­—ç¬¦ä¸²çš„å‰ä¸‰ä¸ªæˆªå–å‡ºæ¥ä¿å­˜ä¸ºåŒºå·, æŠŠç¬¬äº”ä¸ªå­—ç¬¦åˆ°æœ€åçš„å­å­—ç¬¦ä¸²æˆªå–å‡ºæ¥ä¿å­˜ä¸ºå·ç ... è¿™æ ·ä¼šæœ‰é—®é¢˜, å› ä¸ºæˆ‘ä»¬ä¹Ÿå¯èƒ½å¾—åˆ°"0531-8881234"è¿™æ ·çš„ç»“æœ... äºæ˜¯æˆ‘ä»¬åªèƒ½å…ˆåœ¨å¾—åˆ°çš„å­—ç¬¦ä¸²é‡Œå¯»æ‰¾"-", ç„¶åå†ä»"-å‡ºç°çš„ä½ç½®é‚£é‡ŒæŠŠå­—ç¬¦ä¸²æˆªæˆä¸¤æ®µ...... æ€»ä¹‹è¿™æ ·çš„è¯åœ¨ç¨‹åºé‡Œè¿˜è¦è¿›è¡Œå¾ˆéº»çƒ¦çš„åæœŸå¤„ç†, éå¸¸ä¸çˆ½(c'est trop lourd!)......&lt;/p&gt;
&lt;p&gt;å¹¸å¥½æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„åˆ†ç»„åŠŸèƒ½, åœ¨å¾—åˆ°ç»“æœçš„å­—ç¬¦ä¸²çš„åŒæ—¶, è¿˜åœ¨ä¸åŒçš„åˆ†ç»„é‡Œæ”¾äº†å¯¹åº”çš„çš„å­å­—ç¬¦ä¸²,&lt;em&gt;è¿™æ ·åœ¨ç¨‹åºé‡Œåªè¦å¾—åˆ°æ¯ä¸€ä¸ªåˆ†ç»„å°±å¯ä»¥äº†&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;è€Œç»™å­—ç¬¦ä¸²åˆ†ç»„çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•, å°±æ˜¯ç®€å•çš„&lt;em&gt;ç»™è¦åˆ†ç»„çš„åœ°æ–¹åŠ ä¸Šå°æ‹¬å·æ‹¬èµ·æ¥å°±å¥½äº†&lt;/em&gt;. (å½“ç„¶, å¯èƒ½ä½ åªæ˜¯ä¸ºäº†çœ‹å¾—æ¸…æ¥šæ‰ç»™è¡¨è¾¾å¼åŠ å°æ‹¬å·, ä½†æ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å­—ç¬¦ä¸²çš„æ—¶å€™ä¹Ÿä¼šå¸®ä½ æŠŠå®ƒæ•è·åˆ°ä¸€ä¸ªåˆ†ç»„é‡Œ.) æ‰€ä»¥æ²¡åŠ ä¸€å¯¹å°æ‹¬å·å°±ä¼šåœ¨ç»“æœä¸­å¢åŠ ä¸€ä¸ªåˆ†ç»„, åˆ†ç»„çš„é¡ºåºæ˜¯æŒ‰ç…§å°æ‹¬å·å‡ºç°çš„é¡ºåºæ’åˆ—çš„. &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨ç”µè¯å·ç è¿™ä¸ªä¾‹å­é‡Œ, æˆ‘ä»¬å¯ä»¥å†™:
&lt;code&gt;(\d{3})-(\d{8})|(\d{4})-(\d{7,8})&lt;/code&gt;
&lt;a href="http://regex101.com/r/bS1uP4/3"&gt;ä¾‹å­é“¾æ¥&lt;/a&gt;
æˆ‘å–œæ¬¢reg101è¿™ä¸ªç½‘ç«™çš„åŸå› å°±æ˜¯å®ƒå¯ä»¥æ˜¾ç¤ºéå¸¸ä¸°å¯Œçš„ä¿¡æ¯. 
åœ¨ç½‘ç«™çš„å³ä¸Šè§’,æœ‰å…³äºè¡¨è¾¾å¼çš„è§£é‡Š:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ç®€ä»‹/pasted_image.png"/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å³ä¸‹è§’ä¼šæ˜¾ç¤ºæ•è·åˆ°çš„åˆ†ç»„(groups):&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ç®€ä»‹/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;p&gt;(è¿™é‡Œçš„åˆ†ç»„ç¼–å·å¯èƒ½æœ‰ç‚¹é—®é¢˜, åä¸¤ä¸ªåˆ†ç»„çš„ç¼–å·åº”è¯¥æ˜¯1å’Œ2çš„... è¿™æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†åˆ†æ”¯æ¡ä»¶é€ æˆçš„, ä¸çŸ¥æ˜¯bugè¿˜æ˜¯feature...)&lt;/p&gt;
&lt;p&gt;ç„¶åå…³äºæ€ä¹ˆåœ¨ç¨‹åºé‡Œè·å¾—æ­£åˆ™è¡¨è¾¾å¼çš„åˆ†ç»„, å¯ä»¥å»çœ‹æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ç›¸å…³æ–‡æ¡£...... &lt;/p&gt;
&lt;h2 id="zheng-ze-biao-da-shi-xuan-xiang-mo-shi"&gt;æ­£åˆ™è¡¨è¾¾å¼é€‰é¡¹("æ¨¡å¼")&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™, è¿˜å¯ä»¥æŒ‡å®šä¸€äº›"æ¨¡å¼"é€‰é¡¹, æ¯”å¦‚åœ¨reg101ç½‘ç«™ä¸Š, è¡¨è¾¾å¼å³è¾¹æœ‰ä¸€ä¸ªé€‰é¡¹çª—å£:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/æ­£åˆ™è¡¨è¾¾å¼å…¥é—¨ç®€ä»‹/pasted_image002.png"/&gt;&lt;/p&gt;
&lt;p&gt;å½“å¼€å¯æŸäº›"æ¨¡å¼"çš„æ—¶å€™, æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è¡Œä¸ºç¨æœ‰ä¸åŒ. å…¶å®ä¸Šé¢çš„æˆªå›¾å·²ç»è®²çš„å¾ˆæ¸…æ¥šäº†, ä¸‹é¢æ¡æ¯”è¾ƒå¸¸ç”¨çš„è¯´ä¸€ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨å±€æ¨¡å¼global, "g": å°±æ˜¯ä¸æ­¢åŒ¹é…ç¬¬ä¸€ä¸ª, è€Œæ˜¯æŠŠæ‰€æœ‰çš„åŒ¹é…éƒ½æ˜¾ç¤ºå‡ºæ¥.&lt;/li&gt;
&lt;li&gt;æ‰©å±•æ¨¡å¼(æˆ–è€…"æ³¨é‡Šæ¨¡å¼")extended, "x": ä½¿ç”¨åæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿå¯ä»¥æ¢è¡Œ, å¯ä»¥éšä¾¿åŠ ç©ºæ ¼(å°†è¢«å¿½ç•¥), ä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨é‡Š(ä½¿ç”¨&lt;code&gt;#&lt;/code&gt;å¼€å§‹æ³¨é‡Š)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯æˆ‘ç»å¸¸ç”¨çš„é€‰é¡¹, æœ‰æ—¶å€™è¡¨è¾¾å¼å†™çš„å¾ˆé•¿å¾ˆä¹±, å¦‚æœä¸èƒ½æ¢è¡Œæˆ–è€…åŠ æ³¨é‡Šçš„è¯, ä¸‹æ¬¡çœ‹å¾—æ—¶å€™å°±ä¸çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹äº†...
æ¯”å¦‚åˆšæ‰é‚£ä¸ªç”µè¯çš„ä¾‹å­, æˆ‘ä»¬åœ¨å¼€å¯äº†æ‰©å±•æ¨¡å¼ä»¥å, å¯ä»¥å†™æˆè¿™æ ·:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;(\d{3}) - (\d{8}) #region code, -, phone number&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;| #alternative&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;(\d{4}) - (\d{7,8})#region code, -, phone number&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href="http://regex101.com/r/bS1uP4/4"&gt;ä¾‹å­é“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šè¡Œæ¨¡å¼multiline, "m": å‰é¢"åŒ¹é…ä½ç½®"é‚£ä¸€èŠ‚æåˆ°äº†, å°±æ˜¯æ”¹å˜&lt;code&gt;^&lt;/code&gt;å’Œ&lt;code&gt;$&lt;/code&gt;çš„æ„æ€, ä¸è®©å®ƒä»¬åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸ, è€Œæ˜¯æ¯ä¸€è¡Œçš„å¼€å§‹å’Œç»“æŸ.&lt;/li&gt;
&lt;li&gt;å•è¡Œæ¨¡å¼singleline, "s": å‰é¢ä¹Ÿæåˆ°äº†, ä½œç”¨æ˜¯è®©&lt;code&gt;.&lt;/code&gt;ä¹ŸåŒ¹é…æ¢è¡Œç¬¦...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(æ‰€ä»¥å¯è§, &lt;em&gt;å•è¡Œæ¨¡å¼å’Œå¤šè¡Œæ¨¡å¼æ ¹æœ¬ä¸æ˜¯ç›¸äº’æ’æ–¥çš„å…³ç³»&lt;/em&gt;....... è¿™åå­—èµ·çš„ä¸å¥½...)&lt;/p&gt;
&lt;p&gt;å…³äºæ€ä¹ˆå¼€å¯è¿™äº›é€‰é¡¹, è¿˜æ˜¯è¦çœ‹ä¸åŒè¯­è¨€çš„æ–‡æ¡£... 
æ¯”å¦‚åœ¨pythoné‡Œ, åªè¦åœ¨&lt;code&gt;re.compile()&lt;/code&gt;å‡½æ•°ä½¿ç”¨åŠ å…¥&lt;code&gt;re.X&lt;/code&gt;ç­‰å‚æ•°, è§&lt;a href="https://docs.python.org/2/library/re.html#module-contents"&gt;æ–‡æ¡£&lt;/a&gt;...&lt;/p&gt;
&lt;h2 id="qi-ta-nei-rong"&gt;å…¶ä»–å†…å®¹&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åªå†™äº†æˆ‘ç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿, å…³äºæ­£åˆ™è¡¨è¾¾å¼è¿˜æœ‰å¾ˆå¤šæ²¡æœ‰æåˆ°çš„å†…å®¹(æ‰€è°“çš„"é«˜çº§è®®é¢˜"?), æ¯”å¦‚"é›¶å®½æ–­è¨€"ä»¥åŠ"å¹³è¡¡ç»„"ç­‰å†…å®¹, è¿™äº›éƒ½åœ¨deerchaoçš„é‚£ç¯‡&lt;a href="http://deerchao.net/tutorials/regex/regex.htm"&gt;ç»å…¸åšå®¢&lt;/a&gt;é‡Œæåˆ°äº†...&lt;/p&gt;
&lt;h2 id="shi-ji-li-zi"&gt;å®é™…ä¾‹å­&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å­1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦åˆ†æå¾ˆé•¿çš„æ–‡æœ¬, æ–‡æœ¬çš„ä¸€éƒ¨åˆ†åŒ…å«äº†ä¸€è¶Ÿèˆªç­çš„ä¿¡æ¯, æ¯”å¦‚å‡ºå‘å’Œåˆ°è¾¾çš„æ—¶é—´, å‡ºå‘å’Œåˆ°è¾¾çš„æœºåœº, ä»¥åŠèˆªç­å·ç­‰... è¿™äº›ä¿¡æ¯ä¸­é—´éƒ½åŒ…å«åœ¨ä¸€é•¿ä¸²å­—ç¬¦ä¸­é—´. &lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†, å¹¶ä¸”æŠŠä¸åŒçš„ä¿¡æ¯æ”¾åœ¨ä¸åŒçš„åˆ†ç»„é‡Œ, è¿™æ ·å°±æ–¹ä¾¿äº†ç¨‹åºçš„å¤„ç†. &lt;a href="http://regex101.com/r/bS1uP4/5"&gt;è¿™é‡Œ&lt;/a&gt;æ˜¯æˆ‘å†™çš„æ­£åˆ™è¡¨è¾¾å¼.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å­2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å†ä¸¾ä¸ªä¾‹å­, æˆ‘æƒ³è¦ç°åœ¨&lt;a href="http://www.cs.waikato.ac.nz/ml/weka/mooc/dataminingwithweka/"&gt;è¿™ä¸ªé¡µé¢&lt;/a&gt;çš„æ‰€æœ‰çš„ä¸œè¥¿, å¯æ˜¯ç”¨é¼ æ ‡ä¸€ä¸ªä¸€ä¸ªç‚¹å‡»å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†, æ‰€ä»¥å¯ä»¥å†™ä¸€ä¸ªç¨‹åºæŠŠè¿™äº›é“¾æ¥éƒ½æå–å‡ºæ¥, ç„¶åè‡ªåŠ¨è¿›è¡Œä¸‹è½½. &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥éœ€è¦åˆ†æè¿™ä¸ªé¡µé¢çš„htmlæ–‡ä»¶, å³é”® â†’ æ˜¾ç¤ºç½‘é¡µæºä»£ç å°±å¯ä»¥çœ‹åˆ°äº†, è™½ç„¶æˆ‘ä¸æ‡‚htmlçš„è¯­æ³•, ä½†æ˜¯å¯ä»¥å‘ç°, ä¸‹è½½çš„é“¾æ¥éƒ½æ˜¯è¿™æ ·çš„ç‰‡æ®µ:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class="download_link" href="https://drive.google.com/uc?export=download&amp;amp;id=0B-f7ZbfsS9-xUjhLaURQbWsxbjg" target="_blank"&gt;en&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å°±æ˜¯è¯´åœ¨&lt;code&gt;class="download_link"&lt;/code&gt;ä¹‹å, &lt;code&gt;href=&lt;/code&gt;åé¢çš„ç”¨å¼•å·å¼•èµ·æ¥çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸‹è½½é“¾æ¥äº†, äºæ˜¯å¯ä»¥å¾ˆå¿«ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æå–å®ƒ, æˆ‘å†™çš„è¡¨è¾¾å¼è§&lt;a href="http://regex101.com/r/hN1lH1/1"&gt;è¿™é‡Œ&lt;/a&gt;.&lt;/p&gt;</summary><category term="regex"></category></entry><entry><title>IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°</title><link href="https://x-wei.github.io/tech/IPython%E4%B8%8A%E6%89%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" rel="alternate"></link><published>2014-07-22T00:00:00+02:00</published><updated>2014-07-22T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-07-22:tech/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.packtpub.com/learning-ipython-for-interactive-computing-and-data-visualization/book"&gt;Learning IPython for Interactive Computing and Data Visualization&lt;/a&gt;è¿™æœ¬ä¹¦çš„å‰ä¸¤ç« çš„ç¬”è®°, è¿™æœ¬ä¹¦è¿˜è¢«æ”¾åœ¨äº†IPythonå®˜ç½‘ä¸Š, è™½ç„¶åªæœ‰ä¸€ç™¾é¡µå¤šä¸€ç‚¹ç‚¹, ä½†æ˜¯è®²çš„å†…å®¹å´å¾ˆä¸°å¯Œ, ä»‹ç»äº†IPython, numpy, pandasä»¥åŠå¹¶è¡Œè®¡ç®—ç­‰æ–¹é¢. &lt;/p&gt;
&lt;p&gt;(åœ¨å¼€å§‹ç³»ç»Ÿå­¦IPythonä¹‹å‰ç®€å•ä½¿ç”¨è¿‡IPython, é‚£æ—¶å€™æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢bpythonçš„ä»£ç æç¤ºåŠŸèƒ½...)&lt;/p&gt;
&lt;h1 id="ch1-10-ipython-essentials"&gt;ch1: 10 IPython essentials&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä»»ä½•å˜é‡åé¢åŠ é—®å·&lt;code&gt;?&lt;/code&gt;æˆ–è€…åŒé—®å·&lt;code&gt;??&lt;/code&gt;, å°†ä¼šè¾“å‡ºè¯¦ç»†çš„ä¿¡æ¯(æŒ‰&lt;code&gt;q&lt;/code&gt;é€€å‡º), &lt;code&gt;??&lt;/code&gt;çš„ä¿¡æ¯æ›´åŠ è¯¦ç»†äº›&lt;/li&gt;
&lt;li&gt;Tab Completion: æ²¡å•¥å¥½è¯´çš„ æ²¡æœ‰bpythonåšçš„å¥½ ä¹Ÿå‡‘åˆå§...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_, __, ___&lt;/code&gt;ä¿å­˜æœ€è¿‘ä¸‰æ¬¡çš„è¾“å‡º;  &lt;code&gt;_i, __i, ___i&lt;/code&gt;ä¿å­˜æœ€è¿‘ä¸‰æ¬¡çš„è¾“å…¥(ä½œä¸ºå­—ç¬¦ä¸²ä¿å­˜)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="magic-commands"&gt;magic commands&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨IPythoné‡Œé¢å¯ä»¥ä½¿ç”¨ä¸€äº›æ ‡å‡†unixå‘½ä»¤, æ¯”å¦‚&lt;code&gt;cd&lt;/code&gt;, &lt;code&gt;pwd,ls&lt;/code&gt;ç­‰... &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªå¤ªå¥½äº† å¦åˆ™è¿˜è¦&lt;code&gt;import os&lt;/code&gt;, ç„¶åå†ä»€ä¹ˆ&lt;code&gt;os.chdir('...')&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¶å®è¿™äº›unixå‘½ä»¤æ˜¯IPythonçš„&lt;strong&gt;magic commands&lt;/strong&gt;, è¿™äº›magic commandsä¸€èˆ¬ç”¨&lt;code&gt;%&lt;/code&gt;ä½œä¸ºå‰ç¼€.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†æ˜¯ç”±äºé»˜è®¤IPythonå¼€å¯äº†&lt;strong&gt;automagic system&lt;/strong&gt;, ä¸Šé¢é‚£äº›å‘½ä»¤å¯ä»¥ä¸ç”¨åŠ å‰ç¼€äº†(æˆ–è€…ä½¿ç”¨Tabè‡ªåŠ¨ç»™åŠ ä¸Šå‰ç¼€)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%run&lt;/code&gt; å‘½ä»¤, è¿è¡Œä¸€ä¸ª.pyè„šæœ¬, ä½†æ˜¯å¥½å¤„æ˜¯, ä¸è¿è¡Œå®Œäº†ä»¥åè¿™ä¸ª.pyæ–‡ä»¶é‡Œçš„å˜é‡éƒ½å¯ä»¥åœ¨Ipythoné‡Œç»§ç»­è®¿é—®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%timeit&lt;/code&gt; å‘½ä»¤, å¯ä»¥ç”¨æ¥åšåŸºå‡†æµ‹è¯•(&lt;em&gt;benchmarking&lt;/em&gt;), æµ‹è¯•ä¸€ä¸ªå‘½ä»¤(æˆ–è€…ä¸€ä¸ªå‡½æ•°)çš„è¿è¡Œæ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ex. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;%timeit&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;10000&lt;/span&gt; &lt;span class="n"&gt;loops&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;56.5&lt;/span&gt; &lt;span class="err"&gt;Âµ&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;per&lt;/span&gt; &lt;span class="n"&gt;loop&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nf"&gt;%timeit&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;10000&lt;/span&gt; &lt;span class="n"&gt;loops&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;51.7&lt;/span&gt; &lt;span class="err"&gt;Âµ&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;per&lt;/span&gt; &lt;span class="n"&gt;loop&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%debug&lt;/code&gt; å‘½ä»¤: å½“æœ‰exceptionçš„æ—¶å€™, åœ¨consoleé‡Œè¾“å…¥&lt;code&gt;%debug&lt;/code&gt;å³å¯æ‰“å¼€debugger. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨debuggeré‡Œ, è¾“å…¥&lt;code&gt;u,d&lt;/code&gt;(up, down)æŸ¥çœ‹stack, è¾“å…¥&lt;code&gt;q&lt;/code&gt;é€€å‡ºdebugger&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;%debug&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ipython&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="n"&gt;c374156862&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;----&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;     &lt;span class="n"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="mi"&gt;3&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;ipdb&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;u&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Oldest&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;ipdb&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Newest&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;ipdb&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨%pdbå¼€å¯è‡ªåŠ¨pdbæ¨¡å¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;%pdb&lt;br/&gt;
Automatic pdb calling has been turned ON&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;%pylab&lt;/code&gt; å‘½ä»¤, å¤§æ€å™¨, çœ‹ä¸€ä¸‹éƒ½importäº†ä»€ä¹ˆ:&lt;/p&gt;
&lt;p&gt;%pylab makes the following imports::
    import numpy
    import matplotlib
    from matplotlib import pylab, mlab, pyplot
    np = numpy
    plt = pyplot
    from IPython.display import display
    from IPython.core.pylabtools import figsize, getfigs
    from pylab import *
    from numpy import *&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”»å›¾çš„æ—¶å€™å¯ä»¥ä¸ç”¨éè¦åŠ &lt;code&gt;plt.&lt;/code&gt;å‰ç¼€äº†, ç›´æ¥&lt;code&gt;plot()&lt;/code&gt;å³å¯. å›¾åƒåŒ–å‡ºæ¥çš„æ—¶å€™, ç”»å›¾çª—å£å¹¶æ²¡æœ‰block, å¯ä»¥åŠ¨æ€(&lt;em&gt;interactively&lt;/em&gt;)ç”»å›¾.&lt;/p&gt;
&lt;p&gt;å¦å¤–, qtconsoleå’Œnotebookä¸€æ ·, æŒ‡å®šäº†&lt;code&gt;inline&lt;/code&gt;é€‰é¡¹ä»¥åå¯ä»¥ç›´æ¥åœ¨çª—å£é‡Œç”»å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°/pasted_image004.png"/&gt;&lt;/p&gt;
&lt;p&gt;åæ¥å‘ç°inlineçš„å›¾ç‰‡è²Œä¼¼ä¸èƒ½æ”¾å¤§çœ‹, æ‰€ä»¥æœ‰æ—¶å€™è¿˜æ˜¯å•ç‹¬ä¸€ä¸ªçª—å£æ¯”è¾ƒå¥½, æ¢åˆ°éinlineæ¨¡å¼åªéœ€è¦å†è¾“å…¥ä»¥ä¸‹%pylab, åŠ ä¸Šé€‰é¡¹qt:
&lt;code&gt;%pylab qt&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="ipython-notebook"&gt;IPython Notebook&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;(é‡å¤´æˆ)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨é‡Œ(!!)ä½¿ç”¨IPython, å¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šè¡Œç¼–è¾‘åå†ä¸€å¹¶æ‰§è¡Œ. &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;The Notebook brings the functionality of IPython into the browser for multiline textediting features, interactive session reproducibility, and so on.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨shell/cmdçª—å£é‡Œå¯åŠ¨ipythonçš„æ—¶å€™åŠ ä¸Šnotebook:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ipython notebook&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°æµè§ˆå™¨æ‰“å¼€äº†, å¾ˆç¥å¥‡: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°/pasted_image.png"/&gt;&lt;/p&gt;
&lt;p&gt;æ–°å»ºä¸€ä¸ªnotebook, ç”¨ç”¨çœ‹: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æ¸æ¸ç†è§£äº†ä¸ºä»€ä¹ˆä¹¦é‡Œè¯´å¯ä»¥ç”¨æ¥åš"&lt;em&gt;multiline textediting features, interactive session reproducibility&lt;/em&gt;"... å› ä¸ºè¿™ä¸åªæ˜¯ä¸ªç¼–ç¨‹çš„ä¸œè¥¿, è¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªç¬”è®°æœ¬ â€” è€Œä¸”æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ç¬”è®°æœ¬! &lt;/p&gt;
&lt;p&gt;(&lt;em&gt;æ³¨: æ›´å¤šå…³äºnotebookçš„ä»‹ç»åœ¨ä¸‹é¢ç¬¬äºŒç« çš„å†…å®¹é‡Œ.&lt;/em&gt;)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç ,æˆ–è€…æ®µè½, æŒ‰ç…§cell(æ ¼å­)è¿›è¡Œç»„ç»‡, ä¸€ä¸ªcellé‡Œé¢çš„å†…å®¹å¯ä»¥æ˜¯code, ä½†æ˜¯ä¹ŸåŒæ ·å¯ä»¥æ˜¯markdownçš„æ®µè½, æˆ–è€…æ˜¯ä¸€ä¸ªæ ‡é¢˜(heading).&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªä»£ç çš„cellé‡Œ, å†™å…¥å¤šè¡Œä»£ç , å°±åƒåœ¨ç¼–è¾‘å™¨é‡Œå†™pythonç¨‹åºä¸€æ ·, æŒ‰å›è½¦åªä¼šæ¢è¡Œ, ä¸ä¼šè¿è¡Œç¨‹åº.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å†™äº†ä¸€æ®µç¨‹åºä»£ç ä»¥å, æŒ‰&lt;code&gt;ctrl+Enter&lt;/code&gt;è¿è¡Œç¨‹åº, è¿è¡Œç»“æœä¹Ÿæ˜¯ä¸€ä¸ªä½œä¸ºcell. 
(&lt;strong&gt;æ³¨&lt;/strong&gt;: åœ¨qtconsoleé‡Œé¢ç›¸å, å¦‚æœè¦è¾“å…¥å¤šè¡Œç¨‹åºçš„è¯, æŒ‰&lt;code&gt;Ctrl+Enter&lt;/code&gt;æ¢è¡Œ(æŒ‰ä¸€ä¸€æ¬¡ctrl+enterå³å¯è¿›å…¥å¤šè¡Œç¼–è¾‘æ¨¡å¼), å†™äº†å‡ è¡Œä»£ç ä»¥åè¦è¿è¡Œçš„è¯, å°±æŒ‰ä¸¤æ¬¡å›è½¦, æˆ–è€…æŒ‰&lt;code&gt;Shift+Enter&lt;/code&gt;)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;...è¿˜æœ‰å¥½å¤šå¿«æ·é”®, æŒ‰Escä»¥åå†æŒ‰hå°±å¯ä»¥çœ‹åˆ°... è¿™ä¸ªè¿˜åˆ†ç¼–è¾‘æ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼å‘¢... çœŸä¸èƒ½å°çœ‹äº†IPythonäº†!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°/pasted_image002.png"/&gt;&lt;/p&gt;
&lt;h2 id="customizing-ipython"&gt;customizing IPython&lt;/h2&gt;
&lt;p&gt;ä¿å­˜è‡ªå·±çš„IPythoné…ç½®æ–‡ä»¶, åªéœ€è¦åœ¨shell/cmdé‡Œè¾“å…¥ipython profile create&lt;code&gt;,&lt;/code&gt; é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ &lt;code&gt;~.ipython&lt;/code&gt; æˆ–è€… &lt;code&gt;~/.config/ipython&lt;/code&gt;ç›®å½•é‡Œ.&lt;/p&gt;
&lt;h1 id="ch2-interavtive-work-with-ipython_1"&gt;ch2: Interavtive Work with IPython&lt;/h1&gt;
&lt;p&gt;IPythonå¯ä»¥å®ç°&lt;strong&gt;shell(OS)å’Œpythonçš„äº¤äº’&lt;/strong&gt;. è¿™æ ·åšä¸€äº›unix shellçš„æ“ä½œçš„æ—¶å€™å¯ä»¥ä¸å¿…é€€å‡ºconsoleäº†.&lt;/p&gt;
&lt;h2 id="navigating-the-file-system"&gt;navigating the file system&lt;/h2&gt;
&lt;p&gt;ä¾‹å­: å®Œæˆä¸‹è½½å‹ç¼©åŒ…, è§£å‹ç¼©, ä»¥åŠæ‰“å¼€è§£å‹åçš„æ–‡ä»¶è¿™äº›æ“ä½œ...&lt;/p&gt;
&lt;p&gt;åœ¨pyå˜é‡å‰é¢åŠ å…¥$, å¯ä»¥æŠŠè¿™ä¸ªå˜é‡å…±äº«ç»™OSæˆ–è€…magic command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;folder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;'&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="err"&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nf"&gt;%mkdir&lt;/span&gt; &lt;span class="n"&gt;$folder&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±åœ¨å½“å‰ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª'data'æ–‡ä»¶å¤¹ â€” è¿™å¯æ¯”pyçš„å‘½ä»¤å¥½è®°å¤šäº†å•Š... &lt;code&gt;%mkdir&lt;/code&gt;çš„åŸç†å…¶å®æ˜¯ç»™äº†shellå‘½ä»¤ä¸€ä¸ªåˆ«å(&lt;code&gt;alias&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;ç„¶å, &lt;code&gt;%bookmark&lt;/code&gt;å¯ä»¥æŠŠå½“å‰çš„ç›®å½•åŠ å…¥æ”¶è—å¤¹ ä¸‹æ¬¡cdçš„æ—¶å€™æ–¹ä¾¿ç›´æ¥è·³åˆ°è¿™é‡Œæ¥:&lt;/p&gt;
&lt;p&gt;ex.
&lt;code&gt;%bookmark bm&lt;/code&gt;
é‚£ä¹ˆä»¥åå¯ä»¥ç›´æ¥ç”¨ &lt;code&gt;cd bm&lt;/code&gt; è·³åˆ°è¿™ä¸ªç›®å½•ä¸‹. &lt;code&gt;%bookmark -l&lt;/code&gt; å¯ä»¥åˆ—å‡ºæ”¶è—å¤¹çš„ç›®å½•å†…å®¹.&lt;/p&gt;
&lt;p&gt;ç„¶åå‘ç°åŸæ¥IPythonè¿æ–‡ä»¶åéƒ½æ˜¯å¯ä»¥æç¤ºçš„å•Š!... &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;with open('0&amp;lt;TAB&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;0.circles 0.edges&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="accessing-system-shell-with-ipython"&gt;Accessing system shell with IPython&lt;/h2&gt;
&lt;p&gt;åœ¨IPythoné‡Œè°ƒç”¨ç³»ç»Ÿçš„å‘½ä»¤, ä¸ç”¨å†ä½¿ç”¨&lt;code&gt;sys.exec('...')&lt;/code&gt;ä¹‹ç±»å†—é•¿çš„æ–¹å¼äº†, åªéœ€è¦åœ¨ç³»ç»Ÿçš„å‘½ä»¤å‰é¢åŠ ä¸Šä¸€ä¸ªæ„Ÿå¹å·&lt;code&gt;!&lt;/code&gt;å³å¯...&lt;/p&gt;
&lt;p&gt;shellè¿”å›çš„ç»“æœå¯ä»¥ä½œä¸ºä¸€ä¸ªstringçš„åˆ—è¡¨ä¿å­˜åœ¨ä¸€ä¸ªpython variableé‡Œ.&lt;/p&gt;
&lt;p&gt;ex. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;In [2]: files = !ls -1 -S | grep edges&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;In [3]: files&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;Out[3]: ['1912.edges',&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    '107.edges',&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    [...]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    '3980.edges']&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(å½“ç„¶ ä¸Šé¢è¿™ä¸€è¡Œåªèƒ½åœ¨unixç³»ç»Ÿä¸‹è¿è¡Œ, å› ä¸ºWindowsçš„cmdæ²¡æœ‰ls å’Œ grepå‘½ä»¤)&lt;/p&gt;
&lt;p&gt;è¿˜å¯ä»¥æŠŠä¸€æ¡æ¯”è¾ƒé•¿çš„å‘½ä»¤ä½œä¸ºaliasä¿å­˜èµ·æ¥, ç”¨&lt;code&gt;%alias&lt;/code&gt;å‘½ä»¤... (è¿™ä¸ªåº”è¯¥ä¸€èˆ¬ç”¨ä¸åˆ°)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%alias largest ls -1sSh | grep %s&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="the-extended-python-console"&gt;The Extended Python Console&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%history&lt;/code&gt; æˆ–è€… &lt;code&gt;%hist&lt;/code&gt; , æ˜¾ç¤ºä¹‹å‰çš„è®°å½•, æœ‰ä¸€äº›å‚æ•°å¯ç”¨...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%store&lt;/code&gt; æŠŠpythonå˜é‡çš„å†…å®¹ä¿å­˜ä¸‹æ¥, ä»¥åçš„sessionå¯ä»¥ç”¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%paste&lt;/code&gt; å¯¼å…¥å¹¶æ‰§è¡Œå‰ªè´´æ¿é‡Œé¢çš„å†…å®¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%run&lt;/code&gt; ä¹‹å‰è®²è¿‡äº†, è¿è¡Œpyæ–‡ä»¶, è¿è¡Œåpyæ–‡ä»¶é‡Œçš„å˜é‡å¯ä»¥åœ¨consoleé‡Œè®¿é—®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%edit&lt;/code&gt; æ‰“å¼€ç³»ç»Ÿçš„æ–‡ä»¶ç¼–è¾‘å™¨, å¹¶ä¸”åœ¨å…³é—­è¿™ä¸ªç¼–è¾‘å™¨æ—¶è‡ªåŠ¨è¿è¡Œç¨‹åº&lt;/li&gt;
&lt;li&gt;ä»‹ç»äº†ä¸€ä¸ªåŒ… networkx, å¯ä»¥ç”¨æ¥åˆ†æå¤æ‚ç½‘ç»œ(graph)çš„....&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="debug"&gt;debug&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;debugåŠ å…¥æ–­ç‚¹: &lt;code&gt;%run -d -b29 script.py&lt;/code&gt; è¿è¡Œscript.py å¹¶ä¸”åœ¨29è¡Œçš„æ—¶å€™æš‚åœ, å½“è¾“å…¥&lt;code&gt;c&lt;/code&gt;çš„æ—¶å€™å†ç»§ç»­è¿è¡Œ.&lt;/li&gt;
&lt;li&gt;ä¸€äº›pdb(debuggingç¯å¢ƒ)é‡Œå¸¸ç”¨çš„å‘½ä»¤:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;u/d&lt;/code&gt; for going up/down into the call stack&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s&lt;/code&gt; to step into the next statement&lt;/li&gt;
&lt;li&gt;&lt;code&gt;n&lt;/code&gt; to continue execution until the next line in the current function&lt;/li&gt;
&lt;li&gt;&lt;code&gt;r&lt;/code&gt; to continue execution until the current function returns&lt;/li&gt;
&lt;li&gt;&lt;code&gt;c&lt;/code&gt; to continue execution until the next breakpoint or exception&lt;/li&gt;
&lt;li&gt;&lt;code&gt;p&lt;/code&gt; to evaluate and print any expression&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a&lt;/code&gt; to obtain the arguments of the current functions&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;!&lt;/code&gt; prefix to execute any Python command within the debugger&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="benchmarkingji-zhun-ce-shi"&gt;benchmarking("åŸºå‡†æµ‹è¯•")&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;%timeit fun()&lt;/code&gt; æµ‹è¯•ä¸€ä¸ª&lt;strong&gt;å‡½æ•°&lt;/strong&gt;çš„æ‰§è¡Œé€Ÿåº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;%run -t&lt;/code&gt;å’Œ&lt;code&gt;%timeit&lt;/code&gt;æ•ˆæœç±»ä¼¼, ä½œç”¨æ˜¯æµ‹è¯•ä¸€ä¸ªpyè„šæœ¬&lt;strong&gt;æ–‡ä»¶&lt;/strong&gt;çš„æ‰§è¡Œé€Ÿåº¦&lt;/li&gt;
&lt;li&gt;æ›´ç²¾ç»†çš„è¿è¡Œæ—¶é—´æµ‹è¯•, å¯ä»¥ç”¨&lt;strong&gt;profileæ¨¡å—&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;The profiler outputs details about calls of every Python function used directly or indirectly in this script.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;@@...å¥½é«˜çº§!!! è¿™æ ·çš„è¯å°±æ›´å®¹æ˜“å‘ç°ç¨‹åºè¿è¡Œçš„ç“¶é¢ˆåœ¨å“ªé‡Œäº†!
æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;%run -p&lt;/code&gt; æˆ–è€… &lt;code&gt;%prun&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="using-the-ipython-notebook_1"&gt;Using the IPython notebook&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªnotebookçš„åŠŸèƒ½å®åœ¨æ˜¯å¾ˆNB... ä¸ä»…å¯ä»¥åŠ å…¥ä»£ç /markdownæ®µè½, è¿˜å¯ä»¥åŠ å…¥å›¾ç‰‡å’Œè§†é¢‘... notebookçš„æ ¼å¼ä¸º.ipybnæ–‡ä»¶, ç”¨JSONå­˜å‚¨æ•°æ®.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¾“å…¥ &lt;code&gt;ipython notebook&lt;/code&gt;(æˆ–è€…åœ¨ipythoné‡Œè¾“å…¥&lt;code&gt;!ipython notebook&lt;/code&gt;)ä»¥å, ä¼šåœ¨8888ç«¯å£å»ºç«‹ä¸€ä¸ªweb server, è®¿é—® &lt;a href="http://localhost:8888/"&gt;http://localhost:8888/&lt;/a&gt; å°±å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„é‚£ä¸ªæˆªå›¾, æˆ–è€…ç§°ä¹‹ä¸º&lt;strong&gt;notebook dashboard.&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;cell magics&lt;/strong&gt;çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªcell(å¤šè¡Œ), è€Œmagic commandçš„ä½œç”¨åŸŸæ˜¯ä¸€è¡Œ, cell magicsçš„å‰ç¼€æ˜¯ä¸¤ä¸ªç™¾åˆ†å·&lt;code&gt;%%&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»ä¸€ä¸ªpyæ–‡ä»¶ç›´æ¥å»ºç«‹ä¸€ä¸ªnotebook, åªéœ€è¦æŠŠæ–‡ä»¶æ‹–å…¥dashboardå³å¯, ç„¶ånotebookä¹Ÿå¯ä»¥ä¿å­˜ä¸ºæ–‡ä»¶. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¾‘äº†Markdownä»¥å, è¿˜æ˜¯&lt;code&gt;Ctrl+Enter/Shift+Enter&lt;/code&gt; , å³å¯æˆä¸ºæ ¼å¼åŒ–çš„æ–‡æœ¬, å†åŒå‡»å°±å¯ä»¥ç¼–è¾‘!!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®©plotçš„å›¾ç‰‡ç›´æ¥åµŒå…¥åœ¨notebooké‡Œé¢: ä½¿ç”¨&lt;code&gt;ipython notebook --pylab inline&lt;/code&gt;, æˆ–è€…åœ¨notebooké‡Œé¢è¾“å…¥&lt;code&gt;%pylab inline&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/IPythonä¸Šæ‰‹å­¦ä¹ ç¬”è®°/pasted_image003.png"/&gt;&lt;/p&gt;
&lt;h3 id="notebookde-yi-xie-kuai-jie-jian"&gt;notebookçš„ä¸€äº›å¿«æ·é”®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Escä»ç¼–è¾‘æ¨¡å¼(edit mode)é€€å‡ºåˆ°å‘½ä»¤æ¨¡å¼(command mode)&lt;/li&gt;
&lt;li&gt;Enterä»å‘½ä»¤æ¨¡å¼åˆ°ç¼–è¾‘æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;(ç¼–è¾‘æ¨¡å¼ä¸‹)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ctrl+Enter: è¿è¡Œç¨‹åº/markdownä»£ç &lt;/li&gt;
&lt;li&gt;shift+Enter: è¿è¡Œç¨‹åº, å¹¶è‡ªåŠ¨è·³åˆ°ä¸‹ä¸€ä¸ªcell&lt;/li&gt;
&lt;li&gt;alt+Enter: è¿è¡Œç¨‹åº, å¹¶è‡ªåŠ¨åœ¨åé¢æ–°å»ºä¸€ä¸ªcellåœ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;(å‘½ä»¤æ¨¡å¼ä¸‹)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;c: å¤åˆ¶ä¸€ä¸ªcell&lt;/li&gt;
&lt;li&gt;x: å‰ªåˆ‡ä¸€ä¸ªcell&lt;/li&gt;
&lt;li&gt;v: ç²˜è´´cell&lt;/li&gt;
&lt;li&gt;a: åœ¨å½“å‰cellä¸Šé¢(&lt;strong&gt;a&lt;/strong&gt;bove)æ–°å»ºä¸€ä¸ªcell&lt;/li&gt;
&lt;li&gt;b: åœ¨å½“å‰cellä¸‹é¢(&lt;strong&gt;b&lt;/strong&gt;elow)æ–°å»ºä¸€ä¸ªcell&lt;/li&gt;
&lt;li&gt;m: è®©å½“å‰cellå˜æˆä¸€ä¸ªmarkdownçš„cell&lt;/li&gt;
&lt;li&gt;y: è®©å½“å‰cellå˜æˆcodeçš„cell&lt;/li&gt;
&lt;li&gt;1,2,3...: nçº§æ ‡é¢˜&lt;/li&gt;
&lt;li&gt;j,k: ä¸Šä¸‹ç§»åŠ¨é€‰ä¸­çš„cell, vimé£æ ¼..&lt;/li&gt;
&lt;li&gt;dd(dæŒ‰ä¸¤ä¸‹): åˆ é™¤ä¸€ä¸ªcell(vim é£æ ¼...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;......çˆ½åˆ°çˆ†!!&lt;/p&gt;</summary><category term="python"></category></entry><entry><title>pandaså­¦ä¹ ç¬”è®°</title><link href="https://x-wei.github.io/tech/pandas%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" rel="alternate"></link><published>2014-07-22T00:00:00+02:00</published><updated>2014-07-22T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-07-22:tech/pandaså­¦ä¹ ç¬”è®°.html</id><summary type="html">&lt;p&gt;é¦–å…ˆ, å¯¼å…¥pandas
&lt;code&gt;import pandas as pd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»¥åŠå¼€å¯pylab: IPythoné‡Œè¾“å…¥&lt;code&gt;%pylab&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.bearrelroll.com/2013/05/python-pandas-tutorial/"&gt;http://www.bearrelroll.com/2013/05/python-pandas-tutorial/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="ji-ben-cao-zuo"&gt;åŸºæœ¬æ“ä½œ&lt;/h1&gt;
&lt;p&gt;&lt;a href="http://cloga.info/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandas_intro/"&gt;http://cloga.info/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandas_intro/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;pandaså’Œnumpyçš„å…³ç³»&lt;/strong&gt;: pandasæ˜¯å»ºç«‹åœ¨numpyä¸Šé¢çš„, pandaså¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®é›†åˆ(heterogeneous data set: &lt;strong&gt;DataFrame&lt;/strong&gt;), numpyå¤„ç†çš„æ˜¯ç›¸åŒç±»å‹çš„æ•°æ®é›†åˆ(homogeneous data set: &lt;strong&gt;ndarray&lt;/strong&gt;)&lt;/p&gt;
&lt;h2 id="du-xie-csvwen-jian"&gt;è¯»å†™csvæ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;read_csv()&lt;/strong&gt;
&lt;code&gt;df=pd.read_csv('data.csv')&lt;/code&gt;
è¯´ä¸€ä¸‹æ•°æ®ç±»å‹çš„é—®é¢˜: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›ç±»å‹æ•°æ®å¸§(&lt;strong&gt;DataFrame&lt;/strong&gt;): &lt;code&gt;type(df) = pandas.core.frame.DataFrame&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df.columns&lt;/code&gt;åŒ…å«äº†æ‰€æœ‰åˆ—çš„æ ‡ç­¾(&lt;em&gt;å­—æ®µå&lt;/em&gt;)
&lt;code&gt;df.index&lt;/code&gt;åŒ…å«äº†æ‰€æœ‰è¡Œçš„æ ‡ç­¾(å¯èƒ½æ²¡æœ‰çš„è¯, å°±æ˜¯ä¸€ç³»åˆ—é€’å¢çš„æ•°å­—äº†)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½†æ˜¯å…¶ä¸­çš„æ¯ä¸€åˆ—æ˜¯&lt;strong&gt;Series&lt;/strong&gt;ç±»å‹: &lt;code&gt;type(df.dep)=pandas.core.series.Series&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç„¶åå¯ä»¥å°†Seriesè½¬æ¢ä¸ºnumpyçš„ndarray: &lt;code&gt;array(df.dep)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;to_csv()&lt;/strong&gt;
æ²¡å•¥å¥½è¯´çš„..
&lt;code&gt;df.to_csv('csvfilename')&lt;/code&gt;
è¦æ˜¯ä¸å¸Œæœ›æŠŠindexä¹Ÿä½œä¸ºä¸€åˆ—å†™è¿›csvæ–‡ä»¶çš„è¯, å°±é€‰æ‹©å‚æ•°&lt;code&gt;index=False&lt;/code&gt;
&lt;a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html?highlight=to_csv#pandas.DataFrame.to_csv"&gt;http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html?highlight=to_csv#pandas.DataFrame.to_csv&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="indexing-slicing"&gt;indexing &amp;amp; slicing&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©ä¸€åˆ—: &lt;code&gt;df['dep']&lt;/code&gt; æˆ–è€…&lt;code&gt;df.dep&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å‰3è¡Œ(å‰ä¸‰æ¡è®°å½•): &lt;code&gt;df[:2]&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æ ‡ç­¾é€‰å–æ•°æ®&lt;/strong&gt;: &lt;code&gt;df.loc[è¡Œæ ‡ç­¾, åˆ—æ ‡ç­¾]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‰æ‹©å‰ä¸¤åˆ—:
&lt;code&gt;df.loc[:,('one','two')]&lt;/code&gt;
æˆ–è€…ç”¨
&lt;code&gt;df.loc[:,df.columns[:2]]&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ä½ç½®é€‰å–æ•°æ®&lt;/strong&gt;: &lt;code&gt;df.iloc[è¡Œä½ç½®, åˆ—ä½ç½®]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df.iloc[:,:2]&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åˆ¤æ–­çš„åˆ‡ç‰‡&lt;/strong&gt;: &lt;code&gt;df.ix[è¡Œä½ç½®æˆ–è¡Œæ ‡ç­¾, åˆ—ä½ç½®æˆ–åˆ—æ ‡ç­¾]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥å‰é¢ä¿©åŸºæœ¬ç”¨ä¸ç€äº†...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;df.ix[:,('one','two')]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;df.ix[:,:2]&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;boolean indexing&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ex. é€‰æ‹©depæ˜¯'PAR'çš„è®°å½•
&lt;code&gt;hk[hk.dep == 'PAR'].head()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ex. å¤šä¸ªæ¡ä»¶, æ¯”å¦‚depæ˜¯'PAR', dstæ˜¯'BHM':
&lt;code&gt;hk[(hk.dep == 'PAR')&amp;amp;(hk.dst=='BHM')].head()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;: ä¸­æ‹¬å·é‡Œé¢çš„è¡¨è¾¾å¼, æ¯ä¸€ä¸ªæ¡ä»¶éœ€è¦æ‹¬å·æ‹¬èµ·æ¥, ä¸­é—´çš„&lt;code&gt;&amp;amp;&lt;/code&gt;ä¸èƒ½ç”¨&lt;code&gt;and&lt;/code&gt;, ç­‰äºå·&lt;code&gt;==&lt;/code&gt;ä¸èƒ½ç”¨&lt;code&gt;is&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;æ–‡æ¡£é‡Œçš„ä¸€ä¸ªè¡¨æ ¼:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./pandas%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®å°æ•°ç²¾åº¦&lt;/strong&gt;
&lt;a href="http://pandas.pydata.org/pandas-docs/stable/options.html?highlight=precision"&gt;http://pandas.pydata.org/pandas-docs/stable/options.html?highlight=precision&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®å°æ•°ç‚¹åå…­ä½çš„ç²¾åº¦: 
&lt;code&gt;pd.set_option('precision',7)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„å…­ä½ç²¾åº¦çš„è¯è¦è®¾ç½®precisionä¸º7=6+1.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è°ƒæ•´æŸä¸€åˆ—çš„æ¬¡åº&lt;/strong&gt;
&lt;code&gt;df.reindex(columns=pd.Index(['x', 'y']).append(df.columns - ['x', 'y']))&lt;/code&gt;
&lt;a href="http://stackoverflow.com/questions/12329853/how-to-rearrange-pandas-column-sequence"&gt;http://stackoverflow.com/questions/12329853/how-to-rearrange-pandas-column-sequence&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;éšæœºæŠ½å–å‡ è¡Œ&lt;/strong&gt;
    rand_idx = random.choice(df.index,9, replace=False) #è¦è®¾ç½®replace = Falseä»¥é˜²æ­¢é‡å¤!
    df.ix[rand_idx]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸¤ä¸ªdfç›¸merge&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªdfçš„columnéƒ½ä¸€æ ·, indexä¸é‡å¤(å¢åŠ è¡Œ):&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;pd.concat([df1,df2])&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªdfçš„indexä¸€æ ·, columnä¸åŒ(å¢åŠ åˆ—)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;pd.concat([df1,df2], axis = 1)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="addingdeleting-columns"&gt;adding/deleting columns&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#column-selection-addition-deletion"&gt;http://pandas.pydata.org/pandas-docs/stable/dsintro.html#column-selection-addition-deletion&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–°å»ºä¸€åˆ—, åŠ åˆ°æœ€åé¢:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df['new_col']=xxx&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æƒ³è¦æŠŠä¸€åˆ—æ’è¿›ä¸­é—´æŸä¸€å¤„, ä½¿ç”¨df.insert:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df.insert(1, 'bar', df['one'])&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ é™¤ä¸€åˆ—, åªéœ€ç”¨ &lt;code&gt;del&lt;/code&gt; å…³é”®å­—:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;del df['one_col']&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªSeriesç»„æˆä¸€ä¸ªdataframe:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;pd.concat([s1, s2], axis=1)&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å‘½åä¸€åˆ—:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df=df.rename(columns = {'old_name':'new_name'})&lt;/code&gt;
æˆ–è€…:
&lt;code&gt;df.rename(columns = {'old_name':'new_name'}, inplace=True)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/20868394/changing-a-specific-column-name-in-pandas-dataframe"&gt;http://stackoverflow.com/questions/20868394/changing-a-specific-column-name-in-pandas-dataframe&lt;/a&gt;
&lt;a href="http://www.bearrelroll.com/2013/05/python-pandas-tutorial/"&gt;http://www.bearrelroll.com/2013/05/python-pandas-tutorial/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="apply-map-agg"&gt;apply() &amp;amp; map() &amp;amp; agg()&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;apply()&lt;/strong&gt;
å¯¹dataframeçš„å†…å®¹è¿›è¡Œæ‰¹é‡å¤„ç†, è¿™æ ·è¦æ¯”å¾ªç¯æ¥å¾—å¿«. 
&lt;code&gt;df.apply(func, axis=0,...)&lt;/code&gt;
&lt;code&gt;func&lt;/code&gt;: å®šä¹‰çš„å‡½æ•°
&lt;code&gt;axis&lt;/code&gt;: =0çš„æ—¶å€™å¯¹åˆ—æ“ä½œ, =1çš„æ—¶å€™å¯¹è¡Œæ“ä½œ
ex.
&lt;code&gt;df.apply(self, func, axis=0,&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;map()&lt;/strong&gt;
å’Œpythonå†…å»ºçš„æ²¡å•¥åŒºåˆ«
&lt;code&gt;df['one'].map(sqrt)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;groupby()&lt;/strong&gt;
æŒ‰ç…§æŸä¸€åˆ—(&lt;em&gt;å­—æ®µ&lt;/em&gt;)åˆ†ç»„, å¾—åˆ°ä¸€ä¸ª&lt;code&gt;DataFrameGroupBy&lt;/code&gt;å¯¹è±¡. ä¹‹åå†å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œåˆ†ç»„æ“ä½œ, å¦‚:
    df.groupby(['A','B']).sum()##æŒ‰ç…§Aã€Bä¸¤åˆ—çš„å€¼åˆ†ç»„æ±‚å’Œ
    groups = df.groupby('A')#æŒ‰ç…§Aåˆ—çš„å€¼åˆ†ç»„æ±‚å’Œ
    groups['B'].sum()##æŒ‰ç…§Aåˆ—çš„å€¼åˆ†ç»„æ±‚Bç»„å’Œ
    groups['B'].count()##æŒ‰ç…§Aåˆ—çš„å€¼åˆ†ç»„Bç»„è®¡æ•°&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;agg()&lt;/strong&gt;
å¯¹åˆ†ç»„çš„ç»“æœå†åˆ†åˆ«è¿›è¡Œä¸åŒçš„æ“ä½œ... å‚æ•°æ˜¯ä¸€ä¸ªdict, æŠŠæ¯ä¸ªå­—æ®µæ˜ å°„åˆ°ä¸€ä¸ªå‡½æ•°ä¸Šæ¥...... è¯´çš„ä¸æ¸…æ¥š, ç›´æ¥çœ‹ä¾‹å­: 
    In [82]: df
    Out[82]: 
           one  two  three
    index               &lt;br/&gt;
    a        1    1      2
    b        2    2      4
    c        3    3      6
    d      NaN    4    NaN&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;g&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'one'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;g&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;agg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'two'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'three'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;     &lt;span class="n"&gt;two&lt;/span&gt;     &lt;span class="n"&gt;three&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;one&lt;/span&gt;               &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;1&lt;/span&gt;      &lt;span class="mi"&gt;1&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;414214&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;2&lt;/span&gt;      &lt;span class="mi"&gt;2&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;000000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="mi"&gt;3&lt;/span&gt;      &lt;span class="mi"&gt;3&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;449490&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”šè‡³è¿˜å¯ä»¥å¯¹æ¯ä¸€åˆ—è¿›è¡Œå¤šä¸ªå¤„ç†æ“ä½œ:
    In [100]: g.agg({'two': [sum],'three': [sqrt,exp]})
    Out[100]: 
         two     three          &lt;br/&gt;
         sum      sqrt         exp
    one                         &lt;br/&gt;
    1      1  1.414214    7.389056
    2      2  2.000000   54.598150
    3      3  2.449490  403.428793&lt;/p&gt;
&lt;p&gt;å…·ä½“è§: &lt;a href="http://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns"&gt;http://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç»Ÿè®¡å‡ºç°é¢‘ç‡&lt;/strong&gt;
æ–¹æ³•1: 
&lt;code&gt;_hkhist=hk.groupby(groups).count().ix[:,0]#count of groupes&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;æ–¹æ³•2:
&lt;code&gt;hk.groupby('dep').size()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ–¹æ³•3:
(åªé€‚ç”¨äºä¸€åˆ—çš„æƒ…å†µ)
&lt;code&gt;hk.dep.value_counts()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠŠä¸€åˆ—indexè½¬ä¸ºcolumn(ä¸å†ä½œä¸ºindexä½¿ç”¨)&lt;/strong&gt;
&lt;a href="http://stackoverflow.com/questions/20461165/how-to-convert-pandas-index-in-a-dataframe-to-a-column"&gt;http://stackoverflow.com/questions/20461165/how-to-convert-pandas-index-in-a-dataframe-to-a-column&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚, åŸæ¥çš„dataframeæ˜¯ä¸‰å±‚indexçš„, columnåªæœ‰ä¸€åˆ—(åå­—å«åš'0'):&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./pandas%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/pasted_image002.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;df.reset_index(level=2,inplace=True)&lt;/code&gt;
è¿™æ ·å°±å¯ä»¥æŠŠç¬¬ä¸‰å±‚çš„å†…å®¹ä½œä¸ºä½¿ç”¨, è€Œä¸æ˜¯ä½œä¸ºindex, ç°åœ¨columnæœ‰ä¸¤åˆ—äº†, å†ç»™ä¸¤åˆ—å‘½åä¸€ä¸‹:
&lt;code&gt;hist_hub.columns = ['hub','occurrence']&lt;/code&gt;
å°±å¾—åˆ°äº†:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./pandas%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/pasted_image003.png"/&gt;&lt;/p&gt;
&lt;p&gt;å…³äºlevelè¿™ä¸ªå‚æ•°:
level : int, str, tuple, or list, default None
Only remove the given levels from the index. Removes all levels by default&lt;/p&gt;
&lt;h2 id="plotting"&gt;Plotting&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://cloga.info/python/2014/02/23/Plotting_with_Pandas/"&gt;http://cloga.info/python/2014/02/23/Plotting_with_Pandas/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç»Ÿè®¡å‡ºç°æ¬¡æ•°, ç”»æŸ±çŠ¶å›¾:&lt;/strong&gt;
    g=hk.groupby('dep')
    dd=g['dst'].count()
    dd.plot(kind='bar')&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./pandas%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/pasted_image.png"/&gt;
æˆ–è€…ç”¨pandasæä¾›çš„:
&lt;a href="http://pandas.pydata.org/pandas-docs/stable/basics.html#value-counts-histogramming-mode"&gt;http://pandas.pydata.org/pandas-docs/stable/basics.html#value-counts-histogramming-mode&lt;/a&gt;
nb=hk['#vol_hacker']
hist=nb.value_counts()*100.0/len(hk)
hist=hist.sort_index()
hist.plot(kind='bar')&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç§¯ç´¯åˆ†å¸ƒæ›²çº¿&lt;/strong&gt;
&lt;a href="http://stackoverflow.com/questions/6326360/python-matplotlib-probability-plot-for-several-data-set"&gt;http://stackoverflow.com/questions/6326360/python-matplotlib-probability-plot-for-several-data-set&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;counts, start, dx, _ = scipy.stats.cumfreq(data, numbins=20)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;x = np.arange(counts.size) * dx + start&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;plt.plot(x, counts, 'ro')&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ–è€…ç”¨pandasæä¾›çš„ä¸œè¥¿ä¹Ÿèƒ½åšå§:
&lt;a href="http://pandas.pydata.org/pandas-docs/stable/basics.html#discretization-and-quantiling"&gt;http://pandas.pydata.org/pandas-docs/stable/basics.html#discretization-and-quantiling&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;hist2d&lt;/strong&gt;
ç”¨pcolormesh
&lt;a href="http://www.physicsforums.com/showthread.php?t=653864"&gt;http://www.physicsforums.com/showthread.php?t=653864&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è²Œä¼¼è¦è½¬ç½®!!
&lt;a href="http://stackoverflow.com/questions/24791614/numpy-pcolormesh-typeerror-dimensions-of-c-are-incompatible-with-x-and-or-y"&gt;http://stackoverflow.com/questions/24791614/numpy-pcolormesh-typeerror-dimensions-of-c-are-incompatible-with-x-and-or-y&lt;/a&gt;&lt;/p&gt;</summary><category term="pandas"></category><category term="python"></category></entry><entry><title>python pickle çš„ä¸€ä¸ªå°é—®é¢˜</title><link href="https://x-wei.github.io/tech/python%20pickle%20%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98.html" rel="alternate"></link><published>2014-07-15T00:00:00+02:00</published><updated>2014-07-15T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-07-15:tech/python pickle çš„ä¸€ä¸ªå°é—®é¢˜.html</id><summary type="html">&lt;p&gt;pythonçš„pickle/unpickleæœºåˆ¶å¯ä»¥éå¸¸æ–¹ä¾¿çš„ä¿å­˜ä¸€äº›è®¡ç®—çš„ä¸­é—´ç»“æœ, è¿™ä¸€ç‚¹javaè™½ç„¶ä¹Ÿå¯ä»¥åšåˆ°, ä½†æ˜¯javaé‡Œé¢çš„åŒ…çš„åå­—å®åœ¨æ˜¯é•¿çš„è®©äººè®°ä¸ä½...&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ä»Šå¤©åœ¨ä½¿ç”¨pickleçš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜. &lt;/p&gt;
&lt;p&gt;æ˜¯è¿™æ ·çš„, åŸæœ¬å†™äº†ä¸€ä¸ªç¨‹åº&lt;code&gt;main.py&lt;/code&gt;, è¿™ä¸ªç¨‹åºé‡Œè¿›è¡Œäº†ä¸€äº›è®¡ç®—å¹¶ä¸”pickleä¸‹äº†è¿™äº›å†…å®¹, åæ¥æˆ‘è§‰å¾—ä¸€ä¸ªç¨‹åºmain.pyå†™è¿™ä¹ˆå¤šå®åœ¨å¤ªé•¿äº†, äºæ˜¯å°±æŠŠé‚£äº›è¾…åŠ©å‡½æ•°ä»¥åŠclassçš„å®šä¹‰é€šé€šæ”¾è¿›äº†ä¸€ä¸ª&lt;code&gt;util.py&lt;/code&gt;æ–‡ä»¶é‡Œ. å¹¶ä¸”åœ¨main.pyçš„ç¬¬ä¸€è¡Œå†™ä¸Š: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;from util import *&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŒ‰ç†è¯´è¿™åº”è¯¥æ²¡æœ‰é—®é¢˜, å’Œä¸€ä¸ªmainæ–‡ä»¶æ—¶è¿è¡Œçš„æ•ˆæœç›¸åŒçš„, ä½†æ˜¯å½“æˆ‘è¿è¡Œçš„æ—¶å€™å´æ˜¾ç¤ºutil.pyé‡Œé¢è¿™è¡Œunpickleçš„è¯­å¥æœ‰é”™è¯¯:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;airport_info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'airport_info.dict'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'rb'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="ne"&gt;AttributeError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'module'&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt; &lt;span class="n"&gt;attribute&lt;/span&gt; &lt;span class="s1"&gt;'Airport'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…¶ä¸­&lt;code&gt;Airport&lt;/code&gt;æ˜¯æˆ‘å®šä¹‰çš„ä¸€ä¸ªç±», æœ¬æ¥åœ¨main.pyé‡Œé¢, åæ¥è¢«æˆ‘ç§»åŠ¨åˆ°äº†util.pyé‡Œé¢...&lt;/p&gt;
&lt;p&gt;æ„Ÿè§‰å¾ˆå¥‡æ€ª, äºæ˜¯å»&lt;a href="https://bbs.sjtu.edu.cn/frame2.html"&gt;æ°´æº&lt;/a&gt;æ±‚åŠ©, æœç„¶fcfarseerå­¦é•¿å°±å¾ˆå¿«ç»™äº†&lt;a href="https://bbs.sjtu.edu.cn/bbscon,board,Script,file,M.1405431916.A.html"&gt;å›å¤&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨pickleä¸€å€‹å°è±¡çš„æ™‚å€™ï¼Œpickleæœƒè¨˜ä½é€™å€‹å°è±¡çš„classæ˜¯å®šç¾©åœ¨å“ªå€‹python
æºæ–‡ä»¶è£ï¼Œç„¶å¾Œå†unpickleçš„æ™‚å€™ï¼Œpickleæœƒè‡ªå‹•importé‚£å€‹æºæ–‡ä»¶ä»¥ç²å¾—classçš„å®šç¾©ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¦‚æœå®šç¾©classçš„æ–‡ä»¶åœ¨é€™æœŸé–“æ”¹éçš„è©±ï¼Œå°±æœƒæ‹‹å‡ºé¡ä¼¼çš„éŒ¯èª¤ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥é—®é¢˜å‡ºåœ¨è¿™é‡Œ(æˆ‘çš„ç†è§£): åŸå…ˆæˆ‘æŠŠæ•°æ®pickleè¿›æ–‡ä»¶çš„æ—¶å€™, &lt;code&gt;Airportè¿™ä¸ªclassæ˜¯å®šä¹‰åœ¨äº†main.pyé‡Œé¢, æ‰€ä»¥å½“æˆ‘åœ¨util.pyé‡Œé¢loadæ•°æ®çš„æ—¶å€™, pickleå‘ç°åŸæ¥çš„main.pyé‡Œé¢å·²ç»æ²¡æœ‰äº† Airportè¿™ä¸ªclass, äºæ˜¯å°±å‡ºç°äº†Error...&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è§£å†³åŠæ³•ä¹Ÿä¸éš¾, åªéœ€è¦åœ¨&lt;code&gt;util.py&lt;/code&gt;é‡Œé¢å†ç”Ÿæˆä¸€ä¸‹é‚£äº›è¦loadçš„æ•°æ®æ–‡ä»¶, ä¹‹åå†æ¬¡unpickleçš„æ—¶å€™å°±ä¼šå»&lt;code&gt;util.py&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;main.py&lt;/code&gt;é‡Œæ‰¾classçš„å®šä¹‰, ä¹Ÿå°±æ²¡æœ‰é—®é¢˜äº†!&lt;/p&gt;
&lt;p&gt;ä»Šå¤©ç¢°åˆ°çš„è¿™ä¸ªé—®é¢˜ä¸æ˜¯é‚£ä¹ˆevident, æ‰€ä»¥ç‰¹åœ°è®°ä¸€ä¸‹.&lt;/p&gt;</summary><category term="python"></category></entry><entry><title>A byte of Python ç¬”è®°</title><link href="https://x-wei.github.io/tech/byte_of_python%E7%AC%94%E8%AE%B0.html" rel="alternate"></link><published>2014-04-10T00:00:00+02:00</published><updated>2014-04-10T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-04-10:tech/byte_of_pythonç¬”è®°.html</id><summary type="html">&lt;p&gt;æ®è¯´è¿™æœ¬ä¹¦æ˜¯æœ€å¥½çš„å…¥é—¨è¯»ç‰©, å†µä¸”åªæœ‰100æ¥é¡µ (å‡æ‰å‰é¢åé¢é‚£äº›æ‰¯æ·¡çš„ ä¸åˆ°100é¡µ...)&lt;/p&gt;
&lt;p&gt;é‚£å°±ç”¨è¿™æœ¬ä¹¦è¿‡ä¸€ä¸‹pyçš„åŸºæœ¬çŸ¥è¯†ç‚¹å§! çœ‹å®Œä»¥åæ”¶è·ä¸å°‘, æŠŠpyæ¶‰åŠçš„å¾ˆå¤§ä¸€éƒ¨åˆ†éƒ½è®²åˆ°äº†. è¿™æœ¬ä¹¦å·²ç»æ˜¯å¤Ÿå‹ç¼©çš„äº†, ä¸è¿‡æˆ‘è¿˜æ˜¯è¾¹çœ‹è¾¹è‡ªå·±å†å‹ç¼©äº†ä¸€é(å†™åœ¨zimç¬”è®°é‡Œ). &lt;/p&gt;
&lt;p&gt;æˆ‘çœ‹çš„æ˜¯1.20ç‰ˆæœ¬, 2004å¹´çš„, å› ä¸ºè¿™ä¸ªç‰ˆæœ¬é’ˆå¯¹çš„æ˜¯py2.x, ä½œè€…ä¸»é¡µä¸Šç°åœ¨çš„ç‰ˆæœ¬é’ˆå¯¹çš„æ˜¯py3. å¦å¤–æ„Ÿè§‰æ²¡å¿…è¦çœ‹ä¸­æ–‡ç¿»è¯‘ç‰ˆ, å› ä¸ºè¿™é‡Œç”¨çš„è‹±è¯­æ¯”è¾ƒç®€å•, è€Œä¸”æœ‰çš„æ—¶å€™ä¸­æ–‡ç¿»è¯‘åè€Œä¸å¦‚åŸæ–‡è¡¨è¾¾çš„æ°å½“.&lt;/p&gt;
&lt;h1 id="prefacech1ch2"&gt;preface+ch1+ch2&lt;/h1&gt;
&lt;p&gt;æ‰¯æ·¡...&lt;/p&gt;
&lt;h1 id="ch3-first-steps"&gt;ch3. First Steps&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;There are two ways of using Python to run your program - using the interactive interpreter prompt or using a source file.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Anything to the right of the # symbol is a comment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;the shebang line&lt;/strong&gt; - whenever the first two characters of the source file are &lt;code&gt;#!&lt;/code&gt; followed by the location of a program, this tells your Linux/Unix system that this program should be run with this interpreter when you execute the program.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(Note that you can always run the program on any platform by specifying the interpreter directly on the command line such as the command python helloworld.py .)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use the built-in help functionality.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;or example, run &lt;code&gt;help(str)&lt;/code&gt; - this displays the help for the str class which is used to store all text (strings) that you use in your program.&lt;/p&gt;
&lt;h1 id="ch4-the-basics"&gt;ch4. The Basics&lt;/h1&gt;
&lt;h2 id="literal-constants"&gt;Literal Constants&lt;/h2&gt;
&lt;p&gt;It is called a literal because it is literal - you use its value literally. ex. number 2, or string "hello".&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;number&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Numbers in Python are of four types - integers, long integers, floating point and complex numbers.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-Examples of floating point numbers (or floats for short) are 3.23 and 52.3E-4. The E notation indicates powers of 10. In this case, 52.3E-4 means 52.3 * 10-4.
-Examples of complex numbers are (-5+4j) and (2.3 - 4.6j)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;string&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;stringå¯ä»¥ç”¨Single/Double/Triple Quotesæ‹¬èµ·æ¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;escape sequence&lt;/em&gt;: \', \n, \t, ä»¥åŠåœ¨è¡Œæœ«ä½œä¸ºç»­è¡Œç¬¦å·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;raw string&lt;/strong&gt;: to specify some strings where no special processing such as escape sequences are handled, then what you need is to specify a raw string by prefixing r or R to the string. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ex. &lt;code&gt;r"Newlines are indicated by \n"&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;unicode text:  prefix u or U. For example, &lt;code&gt;u"This is a Unicode string."&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Remember to use Unicode strings when you are dealing with text files, especially when you know that the file will contain text written in languages other than English.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Strings are immutable:  once you have created a string, you cannot change it.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;String literal concatenation: If you place two string literals side by side, they are automatically concatenated by Python. For example, '&lt;code&gt;What\'s' 'your name?&lt;/code&gt;' is automatically converted in to &lt;code&gt;"What's your name?".&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Note for Regular Expression Users: Always use raw strings when dealing with regular expressions. Otherwise, a lot of backwhacking may be required. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="variables"&gt;Variables&lt;/h2&gt;
&lt;p&gt;é¡¾åæ€ä¹‰å°±æ˜¯å¯ä»¥å¯ä»¥å˜çš„é‡...
Unlike literal constants, you need some method of accessing these variables &lt;em&gt;and hence you give them names&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Identifier(æ ‡ç¤ºç¬¦)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Identifiers&lt;/strong&gt; are names given to identify something. 
The first character of the identifier must be a letter of the alphabet (upper or lowercase) &lt;em&gt;or an underscore ('_')&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Objects&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python refers to anything used in a program as an object.
Python is &lt;strong&gt;strongly object-oriented&lt;/strong&gt; in the sense that everything is an object &lt;em&gt;including numbers, strings and even functions&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Variables are used by just assigning them a value. No declaration or data type definition is needed/used.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Logical and Physical Lines: Implicitly, Python encourages the use of a single statement per line which makes code more readable. If you want to specify more than one logical line on a single physical line, then you have to explicitly specify this using a semicolon (;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;explicit line joining: ex. ç»­è¡Œç¬¦\;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;implicit line joining: ex. æ‹¬å·...&lt;/p&gt;
&lt;h2 id="indentation"&gt;Indentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Leading whitespace (spaces and tabs) at the beginning of the logical line is used to determine the indentation level of the logical line, which in turn is used to determine the grouping of statements.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;This means that statements which go together must have the same indentation. Each such set of state- ments is called a &lt;em&gt;block&lt;/em&gt;. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Do not use a mixture of tabs and spaces for the indentation as it does not work across different platforms properly. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch5-operators-and-expressions_1"&gt;ch5. Operators and Expressions&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;expressions&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An expression can be broken down into &lt;em&gt;operators&lt;/em&gt; and &lt;em&gt;operands&lt;/em&gt;. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€äº›oprators: &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;**, //, &amp;lt;&amp;lt;, &amp;gt;&amp;gt;, &amp;amp;, |, ^, ~, not, and, or&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Operator Precedence: ä¼˜å…ˆçº§çš„ä¸€ä¸ªè¡¨...&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Associativity: &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Operators are usually associated from left to right i.e. operators with same precedence are evaluated in a left to right manner. For example, &lt;code&gt;2 + 3 + 4&lt;/code&gt; is evaluated as &lt;code&gt;(2 + 3) + 4&lt;/code&gt;. Some operators like assignment operators have right to left associativity i.e. &lt;code&gt;a = b = c&lt;/code&gt; is treated as &lt;code&gt;a = (b = c)&lt;/code&gt;.&lt;/p&gt;
&lt;h1 id="ch6-control-flow"&gt;ch6. Control Flow&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;if&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;if-elif-else&lt;/code&gt; statement: This makes the program easier and reduces the amount of indentation required. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;There is &lt;em&gt;no switch statement in Python:&lt;/em&gt; You can use an if..elif..else statement to do the same thing (and in some cases, use a dictionary to do it quickly)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;while&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Remember that you can have &lt;em&gt;an &lt;strong&gt;&lt;em&gt;else&lt;/em&gt;&lt;/strong&gt; clause for the while loop&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;for&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-The &lt;code&gt;for..in&lt;/code&gt; statement is another looping statement which &lt;em&gt;iterates&lt;/em&gt; over a sequence of objects i.e. go
through each item in a sequence, a &lt;em&gt;sequence&lt;/em&gt; is just an ordered collection of items.
-optional &lt;strong&gt;else&lt;/strong&gt; part  also.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;break&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;to break out of a loop statement i.e. stop the execution of a looping statement, even if the loop condition has not become False or the sequence of items has been completely iterated over.
-An important note is that if you break out of a for or while loop, &lt;em&gt;any corresponding loop else block is &lt;strong&gt;&lt;em&gt;not&lt;/em&gt;&lt;/strong&gt; executed.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;continue&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;used to tell Python to skip the rest of the statements in the current loop block and to continue to the &lt;em&gt;next iteration&lt;/em&gt; of the loop.&lt;/p&gt;
&lt;h1 id="ch7-functions"&gt;ch7. Functions&lt;/h1&gt;
&lt;p&gt;Functions are reusable pieces of programs. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;def func_name()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;parameters:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note the terminology used - the names given in the function definition are called &lt;em&gt;parameters(è¡Œå‚)&lt;/em&gt; whereas the values you supply in the function call are called &lt;em&gt;arguments(å®å‚)&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="scope"&gt;scope&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;local variables:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All variables have the &lt;strong&gt;scope&lt;/strong&gt; of the block they are declared in starting from the point of definition of the name.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;global variables&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you want to assign a value to a name defined outside the function, then you have to tell Python that the name is not local, but it is global. We do this using the &lt;code&gt;global&lt;/code&gt; statement. &lt;/p&gt;
&lt;h2 id="default-argument-values"&gt;Default Argument Values&lt;/h2&gt;
&lt;p&gt;Default Argument Valuesé»˜è®¤å‚æ•°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You can specify default argument values for parameters by following the parameter name in the function definition with the assignment operator (=) followed by the default value.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Note that the default argument value should be &lt;em&gt;immutable.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;you cannot have a parameter with a default argument value &lt;em&gt;before&lt;/em&gt; a parameter without a default argument value in the order of parameters declared in the function parameter list.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is because the values are &lt;em&gt;assigned to the parameters by position&lt;/em&gt;. For example, &lt;code&gt;def func(a, b=5)&lt;/code&gt; is valid, but &lt;code&gt;def func(a=5, b)&lt;/code&gt; is not valid.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Keyword Arguments&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you have some functions with many parameters and you want to specify only some of them, then you can give values for such parameters by naming them - this is called keyword arguments - we &lt;em&gt;use the name (keyword) instead of the position&lt;/em&gt; to specify the arguments to the function.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;return&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;used to &lt;em&gt;return&lt;/em&gt; from a function i.e. break out of the function. We can optionally return a value from the function as well.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;return None&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-a return statement without a value is equivalent to &lt;code&gt;return None&lt;/code&gt;. None is a special type in Python that represents nothingness. For example, it is used to indicate that a variable has no value if it has a value of None.
-Every function implicitly contains a return None statement at the end unless you have written your own return statement.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pass&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;the &lt;code&gt;pass&lt;/code&gt; statement is used in Python to indicate an empty block of statements.&lt;/p&gt;
&lt;h2 id="docstrings"&gt;DocStrings&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;A string on the first logical line of a function&lt;/em&gt; is the &lt;strong&gt;docstring&lt;/strong&gt; for that function (also apply to modules and classes). &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;func.__doc__&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The convention: a multi-line string where the first line starts with a capital letter and ends with a dot. Then the second line is blank followed by any detailed explanation starting from the third line. &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch8-modules_1"&gt;ch8. Modules&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;A module is basically &lt;strong&gt;a file&lt;/strong&gt;&lt;em&gt; containing all your functions and variables that you have defined&lt;/em&gt;. &lt;/li&gt;
&lt;li&gt;To reuse the module in other programs, the filename of the module must have a .py extension.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ex-sys-module"&gt;ex. sys module&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;When Python executes the &lt;code&gt;import sys&lt;/code&gt; statement, it looks for the sys.py module in one of the directores listed in its &lt;code&gt;sys.path&lt;/code&gt; variable. If the file is found, then the statements in the main block of that module is run and then the module is made available for you to use.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;sys.argv&lt;/code&gt; variable is a list of strings, contains the list of command line arguments i.e. the arguments passed to your program using the command line. å³ç¨‹åºæ‰§è¡Œæ—¶ä¼ ç»™çš„å‚æ•°åˆ—è¡¨.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;sys.path&lt;/code&gt; contains &lt;em&gt;the list of directory names where modules are imported&lt;/em&gt; from. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observe that the first string in sys.path is empty - this empty string indicates that &lt;em&gt;the current directory&lt;/em&gt; is also part of the sys.path which is same as the &lt;code&gt;PYTHONPATH&lt;/code&gt; environment variable. This means that you can directly import modules located in the current directory. Otherwise, you will have to place your module in one of the directories listed in sys.path .&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Byte-compiled .pyc files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Importing a module is a relatively costly affair.
This .pyc file is useful when you import the module the next time from a different program - it will be much faster since part of the processing required in importing a module is already done. Also, these byte-compiled files are platform-independent. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;from..import &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you want to directly import the &lt;code&gt;argv&lt;/code&gt; variable into your program (to avoid typing the &lt;code&gt;sys.&lt;/code&gt; everytime for it), then you can use the &lt;code&gt;from sys import argv&lt;/code&gt; statement.
not recommended...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__name__&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Every Python module has it's &lt;code&gt;__name__&lt;/code&gt; defined and if this is '&lt;code&gt;__main__&lt;/code&gt;', it implies that the module is being run standalone by the user and we can do corresponding appropriate actions.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Every Python program is also a module. You just have to make sure it has a .py extension. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="dir-function"&gt;dir() function&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You can use the built-in dir function to &lt;em&gt;list the identifiers&lt;/em&gt; that a module defines. The identifiers are the &lt;strong&gt;functions, classes, variables and imported modules&lt;/strong&gt; defined in that module.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;When you supply a module name to the dir() function, it returns the list of the names defined in that module. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;When no argument is applied to it, it returns the list of names defined in the current module.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch9-data-structures_1"&gt;ch9. Data Structures&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Data structures are structures which can hold some data together. In other words, they are used to store a collection of related data.&lt;/li&gt;
&lt;li&gt;3 built-in data structures in Python - &lt;strong&gt;list, tuple and dictionary&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="list-abc"&gt;List [a,b,c]&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;a data structure that holds an ordered collection of items. &lt;/li&gt;
&lt;li&gt;a &lt;em&gt;mutable&lt;/em&gt; data type&lt;/li&gt;
&lt;li&gt;you can add any kind of object to a list including numbers and even other lists.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;indexing &lt;/em&gt;operator: &lt;code&gt;a_list[1]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;len(a_list)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a_list.append()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;for..in&lt;/code&gt; loop to iterate through the items of the list&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a_list.sort()&lt;/code&gt;: this method affects the list itself and does not return a modified list&lt;/li&gt;
&lt;li&gt;&lt;code&gt;del a_list[0]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tuple-abc"&gt;Tuple (a,b,c)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tuples are just like lists except that they are &lt;strong&gt;immutable&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Tuples are usually used in cases where a statement or a user-defined function can safely assume that the collection of values (i.e. the tuple of values) used will not change.&lt;/li&gt;
&lt;li&gt;can contain another tuple, another list......&lt;/li&gt;
&lt;li&gt;singleton: &lt;code&gt;t=(2,)&lt;/code&gt;(comma is necessary!)&lt;/li&gt;
&lt;li&gt;empth: t=()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;indexing: a_touple[0]&lt;/li&gt;
&lt;li&gt;len(a_tuple)&lt;/li&gt;
&lt;li&gt;used for output format:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;print '%s is %d years old' % (name, age)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="dictionary" k1:v1_="k1:v1," k2:v2="k2:v2"&gt;Dictionary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;key-value mapping&lt;/li&gt;
&lt;li&gt;you can use only immutable objects (like strings) for the keys of a dictionary but you can use either immutable or mutable objects for the values of the dictionary. (This basically translates to say that you should use only simple objects for keys.)&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªdictä¸­çš„keysä¸å¿…åŒæ ·type, valuesä¹Ÿæ˜¯! &lt;/li&gt;
&lt;li&gt;key/value pairs in a dictionary are &lt;em&gt;not ordered&lt;/em&gt; in any manner.&lt;/li&gt;
&lt;li&gt;instances/objects of the dict class.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;adding key-value pair by indexing: &lt;code&gt;dic[key]=val&lt;/code&gt;&lt;em&gt;(overwrite if key already exists!)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;deleting: &lt;code&gt;del dic[key]&lt;/code&gt;&lt;em&gt;(KeyError if key doesn't exist!)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dic.items()&lt;/code&gt;&lt;em&gt;è¿”å›ä¸€ä¸ªlist of tuples&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;dic.items()
[(k1,v1), (k2,v2)]
for k,v in dic.items:
    print k, v&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dic.keys()&lt;/code&gt;&lt;em&gt;è¿”å›keysçš„list&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;test: &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;the &lt;code&gt;in&lt;/code&gt; operator: &lt;code&gt;if akey in dic&lt;/code&gt;
or even the &lt;code&gt;has_key&lt;/code&gt; method of the dict class: &lt;code&gt;if dic.has_key(k)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="sequences"&gt;Sequences&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Lists, tuples and strings are examples of sequences&lt;/li&gt;
&lt;li&gt;Two of the main features of a sequence is the &lt;strong&gt;indexing&lt;/strong&gt; operation which allows us to fetch a particular item in the sequence directly and the &lt;strong&gt;slicing&lt;/strong&gt; operation which allows us to retrieve a slice of the sequence i.e. a part of the sequence.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The great thing about sequences is that you can access tuples, lists and strings all in the same way!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;indexing(seq can be List or Tuple or String):&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;seq&lt;code&gt;[2], seq[-1]&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;slicing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;seq&lt;code&gt;[1:3]&lt;/code&gt; &lt;em&gt;(from 1 to 2!)&lt;/em&gt;
&lt;code&gt;seq[:]&lt;/code&gt; &lt;em&gt;(a whole copy of the list)&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;What you need to remember is that if you want to make a copy of a list or such kinds of sequences or complex objects (not simple objects such as integers), then you have to use the slicing operation(&lt;code&gt;list[:]&lt;/code&gt;) to make a copy.&lt;/li&gt;
&lt;li&gt;If you just assign the variable name to another name, both of them will refer to the same object and this could lead to all sorts of trouble if you are not careful.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="string"&gt;String&lt;/h2&gt;
&lt;p&gt;methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;str.startswith('a')&lt;/code&gt; &lt;em&gt;return boolean&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;str.find(substr)&lt;/code&gt; &lt;em&gt;return index of subster or -1 if not found&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;substr in str&lt;/code&gt; &lt;em&gt;return boolean&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;str.join(strseq)&lt;/code&gt; &lt;em&gt;use str as delimiter to joint the items in strseq&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch10-problem-solving-writing-a-python-script_1"&gt;ch10. Problem Solving - Writing a Python Script&lt;/h1&gt;
&lt;p&gt;"a program which creates a backup of all my important files"&lt;/p&gt;
&lt;h2 id="1st-version"&gt;1st version&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Run the command using the &lt;code&gt;os.system&lt;/code&gt; function which runs the command as if it was run from the system i.e. in the shell - it returns 0 if the command was successfully, else it returns an error number.&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;source = ['/home/swaroop/byte', '/home/swaroop/bin']&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;target_dir = '/mnt/e/backup/'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;target = target_dir + time.strftime('%Y%m%d%H%M%S') + '.zip'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;zip_command = "zip -qr '%s' %s" % (target, ' '.join(source))&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;if os.system(zip_command) == 0:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    print 'Successful backup to', target&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;else:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;    print 'Backup FAILED'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2nd-version"&gt;2nd version&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;using the time as the name of the file within a directory with the current date as a directory within the main backup directory.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;if not os.path.exists(today):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    os.mkdir(today) # make directory&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;target = today + os.sep + now + '.zip'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;os.sep&lt;/code&gt; variable - this gives the directory separator according to your operating system i.e. it will be '/' in Linux, Unix, it will be '\' in Windows and ':' in Mac OS.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3rd-version"&gt;3rd version&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;attaching a user-supplied comment to the name of the zip archive.&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;comment = raw_input('Enter a comment --&amp;gt; ')&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;if len(comment) == 0: # check if a comment was entered&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    target = today + os.sep + now + '.zip'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;else:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;    target = today + os.sep + now + '_' + \&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;    comment.replace(' ', '_') + '.zip'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="more-refinements"&gt;More Refinements&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;allow extra files and directories to be passed to the script at the command line. We will get these from the sys.argv list and we can add them to our source list using the extend method provided by the list class.&lt;/li&gt;
&lt;li&gt;use of the tar command instead of the zip command. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One advantage is that when you use the tar command along with gzip, the backup is much faster and the backup created is also much smaller. If I need to use this archive in Windows, then WinZip handles such .tar.gz files easily as well.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tar = 'tar -cvzf %s %s -X /home/swaroop/excludes.txt' % (target, ' '.join(srcdir))&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The most preferred way of creating such kind of archives would be using the zipfile or tarfile module respectively.&lt;/li&gt;
&lt;li&gt;"Software is grown, not built"&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch11-object-oriented-programming_1"&gt;ch11. Object-Oriented Programming&lt;/h1&gt;
&lt;h2 id="fields-methods"&gt;fields, methods&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;class: &lt;strong&gt;fields&lt;/strong&gt;, &lt;strong&gt;methods&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Fields are of two types - they can belong to each instance/object of the class or they can belong to the class itself. They are called &lt;strong&gt;instance variables&lt;/strong&gt; and &lt;strong&gt;class variables&lt;/strong&gt; respectively.&lt;/li&gt;
&lt;li&gt;ou must refer to the variables and methods of the same object using the &lt;code&gt;self&lt;/code&gt; variable only. This is called an &lt;em&gt;attribute reference&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;we refer to the class variable as &lt;code&gt;ClassName.var&lt;/code&gt; and not as &lt;code&gt;self.var&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="self"&gt;self&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Class methods have only one specific difference from ordinary functions - &lt;em&gt;they must have an extra first name that has to be added to the beginning of the parameter list&lt;/em&gt;, but you do do not give a value for this parameter when you call the method, Python will provide it. &lt;/li&gt;
&lt;li&gt;create an object/instance of this class using the name of the class followed by a pair of parentheses.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-init-method"&gt;The &lt;strong&gt;init&lt;/strong&gt; method&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;__init__()&lt;/code&gt; method is run as soon as an object of a class is instantiated. The method is useful to do any initialization you want to do with your object. &lt;/li&gt;
&lt;li&gt;analogous to a constructor in C++, C# or Java.&lt;/li&gt;
&lt;li&gt;the same, __&lt;code&gt;del__()&lt;/code&gt; method: run when the object is no longer in use and there is no guarantee when that method will be run. If you want to explicitly do this, you just have to use the del statement.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;All class members (including the data members) are &lt;strong&gt;&lt;em&gt;public&lt;/em&gt;&lt;/strong&gt; and all the methods are &lt;strong&gt;&lt;em&gt;virtual&lt;/em&gt;&lt;/strong&gt; in Python.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;One exception: If you use data members with names using the double underscore prefix such as &lt;code&gt;__privatevar&lt;/code&gt;, Python uses name-mangling to effectively make it a private variable.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="inheritance"&gt;Inheritance&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ex:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;class Teacher(SchoolMember)://&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    '''Represents a teacher.'''&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    def __init__(self, name, age, salary):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        SchoolMember.__init__(self, name, age)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        self.salary = salary&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        print '(Initialized Teacher: %s)' % self.name&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;To use inheritance, we specify the base class names in a &lt;strong&gt;tuple&lt;/strong&gt; following the class name in the class definition. --&lt;em&gt;multiple inheritance.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;__init__&lt;/code&gt; method of the base class is explicitly called using the &lt;code&gt;self&lt;/code&gt; variable so that we can initialize the base class part of the object. This is very important to remember - &lt;em&gt;Python does not automatically call the constructor of the base class, you have to explicitly call it yourself.&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch12-inputoutput_1"&gt;ch12. Input/Output&lt;/h1&gt;
&lt;h2 id="files"&gt;Files&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;open and use files for reading or writing by creating an object of the &lt;code&gt;file&lt;/code&gt; class and using its &lt;code&gt;read&lt;/code&gt;, &lt;code&gt;readline&lt;/code&gt; or &lt;code&gt;write&lt;/code&gt; methods appropriately to read from or write to the file. Then finally, when you are finished with the file, you call the &lt;code&gt;close&lt;/code&gt; method to tell Python that we are done using the file.&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;f = file('poem.txt', 'w') # open for 'w'riting&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f.write(poem) # write text to file&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f.close() # close the file&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f = file('poem.txt') # if no mode is specified, 'r'ead mode is assumed by default&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;while True:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    line = f.readline()# This method returns a complete line including the newline character at the end of the line.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    if len(line) == 0: # Zero length indicates EOF&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    break&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    print line, # Notice comma to avoid automatic newline added by Python&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;f.close() # close the file&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="pickle"&gt;Pickle&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Python provides a standard module called &lt;/em&gt;&lt;code&gt;pickle&lt;/code&gt;&lt;em&gt; using which you can store any Python object in a file and then get it back later intact. This is called storing the object persistently.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;There is another module called &lt;code&gt;cPickle&lt;/code&gt; which functions exactly same as the &lt;code&gt;pickle&lt;/code&gt; module except that it is written in the C language and is (upto 1000 times) faster. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;pickling &amp;amp; unpickling:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;cPickle&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;p&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shoplistfile&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'w'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dump&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shoplist&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shoplistfile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;storedlist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;storedlist&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;To store an object in a file, first we open a file object in write mode and store the object into the open file by calling the &lt;code&gt;dump&lt;/code&gt; function of the pickle module. This process is called &lt;em&gt;pickling&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Next, we retrieve the object using the &lt;code&gt;load&lt;/code&gt; function of the pickle module which returns the object. This process is called &lt;em&gt;unpickling&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch13-exceptions_1"&gt;ch13. Exceptions&lt;/h1&gt;
&lt;h2 id="tryexcept"&gt;Try..Except&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;We can handle exceptions using the &lt;code&gt;try..except&lt;/code&gt; statement. We basically put our usual statements within the try-block and put all our error handlers in the except-block.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ex&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;raw_input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Enter something --&amp;gt; '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;EOFError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;Why did you do an EOF on me?'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;# exit the program&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;Some error/exception occurred.'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;# here, we are not exiting the program&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'Done'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;except&lt;/code&gt; clause can handle a single specified error or exception, or a parenthesized list of errors/exceptions. If no names of errors or exceptions are supplied, it will handle all errors and exceptions.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;If any error or exception is not handled, then the default Python handler is called which just stops the execution of the program and prints a message.&lt;/li&gt;
&lt;li&gt;You can also have an &lt;code&gt;else&lt;/code&gt; clause associated with a &lt;code&gt;try..catch&lt;/code&gt; block. The &lt;code&gt;else&lt;/code&gt; clause is executed if no exception occurs.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="raising-exceptions"&gt;Raising Exceptions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;using the &lt;code&gt;raise&lt;/code&gt; statement. &lt;/li&gt;
&lt;li&gt;You also have to specify the name of the error/exception and the exception object that is to be thrown along with the exception. &lt;/li&gt;
&lt;li&gt;The error or exception that you can arise should be class which directly or indirectly is a derived class of the &lt;code&gt;Error&lt;/code&gt; or &lt;code&gt;Exception&lt;/code&gt; class respectively.&lt;/li&gt;
&lt;li&gt;ex.&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="n"&gt;ShortInputException&lt;/span&gt;(&lt;span class="nb"&gt;Exception&lt;/span&gt;):&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="s"&gt;'''A user-defined exception class.'''&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;def&lt;/span&gt; &lt;span class="n"&gt;__init__&lt;/span&gt;(&lt;span class="k"&gt;self&lt;/span&gt;, &lt;span class="n"&gt;length&lt;/span&gt;, &lt;span class="n"&gt;atleast&lt;/span&gt;):&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;Exception&lt;/span&gt;.&lt;span class="n"&gt;__init__&lt;/span&gt;(&lt;span class="k"&gt;self&lt;/span&gt;)&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;self&lt;/span&gt;.&lt;span class="n"&gt;length&lt;/span&gt; = &lt;span class="n"&gt;length&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="k"&gt;self&lt;/span&gt;.&lt;span class="n"&gt;atleast&lt;/span&gt; = &lt;span class="n"&gt;atleast&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;try:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="o"&gt;s&lt;/span&gt; = &lt;span class="n"&gt;raw_input&lt;/span&gt;(&lt;span class="s"&gt;'Enter something --&amp;gt; '&lt;/span&gt;)&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;(&lt;span class="o"&gt;s&lt;/span&gt;) &amp;lt; &lt;span class="mi"&gt;3&lt;/span&gt;:&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="n"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;ShortInputException&lt;/span&gt;(&lt;span class="n"&gt;len&lt;/span&gt;(&lt;span class="o"&gt;s&lt;/span&gt;), &lt;span class="mi"&gt;3&lt;/span&gt;)&lt;span class="c1"&gt;#  specify the name of the error/exception and the exception object that is to be thrown&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;except&lt;/span&gt; &lt;span class="n"&gt;EOFError:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s"&gt;'\nWhy did you do an EOF on me?'&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ShortInputException&lt;/span&gt;, &lt;span class="o"&gt;x&lt;/span&gt;:&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s"&gt;'ShortInputException: The input was of length %d, \&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;                was expecting at least %d'&lt;/span&gt; % (&lt;span class="o"&gt;x&lt;/span&gt;.&lt;span class="n"&gt;length&lt;/span&gt;, &lt;span class="o"&gt;x&lt;/span&gt;.&lt;span class="n"&gt;atleast&lt;/span&gt;)&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;else:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s"&gt;'No exception was raised.'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tryfinally"&gt;Try..Finally&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;What if you were reading a file and you wanted to close the file &lt;em&gt;whether or not an exception was raised&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;before the program exits, the finally clause is executed and the file is closed.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch14-the-python-standard-library_1"&gt;ch14. The Python Standard Library&lt;/h1&gt;
&lt;h2 id="sys-module"&gt;sys module&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sys.argv&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;there is always at least one item in the &lt;code&gt;sys.argv&lt;/code&gt; list which is the name of the current program being run and is available as &lt;code&gt;sys.argv[0]&lt;/code&gt; . Other command line arguments follow this item.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sys.exit&lt;/code&gt; : to exit the running program.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="os-module"&gt;os module&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;os.getcwd()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;gets the current working directory i.e. the path of the directory from which the curent Python script is working.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;os.listdir()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.remove()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.system()&lt;/code&gt;: run a shell command.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.linesep&lt;/code&gt;: string gives the line terminator used in the current platform. &lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.path.split()&lt;/code&gt;: returns the directory name and file name of the path.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.path.isfile()&lt;/code&gt; and &lt;code&gt;os.path.isdir()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ch15-more-python_1"&gt;ch15. More Python&lt;/h1&gt;
&lt;h2 id="special-methods"&gt;Special Methods&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Generally, special methods are used to mimic certain behavior. &lt;/li&gt;
&lt;li&gt;For example, if you want to use the &lt;code&gt;x[key]&lt;/code&gt; indexing operation for your class (just like you use for lists and tuples) then just implement the &lt;code&gt;__getitem__()&lt;/code&gt; method and your job is done.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__init__(self, ...)&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;__del__(self)&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;__str__(self)&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Called when we use the &lt;code&gt;print&lt;/code&gt; statement with the object or when &lt;code&gt;str()&lt;/code&gt; is used.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__lt__(self, other)&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Called when the &lt;em&gt;less than&lt;/em&gt; operator ( &amp;lt; ) is used. Similarly, there are special methods for all the operators (+, &amp;gt;, etc.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__getitem__(self, key)&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Called when x[key] indexing operation is used.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__len__(self)&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Called when the built-in &lt;code&gt;len()&lt;/code&gt; function is used for the sequence object.&lt;/p&gt;
&lt;h2 id="list-comprehension"&gt;List Comprehension&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;used to derive a new list from an existing list.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ex&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;listone = [2, 3, 4]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;listtwo = [2*i for i in listone if i &amp;gt; 2]&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Here, we derive a new list by specifying the manipulation to be done (2*i) when some condition is satisfied (if i &amp;gt; 2).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="receiving-tuples-and-lists-in-functions"&gt;Receiving Tuples and Lists in Functions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;receiving parameters to a function as a &lt;em&gt;tuple&lt;/em&gt; or a &lt;em&gt;dictionary&lt;/em&gt; using the &lt;code&gt;*&lt;/code&gt; or &lt;code&gt;**&lt;/code&gt; prefix respectively. &lt;/li&gt;
&lt;li&gt;This is useful when taking variable number of arguments in the function.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;def powersum(power, *args):...&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Due to the * prefix on the args variable, all extra arguments passed to the function are stored in args as a tuple. If a ** prefix had been used instead, the extra parameters would be considered to be key/value pairs of a dictionary.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="lambda-forms"&gt;Lambda Forms&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;lambda&lt;/code&gt; statement is used to create new function objects and then return them &lt;em&gt;at runtime&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;ex. &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;def make_repeater(n):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    return lambda s: s * n&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;twice = make_repeater(2)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;print twice('word')&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;print twice(5)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;    $ python lambda.py&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    wordword&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    10&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;lambda&lt;/code&gt; statement is used to create &lt;em&gt;the function object&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Essentially, &lt;em&gt;the lambda takes a parameter followed by a single expression only which becomes the body of the function and the value of this expression is returned by the new function.&lt;/em&gt; &lt;/li&gt;
&lt;li&gt;Note that even a print statement cannot be used inside a lambda form, only &lt;em&gt;expressions&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-exec-and-eval-statements"&gt;The exec and eval statements&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;exec&lt;/code&gt; statement is used to execute Python statements which are stored in a string or file.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;eval&lt;/code&gt; statement is used to evaluate valid Python expressions which are stored in a string. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-assert-statement"&gt;The assert statement&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;to assert that something is true. &lt;/li&gt;
&lt;li&gt;For example, if you are very sure that you will have at least one element in a list you are using and want to check this, and raise an error if it is not true, then assert statement is ideal in this situation. &lt;/li&gt;
&lt;li&gt;When the assert statement fails, an AssertionError is raised.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="the-repr-function-or-backticks"&gt;The repr function or Backticks(`)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;to obtain a canonical string representation of the object.&lt;/li&gt;
&lt;li&gt;you will have &lt;code&gt;eval(repr(object)) == object&lt;/code&gt; most of the time.&lt;/li&gt;
&lt;li&gt;Basically, the repr function or the backticks are used to obtain a printable representation of the object.&lt;/li&gt;
&lt;li&gt;can control what your objects return for the repr function by defining the __&lt;code&gt;repr__&lt;/code&gt; method in your class.&lt;/li&gt;
&lt;/ul&gt;</summary><category term="python"></category></entry><entry><title>linuxä¸‹å®‰è£…å¹¶ä½¿ç”¨javaå¼€å‘opencvçš„é…ç½®</title><link href="https://x-wei.github.io/tech/linux%E4%B8%8B%E5%AE%89%E8%A3%85%E5%B9%B6%E4%BD%BF%E7%94%A8java%E5%BC%80%E5%8F%91opencv%E7%9A%84%E9%85%8D%E7%BD%AE.html" rel="alternate"></link><published>2014-02-10T00:00:00+01:00</published><updated>2014-02-10T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2014-02-10:tech/linuxä¸‹å®‰è£…å¹¶ä½¿ç”¨javaå¼€å‘opencvçš„é…ç½®.html</id><summary type="html">&lt;p&gt;ä»Šå¤©èŠ±äº†å››ä¸ªå°æ—¶, ç»ˆäºåœ¨linuxä¸‹æŠŠeclipseä¸‹javaå¼€å‘opencvç»™æå®šäº†... è‡³äºä¸ºä»€ä¹ˆèŠ±è¿™ä¹ˆä¹…çš„æ—¶é—´... ä¸”å¬æˆ‘æ…¢æ…¢è®²... &lt;/p&gt;
&lt;h2 id="linuxbian-yi-an-zhuang-opencv"&gt;linuxç¼–è¯‘å®‰è£…opencv&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆ, linuxä¸‹å®‰è£…opencvå…¶å®ä¸éº»çƒ¦çš„, å‚è€ƒæ–‡æ¡£å³å¯å®Œæˆ:
&lt;a href="http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html"&gt;http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¤§è‡´æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:&lt;/p&gt;
&lt;p&gt;1) å®‰è£…gccä»¥åŠcmakeç­‰ç­‰ä¹±ä¸ƒå…«ç³Ÿçš„è½¯ä»¶(ä¸è¿‡ubuntuä¸‹é»˜è®¤å·®ä¸å¤šéƒ½æœ‰äº†å§...)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;sudo apt-get install build-essential python-dev cmake&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2) ä¸‹è½½opencv-2.4.8.zipå¹¶è§£å‹ç¼©&lt;/p&gt;
&lt;p&gt;3) æ–°å»ºä¸€ä¸ªbuildæ–‡ä»¶å¤¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;cd ~/opencv&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;mkdir build&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;cd build&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4) åœ¨ç»ˆç«¯é‡Œè¾“å…¥: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;make&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sudo make install&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;makeå‘½ä»¤ä¼šèŠ±è´¹å‡ ååˆ†é’Ÿæ—¶é—´...
ç„¶å&lt;strong&gt;ç†è®ºä¸Š&lt;/strong&gt;å°±ç»“æŸäº†... å¦‚æœä¸ç”¨javaå¼€å‘çš„è¯ å°±OKäº† æ¯”å¦‚ å¯ä»¥è¿è¡Œsampleæ–‡ä»¶å¤¹ä¸‹çš„pythonä»£ç ...&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½†æ˜¯&lt;/strong&gt;, å¦‚æœè¦ä½¿ç”¨javaå¼€å‘çš„è¯ éœ€è¦æ¥ç€è¿™æ ·åš.....&lt;/p&gt;
&lt;h2 id="an-zhuang-opencv-java"&gt;å®‰è£…opencv-java&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€æ­¥éå¸¸DT, å› ä¸ºå®˜ç½‘ä¸Šè¿˜æœ‰ä¸€ä¸ªæ–‡æ¡£, ä¸“é—¨è®²æ€ä¹ˆç”¨javaå¼€å‘çš„...
&lt;a href="http://docs.opencv.org/doc/tutorials/introduction/desktop_java/java_dev_intro.html"&gt;http://docs.opencv.org/doc/tutorials/introduction/desktop_java/java_dev_intro.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1) é¦–å…ˆ, éœ€è¦å®‰è£…ant: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;sudo apt-get install ant&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2) å…¶æ¬¡ éœ€è¦è¿è¡Œcmake, å…³é”®æ˜¯cmakeçš„å‚æ•°, å®˜ç½‘ç»™çš„æ˜¯è¿™æ ·çš„: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;export JAVA_HOME=/usr/lib/jvm/java-6-oracle#è¿™å¥ä¸åŠ åº”è¯¥ä¹Ÿå¯ä»¥çš„&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;cmake -DBUILD_SHARED_LIBS=OFF ..&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„çœ‹è¾“å‡ºçš„, å¦‚æœ"To be built"é‡Œé¢æœ‰javaè¿™ä¸€é¡¹çš„è¯, å°±&lt;strong&gt;åº”è¯¥&lt;/strong&gt;æ˜¯OKçš„.... æ¥ä¸‹æ¥åªè¦&lt;code&gt;make -j8&lt;/code&gt; å°±å¯ä»¥äº†...&lt;/p&gt;
&lt;p&gt;æœ€å‘çˆ¹çš„åœ°æ–¹æ¥äº†, ä»¥è¿™æ ·çš„å‚æ•°è¿è¡Œcmakeä»¥å, è¿è¡Œ&lt;code&gt;make -j8&lt;/code&gt;æ€»æ˜¯ä¸æˆåŠŸ, è¯´æœ‰é”™è¯¯.....&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./linuxä¸‹å®‰è£…å¹¶ä½¿ç”¨javaå¼€å‘opencvçš„é…ç½®/pasted_image.png"/&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥äº†åŠå¤©, å‘ç°è¿™æ˜¯ä¸€ä¸ªBUG:
&lt;a href="http://code.opencv.org/issues/2859"&gt;http://code.opencv.org/issues/2859&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¯•ä¸€è¯•åŠ ä¸Šå‚æ•°: &lt;code&gt;-DBUILD_TESTS=OFF&lt;/code&gt; å§...&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰€ä»¥cmakeçš„å‚æ•°è¦è¿™æ ·å†™æ‰å¯ä»¥&lt;/strong&gt;: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -DBUILD_TESTS=OFF ..&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3) ç”¨ä¸Šé¢é‚£æ ·çš„å‚æ•°è¿è¡Œcmakeä»¥å, å†: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;make -j8&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;sudo make install&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥æˆåŠŸmakeäº†...&lt;/p&gt;
&lt;h2 id="ru-he-pan-duan-shi-fou-an-zhuang-cheng-gong"&gt;å¦‚ä½•åˆ¤æ–­æ˜¯å¦å®‰è£…æˆåŠŸ?&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šæ“ä½œç»“æŸå, çœ‹çœ‹buildæ–‡ä»¶å¤¹, binç›®å½•ä¸‹æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ª&lt;code&gt;opencv-248.jar&lt;/code&gt;æ–‡ä»¶:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./linuxä¸‹å®‰è£…å¹¶ä½¿ç”¨javaå¼€å‘opencvçš„é…ç½®/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰çš„è¯ å°±è¯´æ˜æˆåŠŸå®‰è£…äº†opencvçš„javaç»„ä»¶... &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;!!æ³¨æ„!!&lt;/strong&gt;
&lt;strong&gt;ä¸èƒ½ç”¨windowsä¸‹opencvå®‰è£…ç›®å½•ä¸‹çš„é‚£ä¸ªopencv-248.jar&lt;/strong&gt;!! 
åˆšæ‰ç”Ÿæˆé‚£ä¸ªjarå’Œwindowsä¸‹çš„jarä¸ä¸€æ ·çš„!! (æˆ‘æŸ¥äº†MD5ç ... å…¶å®çœ‹æ–‡ä»¶å¤§å°ä¹Ÿèƒ½çœ‹å‡ºæ¥!!)&lt;/p&gt;
&lt;h2 id="eclipsexia-de-pei-zhi"&gt;Eclipseä¸‹çš„é…ç½®&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ç¯‡éå¸¸å¥½çš„å¸–å­, å†™çš„éå¸¸åˆ°ä½, æˆ‘å°±ä¸é‡å¤äº†, é“¾æ¥:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://exintopro.net/blog/2013/10/02/setting-up-eclipse-for-using-opencv-java-in-ubuntu/"&gt;http://exintopro.net/blog/2013/10/02/setting-up-eclipse-for-using-opencv-java-in-ubuntu/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå¸–å­è™½ç„¶å¾ˆå¥½, ä½†æ˜¯æ²¡æœ‰ä»‹ç»ç¼–è¯‘çš„é‚£ä¸€éƒ¨åˆ†, ç”±äºå®‰è£…javaç»„ä»¶æ—¶çš„ç¼–è¯‘è¿‡ç¨‹å’Œå®˜ç½‘ç»™çš„ä¸ä¸€æ ·, æ‰€ä»¥æ‰å¯¼è‡´æˆ‘åºŸäº†åŠå¤©çš„æ—¶é—´å•Š!......&lt;/p&gt;</summary><category term="eclipse"></category><category term="java"></category><category term="opencv"></category></entry><entry><title>javaçº¿ç¨‹å°ç»“</title><link href="https://x-wei.github.io/tech/java%E7%BA%BF%E7%A8%8B%E5%B0%8F%E7%BB%93.html" rel="alternate"></link><published>2013-11-29T00:00:00+01:00</published><updated>2013-11-29T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2013-11-29:tech/javaçº¿ç¨‹å°ç»“.html</id><summary type="html">&lt;p&gt;INF422çš„TD2, è¿™èŠ‚TDæ˜¯è¦åšä¸€ä¸ªå¤šçº¿ç¨‹ç­›é€‰è´¨æ•°çš„ç¨‹åº, å…³äºjavaçš„å¤šçº¿ç¨‹, ä»¥å‰ç”¨è¿‡ä½†æ˜¯ä¸çŸ¥é“å•¥æ„æ€, åœ¨è¿™é‡Œæ€»ç»“ä¸‹. &lt;/p&gt;
&lt;h2 id="chuang-jian-jin-cheng"&gt;åˆ›å»ºè¿›ç¨‹&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å®ç°å¤šçº¿ç¨‹, éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„class, æœ‰ä¸¤ç§æ–¹æ³•: 
&lt;strong&gt;æˆ–è€…ç»§æ‰¿è‡ª&lt;/strong&gt;&lt;code&gt;Thread&lt;/code&gt;&lt;strong&gt;ç±», æˆ–è€…å®ç°&lt;/strong&gt;&lt;code&gt;Runnable&lt;/code&gt;&lt;strong&gt;æ¥å£&lt;/strong&gt;(å…³é”®æ˜¯é‡è½½run()æ–¹æ³•). &lt;/p&gt;
&lt;h3 id="ji-cheng-zi-threadlei"&gt;ç»§æ‰¿è‡ªThreadç±»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å†™æ³•1: å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ªThreadçš„å†…éƒ¨ç±»--&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;class [ç±»å] extends Thread{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;æ–¹æ³•1;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;æ–¹æ³•2ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;public void run(){&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;// â€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;å±æ€§1ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;å±æ€§2ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ–è€…ç”¨ä¸‹é¢ç§&lt;strong&gt;å†…è”(inline)&lt;/strong&gt;çš„å†™æ³•, ä¸ç”¨ç»™è¿™ä¸ªç±»èµ·åå­—äº†(ä¸è¿‡è¿˜è¦ç»™è¿™ä¸ªå®ä¾‹å–åå­—): &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;private Thread [å®ä¾‹å] = new Thread () {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    public void run() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    // ...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;} ;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åè®©è¿›ç¨‹å¼€å§‹, å°±æ˜¯: 
&lt;code&gt;t.start();&lt;/code&gt;
å¦‚æœç”¨&lt;code&gt;t.run()&lt;/code&gt;çš„è¯, åˆ™ä¾ç„¶æ˜¯å¹¶è¡Œæ‰§è¡Œçš„, å¯èƒ½è¾¾ä¸åˆ°å¤šçº¿ç¨‹æ•ˆæœ...&lt;/p&gt;
&lt;h3 id="shi-xian-runnablejie-kou"&gt;å®ç°Runnableæ¥å£&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ–¹æ³•1, ä»£ç : &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;class [ç±»å] implements Runnable{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;æ–¹æ³•1;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;æ–¹æ³•2ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;public void run(){&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    // other codeâ€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;å±æ€§1ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;å±æ€§2ï¼›&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;â€¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–¹æ³•2, å†…è”å†™æ³•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;private Runnable [å®ä¾‹å] = new Runnable() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;public void run() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    //...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt; }&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;};&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="androidshang-xu-yao-zhu-yi-de-yi-dian_1"&gt;androidä¸Šéœ€è¦æ³¨æ„çš„ä¸€ç‚¹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;"Android modifies the user interface and handles input events from &lt;strong&gt;one single&lt;/strong&gt; user interface thread. This thread is also called &lt;strong&gt;the main thread&lt;/strong&gt;."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;Android collects all events in a queue and processed an instance of the Looper class.
&lt;img alt="" class="img-responsive" src="../images/./javaçº¿ç¨‹å°ç»“/pasted_image.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ‰€ä»¥æ³¨æ„è¦ä¿®æ”¹ç”¨æˆ·äº¤äº’çš„ç»„ä»¶(View, Toast, ect.)çš„æ—¶å€™, éœ€è¦åœ¨main Threadé‡Œé¢æ“ä½œ, å¦åˆ™è¿è¡Œæ—¶ä¼šå‡ºé”™!!&lt;/em&gt; &lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆ, å½“å…¶ä»–çº¿ç¨‹è¿›è¡Œè®¡ç®—å®Œæˆä»¥å, è¦åˆ·æ–°å±å¹•çš„æ˜¾ç¤ºæ—¶, éœ€è¦å‘ŠçŸ¥main Thread è¿›è¡Œæ›´æ–°æ˜¾ç¤º:&lt;/p&gt;
&lt;p&gt;"Ajouter un nouvel objet comportant une mÃ©thode run() mettant Ã  jour le nombre d'entier premiers (nouvel objet implÃ©mentant l'interface Runnable). Ã€ la fin du crible, le thread de calcul devra alors envoyer un message (ce nouvel objet) au thread principal pour mettre Ã  jour l'affichage graphique. Cette mise Ã  jour doit Ãªtre faite via un appel Ã  la mÃ©thode post() d'une instance de la classe Handler (l'objet Handler doit Ãªtre instanciÃ© dans le thread principal)."&lt;/p&gt;
&lt;p&gt;Bref, è¦åšåˆ°å¤šçº¿ç¨‹è®¡ç®—, è®¡ç®—ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Š, éœ€è¦:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ·»åŠ ä¸€ä¸ªRunnableå®ä¾‹("ä¸€ä¸ªå®ç°äº†Runnableæ¥å£çš„ç±»çš„å®ä¾‹"), é‡è½½run()æ–¹æ³•å®ç°calcul&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ä¸€ä¸ª&lt;/em&gt;&lt;a href="http://developer.android.com/reference/android/os/Handler.html"&gt;Handler&lt;/a&gt;&lt;em&gt;å®ä¾‹, ç„¶åè°ƒç”¨è¿™ä¸ªHandlerçš„post()æ–¹æ³•.&lt;/em&gt; &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;çœ‹çœ‹æ–‡æ¡£é‡Œæ˜¯å’‹è¯´çš„: &lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;public final boolean post (Runnable r)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;Added in API level 1
Causes the Runnable r to be added to the message queue. The runnable will be run on the thread to which this handler is attached.&lt;/p&gt;
&lt;p&gt;Parameters
r   The Runnable that will be executed.
Returns
Returns true if the Runnable was successfully placed in to the message queue. Returns false on failure, usually because the looper processing the message queue is exiting.&lt;/p&gt;
&lt;p&gt;æ„æ€æ˜¯&lt;code&gt;handler.post(r)&lt;/code&gt;ä¼šæŠŠr(ä¸€ä¸ªRunnableå®ä¾‹)åŠ å…¥message queueä¸­å», &lt;em&gt;è¿™ä¸ªRunnableä¼šåœ¨è¿™ä¸ªhandlerå…³è”çš„Threadä¸­æ‰§è¡Œ&lt;/em&gt;. æ‰€ä»¥åªè¦handlerå…³è”çš„æ˜¯main Thread, å°±å¯ä»¥åœ¨è¿™ä¸ªRunnalbeé‡Œé¢å†™graphicçš„ä»£ç ä¹Ÿä¸ä¼šå‡ºé”™äº†. &lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨Activityç±»çš„å£°æ˜é‡Œå£°æ˜handlerä¸ºä¸€ä¸ªå±æ€§: 
&lt;code&gt;private Handler handler = new Handler();&lt;/code&gt;
è¿™ä¸ªæ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°, æ ¹æ®æ–‡æ¡£, "Default constructor associates this handler with the Looper for the current thread." æ‰€ä»¥è¿™ä¸ªhandlerå…³è”åˆ°äº†current thread, ä¹Ÿå°±æ˜¯main Thread.....&lt;/p&gt;
&lt;h2 id="li-zi"&gt;ä¾‹å­&lt;/h2&gt;
&lt;p&gt;æ‰€ä»¥, å¤šçº¿ç¨‹è®¡ç®—, è®¡ç®—ç»“æŸåä¿®æ”¹å±å¹•æ˜¾ç¤ºçš„è¯, éœ€è¦ä»¥ä¸‹__ä¸‰ä¸ªæ­¥éª¤__(æ¯”ä¸Šé¢çš„ä¿©æ­¥éª¤å¤šäº†ä¸€ä¸ª, ä¸çŸ¥é“æ˜¯å¦è¿˜å¯ä»¥ç®€åŒ–): &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸»çº¿ç¨‹é‡Œå£°æ˜handler, (å£°æ˜æˆActivityçš„ä¸€ä¸ªå±æ€§): &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;private Handler handler = new Handler();&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å†™ä¸€ä¸ªç”¨äºä¿®æ”¹å±å¹•æ˜¾ç¤ºçš„Runnable r(ä¹Ÿå£°æ˜æˆä¸€ä¸ªå±æ€§äº†):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;private Runnable r = new Runnable() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;public void run() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//code to update graphic display...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;};&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†å†™ä¸€ä¸ªè¿›è¡Œè®¡ç®—çš„Thread t, åœ¨è®¡ç®—ç»“æŸå, ç”¨handler.post(r)å®ç°åˆ·æ–°æ˜¾ç¤ºçš„æ•ˆæœ: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;private final Thread t = new Thread() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    public void run() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//...code for calculating...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//ç»“æŸè®¡ç®—ä»¥å, åˆ·æ–°å±å¹•:&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;handler.post(r);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;};&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶ååœ¨onCreate()å‡½æ•°é‡Œ, è®©Thread t å¯åŠ¨èµ·æ¥: &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;t.start();&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;éœ€è¦è®©tä¸€ç›´å¾ªç¯(ç›‘è§†æŸä¸ªflag), å½“flagå˜ä¸ºtrueçš„æ—¶å€™, è¿›è¡Œè®¡ç®—.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†è¾¾åˆ°è¿™ä¸ªæ•ˆæœ, Thread té‡Œé¢çš„run()æ–¹æ³•éœ€è¦è¿™æ ·å†™:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;    public void run() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        while(true) {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            if(flag){&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            //...do the calculation...&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            handler.post(r);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            flag=false;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;            }&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        }   &lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="process-threadhe-runnablede-qu-bie"&gt;Process, Threadå’ŒRunnableçš„åŒºåˆ«?&lt;/h2&gt;
&lt;p&gt;çº¿ç¨‹(Thread)æ˜¯æŒ‡è¿›ç¨‹(Process)ä¸­çš„ä¸€ä¸ªæ‰§è¡Œæµç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚æ¯”å¦‚java.exeè¿›ç¨‹ä¸­å¯ä»¥è¿è¡Œå¾ˆå¤šçº¿ç¨‹ã€‚çº¿ç¨‹æ€»æ˜¯å±äºæŸä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒé“¾æ¥: 
&lt;a href="http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html"&gt;http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html&lt;/a&gt;
&lt;a href="http://www.cnblogs.com/rollenholt/archive/2011/08/28/2156357.html"&gt;http://www.cnblogs.com/rollenholt/archive/2011/08/28/2156357.html&lt;/a&gt;
&lt;a href="http://developer.android.com/reference/android/os/Handler.html"&gt;http://developer.android.com/reference/android/os/Handler.html&lt;/a&gt;
&lt;a href="http://lavasoft.blog.51cto.com/62575/99150"&gt;http://lavasoft.blog.51cto.com/62575/99150&lt;/a&gt;&lt;/p&gt;</summary><category term="android"></category><category term="java"></category></entry><entry><title>ADTç¯å¢ƒæ­å»º</title><link href="https://x-wei.github.io/tech/ADT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" rel="alternate"></link><published>2013-11-08T00:00:00+01:00</published><updated>2013-11-08T00:00:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2013-11-08:tech/ADTç¯å¢ƒæ­å»º.html</id><summary type="html">&lt;p&gt;è¿™å­¦æœŸINF422, ç¬¬ä¸€èŠ‚è¯¾å°±æ˜¯androidå®‰è£…è°ƒè¯•ç¯å¢ƒçš„æ­å»º(å±…ç„¶è¦ä¸€èŠ‚è¯¾?), è¿™é‡Œæ€»ç»“ä¸€ä¸‹.&lt;/p&gt;
&lt;h3 id="di-yi-bu-xia-zai-bundle"&gt;ç¬¬ä¸€æ­¥: ä¸‹è½½bundle&lt;/h3&gt;
&lt;p&gt;ä¸‹è½½&lt;a href="http://developer.android.com/sdk/index.html"&gt;ADT-Bundle&lt;/a&gt;
è§£å‹ç¼©ä»¥åå•¥éƒ½æœ‰äº†, åŒ…å«ä¸€ä¸ªeclipse...&lt;/p&gt;
&lt;h3 id="di-er-bu-xiu-gai-huan-jing-bian-liang"&gt;ç¬¬äºŒæ­¥: ä¿®æ”¹ç¯å¢ƒå˜é‡&lt;/h3&gt;
&lt;p&gt;linuxä¸‹çš„ç¯å¢ƒå˜é‡æ”¾åœ¨&lt;code&gt;.bashrcæ–‡ä»¶&lt;/code&gt;, åŠ å…¥ä¸‹é¢ä¸€è¡Œ: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;PATH=$PATH:&amp;lt;dir&amp;gt;/sdk/tools/:&amp;lt;dir&amp;gt;/sdk/platform-tools/:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­&lt;code&gt;&amp;lt;dir&amp;gt;&lt;/code&gt;æ˜¯æ”¾ç½®SDKçš„ç›®å½•åœ°å€.&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ä¸€ä¸‹å¥½ä¸å¥½ä½¿, åœ¨ç»ˆç«¯ä¸­è¾“å…¥&lt;code&gt;android&lt;/code&gt;, çœ‹æ˜¯å¦ä¼šå¼¹å‡ºSDK manager&lt;/p&gt;
&lt;h3 id="di-san-bu-xin-jian-yi-ge-virtual-machine"&gt;ç¬¬ä¸‰æ­¥: æ–°å»ºä¸€ä¸ªvirtual machine&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ç”¨eclipseçš„AVDmanageråš, ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤è¡Œåš. &lt;/p&gt;
&lt;p&gt;è¾“å…¥:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;android list targets&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰¾åˆ°æƒ³è¦çš„target(æˆ‘ä»¬è¦4.1.2)çš„é‚£ä¸ªid(ä¸€ä¸ªæ•°å­—), ç„¶å, è¿è¡Œå‘½ä»¤: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;android create avd -t &amp;lt;target_id&amp;gt; -n inf422 --abi armeabi-v7a&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±ç”Ÿæˆäº†ä¸€ä¸ªåå«"inf422"çš„è™šæ‹Ÿæœº&lt;/p&gt;
&lt;h3 id="di-si-bu-guan-lian-dao-zi-ding-yi-de-jing-xiang"&gt;ç¬¬å››æ­¥: å…³è”åˆ°è‡ªå®šä¹‰çš„é•œåƒ&lt;/h3&gt;
&lt;p&gt;inf422è¿™é—¨è¯¾æä¾›äº†ä¸€ä¸ªä¿®æ”¹è¿‡çš„androidé•œåƒ, åœ¨&lt;a href="http://www.enseignement.polytechnique.fr/informatique/INF422/ramdisk.img"&gt;è¿™é‡Œ&lt;/a&gt;å’Œ&lt;a href="http://www.enseignement.polytechnique.fr/informatique/INF422/kernel-qemu"&gt;è¿™é‡Œ&lt;/a&gt;ä¸‹è½½, ä¸‹è½½åˆ°æœ¬åœ°çš„ç›®å½•ä¸Šäº†ä»¥å, è¿è¡Œ: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;emulator @inf422 -ramdisk &amp;lt;IMAGES&amp;gt;/ramdisk.img -kernel &amp;lt;IMAGES&amp;gt;/kernel-qemu&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­&lt;images&gt;æ˜¯åˆšåˆšå­˜æ”¾é‚£ä¿©é•œåƒæ–‡ä»¶çš„ç›®å½•. &lt;/images&gt;&lt;/p&gt;
&lt;h3 id="di-wu-bu-telnetlian-jie-xu-ni-ji"&gt;ç¬¬äº”æ­¥: telnetè¿æ¥è™šæ‹Ÿæœº&lt;/h3&gt;
&lt;p&gt;è¯¾ç¨‹é‡Œç”¨çš„emulatorä½¿ç”¨telnetæœåŠ¡å™¨, ä¸”æ˜¯åœ¨è™šæ‹Ÿæœºçš„23ç«¯å£æ¥æ”¶ä¿¡æ¯. å…ˆé‡å®šå‘ä¸€ä¸‹ç«¯å£, å®šå‘åˆ°localhostçš„4444ç«¯å£:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;adb forward tcp:4444 tcp:23&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·, ä»¥åè¦ç™»å½•æ¨¡æ‹Ÿå™¨emulatorçš„æ—¶å€™, åªéœ€è¦è¾“å…¥: &lt;/p&gt;
&lt;p&gt;&lt;code&gt;telnet localhost 4444&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;(ç”¨æˆ·åæ˜¯root, ä¸è¦å¯†ç )&lt;/p&gt;
&lt;h2 id="di-liu-bu-yong-liang-chong-fang-fa-jin-ru-xu-ni-ji_1"&gt;ç¬¬å…­æ­¥: ç”¨ä¸¤ç§æ–¹æ³•è¿›å…¥è™šæ‹Ÿæœº&lt;/h2&gt;
&lt;p&gt;åˆšæ‰çš„4444ç«¯å£æ˜¯è¿›å…¥emulatorç”¨çš„, è€Œæ‰“å¼€è™šæ‹Ÿæœºçš„æ—¶å€™, çª—å£æ ‡é¢˜æ˜¯ä¸€ä¸ªæ•°å­—å†åŠ è™šæ‹Ÿæœºçš„åå­—(æˆ‘çš„æ˜¾ç¤ºçš„æ˜¯"5554:inf422"), è¿™ä¸ª5554æ˜¯å¦å¤–ä¸€ä¸ªç«¯å£, ç”¨äºç”¨shellæ–¹å¼ç™»é™†, ç™»é™†åå¯ä»¥ä½¿ç”¨shellå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶æˆ–è€…è¿›è¡Œä¸€äº›æ“ä½œ. &lt;/p&gt;
&lt;p&gt;è€Œä¸ä¹‹å¯¹åº”, ä»4444ç«¯å£ç™»é™†, åˆ™æ˜¯è¿›å…¥emulatorçš„æ§åˆ¶console&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ä¸¤ç§æ–¹æ³•å’ŒAVDäº¤æµ:&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;console: linuxå‘½ä»¤, å‘½ä»¤è¡Œ&lt;/li&gt;
&lt;li&gt;emulator: å‘é€å‘½ä»¤äº§ç”Ÿä¸€äº›äº‹ä»¶(ç”µè¯, çŸ­ä¿¡, GPSç­‰)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬äºŒç§æ–¹å¼å¯ä»¥æ¨¡æ‹Ÿä¸€äº›æ‰‹æœºäº‹ä»¶, å¾ˆæœ‰ç”¨... ä½¿ç”¨helpå‘½ä»¤æŸ¥çœ‹emulatoræ€ä¹ˆä½¿ç”¨&lt;/p&gt;</summary><category term="android"></category><category term="inf422"></category></entry><entry><title>androidå¼€å‘è§†é¢‘æ•™ç¨‹(é‡åˆ¶ç‰ˆ) ç¬¬ä¸€å­£ è¯¾ç¨‹ç¬”è®°</title><link href="https://x-wei.github.io/tech/android%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B%E7%AC%AC%E4%B8%80%E5%AD%A3%E7%AC%94%E8%AE%B0.html" rel="alternate"></link><published>2013-07-31T00:00:00+02:00</published><updated>2013-07-31T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2013-07-31:tech/androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°.html</id><summary type="html">&lt;h1 id="s01e02-kai-fa-huan-jing-da-jian"&gt;S01E02: å¼€å‘ç¯å¢ƒæ­å»º&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ç›´æ¥å» developer.android.com/sdk/ ä¸‹è½½bundleè§£å‹å³å¯, é‡Œé¢åŒ…å«eclipse&lt;/li&gt;
&lt;li&gt;æ–°å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨: å†…éƒ¨å­˜å‚¨ä¸€èˆ¬64MBè¶³çŸ£:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image002.png"/&gt;&lt;/p&gt;
&lt;h1 id="s01e03-androidxiang-mu-mu-lu-jie-gou"&gt;S01E03: androidé¡¹ç›®ç›®å½•ç»“æ„&lt;/h1&gt;
&lt;h4 id="di-yi-ge-androidcheng-xu"&gt;ç¬¬ä¸€ä¸ªandroidç¨‹åº&lt;/h4&gt;
&lt;p&gt;new--&amp;gt;android application&lt;/p&gt;
&lt;h4 id="mu-lu-jie-gou"&gt;ç›®å½•ç»“æ„&lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image003.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;com.example.helloworldè¿™ä¸ªåŒ…åä¸€èˆ¬ä¸ºç½‘å€å€’ç€å†™, androidæ˜¯æŒ‰ç…§åŒ…åæ¥åŒºåˆ†ä¸åŒAPPçš„&lt;/li&gt;
&lt;li&gt;src/ç›®å½•ä¸‹å­˜æ”¾javaç¨‹åº&lt;/li&gt;
&lt;li&gt;gen/ç›®å½•ä¸‹å­˜æ”¾ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶, R.javaé‡Œç»™æ¯ä¸€ä¸ªæ§ä»¶æˆ–å˜é‡èµ‹äºˆä¸€ä¸ªid, åƒä¸‡__ä¸è¦æ‰‹åŠ¨ä¿®æ”¹R,.javaå†…å®¹__!!&lt;/li&gt;
&lt;li&gt;assets/ç›®å½•ä¸‹å’Œres/ç›®å½•ä¸‹éƒ½å¯ä»¥æ”¾å„ç§å¤–éƒ¨æ–‡ä»¶(ex. å›¾ç‰‡), ä½†æ˜¯assetsä¸‹çš„æ–‡ä»¶ä¸ä¼šåœ¨R.javaä¸­ç”Ÿæˆid&lt;/li&gt;
&lt;li&gt;res/layout/ å­˜æ”¾å¸ƒå±€æ–‡ä»¶(xmlæ ¼å¼)&lt;/li&gt;
&lt;li&gt;AndroidManifest.xmlç”¨äºç»Ÿç­¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e04-ji-zhu-jie-gou_1"&gt;S01E04: æŠ€æœ¯ç»“æ„&lt;/h1&gt;
&lt;h4 id="si-ceng-jie-gou-tu"&gt;å››å±‚ç»“æ„å›¾&lt;/h4&gt;
&lt;p&gt;å¼€å‘ä½äºæœ€ä¸Šå±‚application
&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image004.png"/&gt;&lt;/p&gt;
&lt;h4 id="ji-yu-zu-jian-de-ying-yong-cheng-xu-kai-fa"&gt;åŸºäºç»„ä»¶çš„åº”ç”¨ç¨‹åºå¼€å‘&lt;/h4&gt;
&lt;p&gt;æ­ç§¯æœ¨&lt;/p&gt;
&lt;h4 id="chang-jian-zu-jian"&gt;å¸¸è§ç»„ä»¶&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;activity(è´Ÿè´£ç”¨æˆ·äº¤äº’); &lt;/li&gt;
&lt;li&gt;service(åå°å¤„ç†æ•°æ®); &lt;/li&gt;
&lt;li&gt;Content Provider(å¯¹å¤–æä¾›æ•°æ®); &lt;/li&gt;
&lt;li&gt;BroadcastReceiver(æ¥æ”¶broadcast)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e05-activitychu-bu_1"&gt;S01E05: activityåˆæ­¥&lt;/h1&gt;
&lt;h4 id="activityqi-dong-ji-ben-liu-cheng"&gt;Activityå¯åŠ¨åŸºæœ¬æµç¨‹&lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image006.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AndroidManifest.xmlé‡Œé¢æŒ‡å®š, ç¨‹åºè¿è¡Œåæ‰§è¡ŒMainActivity.java&lt;/li&gt;
&lt;li&gt;MainActivity.javaçš„onCreate()å‡½æ•°é‡ŒsetContentView(R.layout.activity_main); è¯»å–activity_main.xmlæ–‡ä»¶å¹¶æ˜¾ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="activityyu-bu-ju-wen-jian"&gt;Activityä¸å¸ƒå±€æ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸€å¯¹åº” (eclipseç¼–è¾‘å™¨é‡Œæœ‰å›¾å½¢åŒ–é¢„è§ˆç•Œé¢)&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image007.png"/&gt;&lt;/p&gt;
&lt;h4 id="zai-activitydang-zhong-huo-qu-dai-biao-kong-jian-dui-xiang"&gt;åœ¨Activityå½“ä¸­è·å–ä»£è¡¨æ§ä»¶å¯¹è±¡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆåœ¨activity_main.xmlé‡Œå®šä¹‰æ§ä»¶æ—¶, ä¸ºå…¶æŒ‡å®šä¸€ä¸ªid: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"@+id/textView1"&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"+id"&lt;/span&gt;&lt;span class="err"&gt;è¡¨ç¤ºæ–°å»ºä¸€ä¸ª&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â†’ è‡ªåŠ¨åœ¨R.javaé‡Œç”Ÿæˆä¸€ä¸ªid:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;public static final class id {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;        public static final int textView1=0x7f080003;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â†’ ä¹‹ååœ¨MainActivity.javaé‡Œ, å…ˆå£°æ˜æˆå‘˜å˜é‡:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;private TextView tv&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;â†’ åœ¨onCreate()ä¸­, é€šè¿‡idè·å¾—è¿™ä¸ªæ§ä»¶å¯¹è±¡:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;tv = (TextView) findViewById(R.id.textView1);//æœ‰å‘ä¸‹è½¬å‹: TextViewæ˜¯Viewçš„å­ç±»&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â†’ ä¹‹åå°±å¯ä»¥è°ƒç”¨tvçš„å„ç§æ–¹æ³•äº†,å…·ä½“è§SDKé‡Œçš„æ–‡æ¡£i(android.widget.TextView), ä»è€Œå®ç°å†javaç¨‹åºé‡ŒåŠ¨æ€ä¿®æ”¹æ§ä»¶å±æ€§.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e06-view_1"&gt;S01E06: View&lt;/h1&gt;
&lt;h4 id="viewde-ji-ben-gai-nian"&gt;Viewçš„åŸºæœ¬æ¦‚å¿µ&lt;/h4&gt;
&lt;p&gt;Viewæ˜¯ä¸€ä¸ªæ§ä»¶?...&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image008.png"/&gt;&lt;/p&gt;
&lt;h4 id="wei-yi-ge-viewbang-ding-jian-ting-qi"&gt;ä¸ºä¸€ä¸ªViewç»‘å®šç›‘å¬å™¨&lt;/h4&gt;
&lt;p&gt;(æˆ‘å°±è®¤ä¸ºViewæ˜¯ä¸€ä¸ªæ§ä»¶äº†)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;javaç¨‹åºé‡Œè·å–æ§ä»¶ä»£è¡¨çš„å¯¹è±¡: findViewById()æ–¹æ³•&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;bt = (Button) findViewById(R.id.button1);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®šä¹‰ä¸€ä¸ª&lt;strong&gt;å†…éƒ¨ç±»&lt;/strong&gt; å®ç°ç›‘å¬å™¨æ¥å£:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;// **ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç±»å®šä¹‰ç›‘å¬å™¨**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;// Buttonçš„ç›‘å¬å™¨ å®ç°OnClickListeneræ¥å£, OnClickListeneræ¥å£æ˜¯å¤„ç†ç‚¹å‡»äº‹ä»¶çš„&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;class ButtonListener implements OnClickListener {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;@Override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;// å®ç°è¯¥æ¥å£çš„æŠ½è±¡æ–¹æ³•onClick&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;public void onClick(View v) {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;//do something......&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}// end å†…éƒ¨ç±»ButtonListener&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;onCreate()é‡Œç”Ÿæˆä¸€ä¸ªç›‘å¬å™¨å¯¹è±¡, å¹¶ä¸ºæ§ä»¶ç»‘å®šè¯¥ç›‘å¬å™¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;ButtonListener bl = new ButtonListener();// ç”Ÿæˆä¸€ä¸ªç›‘å¬å™¨å¯¹è±¡&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;bt.setOnClickListener(bl);// **è¿™å¥è¯æŠŠç›‘å¬å™¨å’Œäº‹ä»¶è”ç³»åœ¨ä¸€èµ·äº†** ç‚¹å‡»è¿™ä¸ªæŒ‰é’® å°±ä¼šæ‰§è¡Œå®ƒçš„onclickæ–¹æ³•&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªç›‘å¬å™¨å¯ä»¥ç»‘å®šç»™å¤šä¸ªæ§ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦æ³•&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥å†™åœ¨setOnClickListenerå‚æ•°é‡Œ, ä¸ç”¨ç»™å†…éƒ¨ç±»èµ·åå­—: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;    bt.setOnClickListener(new OnClickListener() {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    @Override&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    public void onClick(View v) {&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    //do something......&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    });&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="s01e07-bu-ju_1"&gt;S01E07: å¸ƒå±€&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€è°“çš„æ§ä»¶å¸ƒå±€æ–¹æ³•,å°±æ˜¯æŒ‡æ§åˆ¶æ§ä»¶åœ¨Activityå½“ä¸­çš„ä½ç½®ã€å¤§å°ã€é¢œè‰²ä»¥åŠå…¶ä»–æ§ä»¶æ ·å¼å±æ€§çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å¸ƒå±€å¯ä»¥ç”¨xmlå¸ƒå±€æ–‡ä»¶(ex. /res/layout/activity_main.xml) ä¹Ÿå¯ä»¥åœ¨javaæ–‡ä»¶é‡Œå®Œæˆæ§ä»¶å¸ƒå±€&lt;/li&gt;
&lt;li&gt;æœ€å¸¸ç”¨: çº¿æ€§å¸ƒå±€LinearLayout, ç›¸å¯¹å¸ƒå±€RelativeLayout&lt;/li&gt;
&lt;li&gt;å…ˆæš‚æ—¶ç”¨çº¿æ€§å¸ƒå±€LinearLayout, æœ€ç®€å•&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e08-ju-chi-dan-wei-bian-ju"&gt;S01E08: è·ç¦»å•ä½; è¾¹è·&lt;/h1&gt;
&lt;h4 id="ju-chi-dan-wei-px-dp-sp"&gt;è·ç¦»å•ä½: px, dp, sp&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;px&lt;/strong&gt;=åƒç´ ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨pxæŒ‡å®šæ§ä»¶å¤§å°, åˆ™ä¸åŒåˆ†è¾¨ç‡æ‰‹æœºæ˜¾ç¤ºç»“æœä¸åŒ, éå¸¸éº»çƒ¦.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dpiè®¡ç®—å…¬å¼:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image009.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;dp&lt;/strong&gt;=dip(Device Independent pixels) æ˜¯è®¾å¤‡æ— å…³çš„åƒç´ å•ä½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¢ç®—å…¬å¼&lt;code&gt;px = dp * (dpi / 160)&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;åœ¨320*480çš„å±å¹•ä¸Š, dpä¸pxç›¸ç­‰ &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€»ä¹‹ä¸€èˆ¬æŒ‡å®šæ§ä»¶å¤§å°å°±ç”¨dp&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;sp&lt;/strong&gt;=scaled pixels å¯æ”¹å˜å¤§å°çš„åƒç´ å•ä½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ç”¨æˆ·ä¿®æ”¹æ‰‹æœºæ˜¾ç¤ºå­—ä½“æ—¶,spä¼šéšä¹‹æ”¹å˜&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;spå•ä½é€šå¸¸ç”¨äºæŒ‡å®šå­—ä½“çš„å¤§å°&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id="nei-wai-bian-ju-margin-padding"&gt;å†…å¤–è¾¹è·: margin, padding&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;margin: æ§ä»¶ç¦»å…¶ä»–æ§ä»¶çš„è·ç¦»&lt;/li&gt;
&lt;li&gt;padding: æ§ä»¶å†…å®¹ç¦»æ§ä»¶è¾¹æ¡†çš„è·ç¦»&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image010.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾ç½®å†…è¾¹è·ä¸å¤–è¾¹è·:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;layout_margin, layout_marginTop, ...
padding, paddingTop, ...&lt;/p&gt;
&lt;h2 id="s01e09-checkboxduo-xuan-kuang_1"&gt;S01E09: CheckBoxå¤šé€‰æ¡†&lt;/h2&gt;
&lt;p&gt;æ•ˆæœ: 
&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image011.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¸ƒå±€æ–‡ä»¶é‡Œä½¿ç”¨&lt;checkbox&gt;&lt;/checkbox&gt;æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;OnClickListenerä¸OnCheckedChangeListenerç›‘å¬å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt; è¿™ä¿©ç›‘å¬å™¨æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„, OnClickListenerå¿…é¡»æ˜¯ç”¨æˆ·ç‚¹å‡»æ‰èƒ½è§¦å‘, OnCheckedChangeListeneråˆ™æ˜¯åªè¦çŠ¶æ€æ”¹å˜äº†(å³ä½¿æ˜¯ç”±ç¨‹åºé‡Œæ”¹å˜çš„)å°±ä¼šè§¦å‘&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥å‡ ä¸ªCheckBoxç»‘å®šä¸ŠåŒä¸€ä¸ªç›‘å¬å™¨&lt;/li&gt;
&lt;li&gt;OnClickListeneræ¥å£çš„æ–¹æ³•: public void onClick(View v) æœ‰ä¸€ä¸ª&lt;strong&gt;å‚æ•°View v&lt;/strong&gt;, æŒ‡çš„æ˜¯æ˜¯å“ªä¸ªæ§ä»¶è¢«ç‚¹å‡»äº†, &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨onClick()ä¸­è¦å¤„ç†è¿™ä¸ªæ§ä»¶æ—¶, ä½¿ç”¨:&lt;code&gt;CheckBox cb = (CheckBox) v;&lt;/code&gt;
å¾—åˆ°è¿™ä¸ªæ§ä»¶å¯¹è±¡, æˆ–è€…é€šè¿‡å…¶&lt;code&gt;id: v.getId()&lt;/code&gt;ä¹Ÿå¯ä»¥&lt;/p&gt;
&lt;h2 id="s01e10-dan-xuan-kuang-radiobutton"&gt;S01E10: å•é€‰æ¡†RadioButton&lt;/h2&gt;
&lt;p&gt;æ•ˆæœ: &lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image013.png"/&gt;&lt;/p&gt;
&lt;h4 id="radiogroup"&gt;RadioGroup&lt;/h4&gt;
&lt;p&gt;å•é€‰æŒ‰é’®RadioButtonéœ€è¦æ”¾åœ¨ä¸€ä¸ªRadioGroupä¸­&lt;/p&gt;
&lt;p&gt;xmlä»£ç :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;RadioGroup&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/radioGroupId"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"0dp"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"vertical"&lt;/span&gt; &lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="na"&gt;android:layout_weight=&lt;/span&gt;&lt;span class="s"&gt;"1"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nt"&gt;&amp;lt;RadioButton&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/radioButton_h"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"homme"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nt"&gt;&amp;lt;RadioButton&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/radioButton_f"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"femmee"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;&amp;lt;/RadioGroup&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c"&gt;&amp;lt;!-- åƒRadioGroupè¿™æ ·å†™çš„xmlæ ‡ç­¾å¯ä»¥æ‹¥æœ‰å­æ ‡ç­¾, è€ŒåƒRadioButtonè¿™ç§åˆ™ä¸èƒ½ â†’&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="radiogroupde-oncheckedchangelistener"&gt;RadioGroupçš„OnCheckedChangeListener&lt;/h4&gt;
&lt;p&gt;æœ‰ä¿©å‚æ•°... (RadioGroup group, int checkedId)&lt;/p&gt;
&lt;p&gt;ç›´æ¥ä¸Šä»£ç å§: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RadioGroupListener&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;implements&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;widget&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RadioGroup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OnCheckedChangeListener&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;æ³¨æ„çœ‹è¿™ä¿©å‚æ•°&lt;/span&gt;&lt;span class="err"&gt;!&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;onCheckedChanged&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RadioGroup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;group&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;checkedId&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;checkedIdæ˜¯è¢«é€‰æ‹©çš„å“ªä¸ªRadioButtonçš„Id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;è€Œä¸æ˜¯ä»€ä¹ˆåºå·&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;checkedId&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;radioButton_h&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;ç”¨ä¸¤ç§æ–¹æ³•å¾—åˆ°æƒ³è¦çš„id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ä½¿ç”¨Rä¸­å®šä¹‰çš„&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;tv3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"Homme!"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;rb_h2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setChecked&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;checkedId&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rb_f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getId&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;2.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ä½¿ç”¨getid&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="n"&gt;æ–¹æ³•&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;tv3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"Femme!"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;rb_f2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setChecked&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="s01e11-xian-shi-tu-pian-imageview_2"&gt;S01E11: æ˜¾ç¤ºå›¾ç‰‡ImageView&lt;/h1&gt;
&lt;h4 id="cha-tu-de-fang-fa"&gt;æ’å›¾çš„æ–¹æ³•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æŠŠå›¾ç‰‡æ”¾åœ¨./res/drawable é‡Œé¢(æœ‰å¥½å‡ ä¸ªåˆ†è¾¨ç‡çš„drawable, éšä¾¿ä¸€ä¸ª...), ex. æ”¾åœ¨äº†./res/drawable-hdpi/pic.jpg&lt;/li&gt;
&lt;li&gt;â†’ ä¼šåœ¨R.javaé‡Œç”Ÿæˆå…¶&lt;code&gt;id: pic&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨xmlä¸­ä½¿ç”¨&lt;imageview&gt;&lt;/imageview&gt;æ ‡ç­¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¼•ç”¨æ”¾å¥½çš„å›¾: 
&lt;code&gt;android:src="@drawable/pic"&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="scaletype"&gt;ScaleType&lt;/h4&gt;
&lt;p&gt;ScaleTypeå±æ€§æ§åˆ¶å›¾ç‰‡ç¼©æ”¾çš„å°ºå¯¸, æœ‰å‡ ä¸ªå¯é€‰: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fitcenterç­‰æ¯”ä¾‹ç¼©æ”¾å¹¶å±…ä¸­æ˜¾ç¤º; &lt;/li&gt;
&lt;li&gt;fitstarté ä¸Šæ˜¾ç¤º; &lt;/li&gt;
&lt;li&gt;center è‹¥å›¾ç‰‡è¾ƒå¤§åˆ™æŠŠä¸­å¤®éƒ¨åˆ†æˆªå–å‡ºæ¥æ˜¾ç¤º,ä¸ç¼©æ”¾è‹¥å›¾ç‰‡å°åˆ™ç›´æ¥å±…ä¸­æ˜¾ç¤º, ä¹Ÿä¸ç¼©æ”¾ &lt;/li&gt;
&lt;li&gt;centerCrop ç¼©æ”¾å¹¶è¿›è¡Œè£å‰ªä»¥é€‚åº”ImiageView&lt;/li&gt;
&lt;li&gt;centerInside è¦æ˜¯å›¾ç‰‡å¤§å°±ç¼©æ”¾æ”¾è¿›å», å›¾ç‰‡å°å°±ä¸ç¼©æ”¾ç›´æ¥æ”¾è¿›å»&lt;/li&gt;
&lt;li&gt;Fit_XYç¼©æ”¾æˆå’ŒImageViewä¸€æ ·å¤§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç‰‡æ®µ: &lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;lt;ImageView&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:id="@+id/imageView1Id"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:layout_width="60dp"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:layout_height="70dp"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:background="#FF0000"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:scaleType="fitCenter"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:layout_weight="1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;    android:src="@drawable/pic" /&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;&amp;lt;!-- "@drawable/pic"æ˜¯å¯¹åº”äºR.drawable.pic, å®é™…ä¸Šå›¾ç‰‡ä¹Ÿå¯ä»¥æ”¾åœ¨assetsæ–‡ä»¶å¤¹ æˆ–è€…ç½‘ç»œä¸Š æˆ–è€…SDå¡ä¸Š éƒ½å¯ä»¥, ä¸è¿‡ä»¥åå†ç”¨ --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="s01e12-xian-xing-bu-ju-shen-ru_1"&gt;S01E12: çº¿æ€§å¸ƒå±€æ·±å…¥&lt;/h1&gt;
&lt;h4 id="xian-xing-bu-ju-qian-tao"&gt;çº¿æ€§å¸ƒå±€åµŒå¥—&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨LinearLayouté‡Œé¢å†åŠ å…¥LinearLayout&lt;/li&gt;
&lt;li&gt;"ç›´æ¥çˆ¶/å­æ§ä»¶"&lt;/li&gt;
&lt;li&gt;åµŒå¥—å±‚æ•°æ²¡æœ‰é™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="layout_weight"&gt;layout_weight&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å­æ§ä»¶å¹¶æœªå æ»¡çˆ¶æ§ä»¶çš„æ‰€æœ‰ç©ºé—´æ—¶æ‰æœ‰ç”¨&lt;/li&gt;
&lt;li&gt;layout_weightçš„å€¼ç”¨äºæŒ‡å®š&lt;strong&gt;ç©ºé—²ç©ºé—´çš„&lt;/strong&gt;åˆ†é…__æ¯”ä¾‹__: weightéƒ½æ˜¯1çš„è¯--æ˜¯æŒ‰æ¯”ä¾‹å¹³åˆ†çˆ¶æ§ä»¶çš„__å‰©ä½™(!!!)__ç©ºé—´, è€Œä¸æ˜¯æ•´ä¸ªçˆ¶æ§ä»¶è¢«æŒ‰æ¯”ä¾‹åˆ†é…!&lt;/li&gt;
&lt;li&gt;å¦‚æœæƒ³è®©çˆ¶æ§ä»¶æŒ‰æ¯”ä¾‹åˆ†é…: å¾ˆç®€å•, __æŠŠå®½åº¦æ”¹ä¸º0dp__å³å¯(é‚£ä¹ˆçˆ¶æ§ä»¶å‰©ä½™ç©ºé—´=çˆ¶æ§ä»¶æ€»ç©ºé—´!)&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨äº†çº¿æ€§å¸ƒå±€åµŒå¥—ä»¥åŠweightå±æ€§, å·²ç»å¯ä»¥åˆ¶ä½œä¸€äº›ç›¸å¯¹è¾ƒå¤æ‚çš„å¸ƒå±€äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e13-xiang-dui-bu-ju-i_1"&gt;S01E13: ç›¸å¯¹å¸ƒå±€-I&lt;/h1&gt;
&lt;h4 id="xiang-dui-bu-ju-def"&gt;ç›¸å¯¹å¸ƒå±€def&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸å¯¹å¸ƒå±€æ˜¯é€šè¿‡æŒ‡å®šå½“å‰æ§ä»¶__ä¸å…„å¼Ÿæ§ä»¶æˆ–è€…æ˜¯çˆ¶æ§ä»¶ä¹‹é—´çš„ç›¸å¯¹ä½ç½®__,ä»è€Œè¾¾åˆ°æ§åˆ¶æ§ä»¶ä½ç½®çš„ç›®çš„  &lt;/li&gt;
&lt;li&gt;å®ç°åŒæ ·ç•Œé¢, ç”¨ç›¸å¯¹å¸ƒå±€æ¯”ç”¨çº¿æ€§å¸ƒå±€ç®€å•--&lt;strong&gt;UIæ€§èƒ½&lt;/strong&gt;æ›´å¥½äº›&lt;/li&gt;
&lt;li&gt;UIæ€§èƒ½: å¸ƒå±€åµŒå¥—è¶Šå¤š, æ€§èƒ½è¶Šå·®!!...&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ji-ben-si-lu"&gt;åŸºæœ¬æ€è·¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æœªæŒ‡å®šä½ç½®æ—¶: é»˜è®¤å¾€å·¦ä¸Šè§’æ”¾(å¯èƒ½ä¼šé‡å !)&lt;/li&gt;
&lt;li&gt;å¯ä»¥å…ˆæ”¾ä¸€ä¸ªæ§ä»¶, ç„¶åç¬¬äºŒä¸ªæ§ä»¶æŒ‡å®šå…¶ç›¸å¯¹ä½ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="shi-xian-fang-fa"&gt;å®ç°æ–¹æ³•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;android:layout_below/layout_aboveç­‰ç­‰ç­‰ç­‰... æ”¾ç½®åœ¨å…¶å·¦(å³)è¾¹; å±æ€§çš„å€¼éƒ½æ˜¯å…¶ä»–æ§ä»¶çš„id&lt;/li&gt;
&lt;li&gt;android:id="@+id/tvv1"æ˜¯åˆ›å»ºä¸€ä¸ªæ–°id; android:layout_toRightOf="@id/tvv1"åˆ™æ˜¯å¼•ç”¨å·²æœ‰çš„id(æ²¡æœ‰åŠ å·)&lt;/li&gt;
&lt;li&gt;android:layout_alignLeft/Rightç­‰ç­‰ç­‰ç­‰..... å·¦(å³)å¯¹é½; å±æ€§çš„å€¼éƒ½æ˜¯å…¶ä»–æ§ä»¶çš„id  &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e14-xiang-dui-bu-ju-ii_1"&gt;S01E14: ç›¸å¯¹å¸ƒå±€II&lt;/h1&gt;
&lt;h4 id="dui-qi-dao-ji-zhun-xian"&gt;å¯¹é½åˆ°åŸºå‡†çº¿&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åŸºå‡†çº¿:ä¸ºäº†ä¿è¯å°åˆ·å­—æ¯çš„æ•´é½è€Œåˆ’å®šçš„çº¿ &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image.png"/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æ¡çº¿å°±æ˜¯æ‰€è°“çš„åŸºå‡†çº¿(baseline)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ex. ä¸¤ä¸ªTextView__çš„åŸºå‡†çº¿__ç›¸äº’å¯¹é½&lt;/li&gt;
&lt;li&gt;ä½œç”¨: å½“ä¿©TextViewçš„å­—ä½“å¤§å°ä¸ç›¸åŒæ—¶...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœ‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image001.png"/&gt;&lt;/p&gt;
&lt;h4 id="he-fu-kong-jian-dui-qi"&gt;å’Œçˆ¶æ§ä»¶å¯¹é½&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;android:layout_alignParentLeft/Rightç­‰ç­‰... å±æ€§çš„å€¼ä¸ºtrue/false(å› ä¸ºåªæœ‰ä¸€ä¸ªç›´æ¥çˆ¶æ§ä»¶)&lt;/li&gt;
&lt;li&gt;android:layout_centerInParent/layout_centerHorizontalç­‰ç­‰...&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e15-xiang-dui-bu-ju-iii_1"&gt;S01E15: ç›¸å¯¹å¸ƒå±€III&lt;/h1&gt;
&lt;h4 id="relativelayoutbu-ju-de-xin-shu-xing-android-42"&gt;RelativeLayoutå¸ƒå±€çš„æ–°å±æ€§(Android 4.2)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;android:layout_alignStart/Endç­‰ å€¼æ˜¯å…¶ä»–æ§ä»¶çš„id, å¤´éƒ¨å’Œå°¾éƒ¨å¯¹é½&lt;/li&gt;
&lt;li&gt;android:layout_alignParentStart/End, å€¼æ˜¯true/false&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="xiang-dui-bu-ju-xiao-lian-xi"&gt;ç›¸å¯¹å¸ƒå±€å°ç»ƒä¹ &lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image014.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç‰‡æ®µ:&lt;/strong&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;RelativeLayout&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/RL0"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"fill_parent"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"fill_parent"&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;TextView&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/tv1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_centerHorizontal=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:gravity=&lt;/span&gt;&lt;span class="s"&gt;"center"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"login..."&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:textSize=&lt;/span&gt;&lt;span class="s"&gt;"16sp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;EditText&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/editText1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_below=&lt;/span&gt;&lt;span class="s"&gt;"@id/tv1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_centerHorizontal=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:ems=&lt;/span&gt;&lt;span class="s"&gt;"10"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"username"&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="nt"&gt;&amp;lt;requestFocus&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;/EditText&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;EditText&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/editText2"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_below=&lt;/span&gt;&lt;span class="s"&gt;"@id/editText1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_centerHorizontal=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:ems=&lt;/span&gt;&lt;span class="s"&gt;"10"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"password"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"textPassword"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;Button&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/button1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_alignParentRight=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_below=&lt;/span&gt;&lt;span class="s"&gt;"@+id/editText2"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"login"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;            &lt;span class="nt"&gt;&amp;lt;Button&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/button2"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_below=&lt;/span&gt;&lt;span class="s"&gt;"@+id/editText2"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:layout_toLeftOf=&lt;/span&gt;&lt;span class="s"&gt;"@+id/button1"&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"cancel"&lt;/span&gt; &lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;](file:///%3E)&lt;/span&gt;
&lt;span class="code-line"&gt; &lt;span class="nt"&gt;&amp;lt;/RelativeLayout&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id="s01e16-shi-jian-he-ri-qi-timepickerdatepicker_1"&gt;S01E16: æ—¶é—´å’Œæ—¥æœŸ TimePicker/DatePicker&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;timepicker&gt;&lt;/timepicker&gt; &lt;datepicker&gt;&lt;/datepicker&gt;æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£: android.widget.TimePicker/android.widget.DatePicker&lt;/li&gt;
&lt;li&gt;OnTimeChangedListenerçš„onTimeChangedå‡½æ•°: public void onTimeChanged(TimePicker view, int hourOfDay, int minute) ä»¨å‚æ•°&lt;/li&gt;
&lt;li&gt;getCurrentHour(); getCurrentMinute(); getMonth(); getDayOfMonth()ç­‰å‡½æ•°, åŒç†æœ‰setå‡½æ•°......&lt;/li&gt;
&lt;li&gt;æ³¨æ„æœˆä»½æ˜¯ä»é›¶ç®—èµ·!!&lt;/li&gt;
&lt;li&gt;setIs24HourView() åˆ‡æ¢24å°æ—¶æ˜¾ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e17-jin-du-tiao-progressbar"&gt;S01E17: è¿›åº¦æ¡ProgressBar&lt;/h1&gt;
&lt;h4 id="ge-chong-jin-du-tiao"&gt;å„ç§è¿›åº¦æ¡&lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image015.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image016.png"/&gt;&lt;/p&gt;
&lt;h4 id="jin-du-tiao-de-shu-xing"&gt;è¿›åº¦æ¡çš„å±æ€§&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é£æ ¼Style: è½¬åœˆåœˆ: å‚ç›´é£æ ¼(é»˜è®¤); ä¸€æ¡çº¿çš„è¿›åº¦æ¡: Horizontal&lt;/li&gt;
&lt;li&gt;æœ€å¤§å€¼: max&lt;/li&gt;
&lt;li&gt;å½“å‰è¿›åº¦:progress&lt;/li&gt;
&lt;li&gt;æ¬¡è¦è¿›åº¦çš„å€¼:SecondaryProgress (ex.æ¬¡è¦è¿›åº¦: è§£å‹ç¼©æ–‡ä»¶æ—¶, åœ¨çº¿çœ‹è§†é¢‘æ—¶...)&lt;/li&gt;
&lt;li&gt;isIndeterminate()æ–­è¿›åº¦æ¡æ—¶ä¸æ—¶ä¸æ˜ç¡®çš„(æ‰“é…±æ²¹çš„, æ¯”å¦‚è½¬åœˆåœˆ), åŒç†æœ‰setæ–¹æ³•, ä¸è¿‡åªèƒ½å¯¹æ°´å¹³é£æ ¼é€‚ç”¨.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="s01e18-seekbarhe-ratingbar_1"&gt;S01E18: SeekBarå’ŒRatingBar&lt;/h1&gt;
&lt;h4 id="seekbar"&gt;SeekBar&lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image017.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å±æ€§: max/progress/&lt;/li&gt;
&lt;li&gt;ç›‘å¬å™¨æ¥å£OnSeekBarChangeListeneræœ‰ä¸‰ä¸ªå‡½æ•°è¦é‡å†™: &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SeekBarListener&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OnSeekBarChangeListener&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cm"&gt;/**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cm"&gt;* seekBar è¯¥å¯¹è±¡æŒ‡çš„æ˜¯è§¦å‘äº†ç›‘å¬å™¨çš„SeekBarå¯¹è±¡&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cm"&gt;* progress æŒ‡çš„æ˜¯å½“å‰SeekBarçš„è¿›åº¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cm"&gt;* fromUser æŒ‡æ˜¯ä¸æ˜¯ç”¨æˆ·æ‰‹åŠ¨æ”¹å˜çš„è¿›åº¦&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;onProgressChanged&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SeekBar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SeekBar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;progress&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fromUser&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"progress:"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;progress&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;",fromUser:"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fromUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;onStartTrackingTouch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SeekBar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seekBar&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"onStart"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;onStopTrackingTouch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SeekBar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seekBar&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"onStop"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ratingbar"&gt;RatingBar&lt;/h4&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./androidå¼€å‘æ•™ç¨‹ç¬¬ä¸€å­£ç¬”è®°/pasted_image018.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å±æ€§: numStars(æ˜Ÿæ˜Ÿä¸ªæ•°), progress, stepSize(æ­¥è¿›)&lt;/li&gt;
&lt;li&gt;ç›‘å¬å™¨ä»£ç :&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RatingBarListener&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OnRatingBarChangeListener&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;onRatingChanged&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RatingBar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ratingBar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rating&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fromUser&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"rating:"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rating&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;",fromUser:"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fromUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary><category term="android"></category></entry><entry><title>æˆ‘çš„ubuntu10.04é…ç½®æ€»ç»“</title><link href="https://x-wei.github.io/tech/%E6%88%91%E7%9A%84ubuntu10.04%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93.html" rel="alternate"></link><published>2013-07-20T00:00:00+02:00</published><updated>2013-07-20T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2013-07-20:tech/æˆ‘çš„ubuntu10.04é…ç½®æ€»ç»“.html</id><summary type="html">&lt;p&gt;ubuntuå·²ç»å‡ºåˆ°äº†13.04, æˆ‘ä¹‹æ‰€ä»¥åšæŒä½¿ç”¨ubuntu10.04çš„ç‰ˆæœ¬(åˆ°ç°åœ¨å·²ç»ä¸‰å¹´äº†, ç°åœ¨10.04å·²ç»è¿‡äº†æ”¯æŒå‘¨æœŸè€Œæˆ‘è¿˜åœ¨ç»§ç»­ç”¨å®ƒ), ä¸»è¦æ˜¯å› ä¸ºubuntuå‡ºçš„unityç•Œé¢ä»¥åŠgnome3çš„ç•Œé¢å®åœ¨æ˜¯ç”¨èµ·æ¥ä¸çˆ½(åæ§½ä¸å·²!!)... &lt;/p&gt;
&lt;p&gt;ç›®å‰æˆ‘çš„lucid(ubuntu 10.04)ç»è¿‡æˆ‘çš„é…ç½®, åœ¨æˆ‘ç”¨æ¥å·²ç»ååˆ†é¡ºæ‰‹äº†.. ä¸è¿‡é•¿ä¹…è¿™ä¹ˆä¸‹å»ä¹Ÿä¸æ˜¯åŠæ³•...... åœ¨æ¢æ–°çš„ä¸»åŠ›ç³»ç»Ÿä¹‹å‰, æŠŠæˆ‘ç›®å‰è¿™ä¸ªç³»ç»Ÿçš„é…ç½®å†™ä¸‹æ¥.&lt;/p&gt;
&lt;h2 id="an-zhuang-de-ruan-jian"&gt;å®‰è£…çš„è½¯ä»¶&lt;/h2&gt;
&lt;p&gt;å†™ä¸€ä¸‹ç”¨èµ·æ¥ç‰¹åˆ«çˆ½çš„ä¸€äº›è½¯ä»¶: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;geany&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸‡èƒ½IDE&lt;/strong&gt;, java/python/Cpp/matlab(octave)... ç”šè‡³texéƒ½æ˜¯ç”¨å®ƒå†™çš„, è½»å·§å¼ºå¤§. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;zimæ¡Œé¢ç»´åŸº&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¥å™¨&lt;/strong&gt;, ç”¨æ¥å†™ç¬”è®°æ•´ç†æ€è·¯, è¿™ç¯‡å°±æ˜¯åœ¨zimä¸‹å†™çš„. è‡ªä»2012å¹´å‘ç°zimè¿™ä¸ªä¸œè¥¿ä»¥å, åˆ°ç°åœ¨å†™äº†ä¸Šç™¾æ¡ç¬”è®°äº†, ç¡®å®æ–¹ä¾¿.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GNU octave&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;matlabçš„å¼€æºæ›¿ä»£, è¯­æ³•å’Œmatlabå®Œå…¨å…¼å®¹, æ¯•è®¾å°±æ˜¯ç”¨å®ƒåšçš„, å¦‚æœä¸ç”¨matlabå·¥å…·ç®±çš„è¯, è¿™ä¸ªæ˜¯å¾ˆå¥½çš„é€‰æ‹©, è€Œä¸”æ¯”è¾ƒå°å·§, å¯åŠ¨å¾ˆå¿«.
......ä¸è¿‡æ³•å›½äººè²Œä¼¼æ¯”è¾ƒå–œæ¬¢ä»–ä»¬è‡ªå·±æå‡ºæ¥çš„scilab.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éŸ³ä¹æ’­æ”¾å™¨audacious&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç•Œé¢å’Œç®€æ´, ç”¨èµ·æ¥è›®å¥½, ä¸è¿‡å¯èƒ½å…¶ä»–æ’­æ”¾å™¨ä¹Ÿå·®ä¸åˆ°å“ªé‡Œå»...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯å…¸goldendict&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªè¿˜ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬(æˆ‘ç”¨çš„æ˜¯0.9.0), å·²ç»ç›¸å½“é¡ºæ‰‹äº†. å¯ä»¥è‡ªå·±åŠ stardictçš„è¯å…¸æ–‡ä»¶, ä»ç½‘ä¸Šå¯ä»¥æ‰¾åˆ°å¾ˆå¤š(åŒ…æ‹¬æ³•è¯­çš„è¯å…¸), ç”¨èµ·æ¥æ¯”stardictæ–¹ä¾¿, å±å¹•å–è¯ä»€ä¹ˆçš„ä¹Ÿå¾ˆå¥½ç”¨.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GNOME Mplayer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ„Ÿè§‰è¿™ä¸ªç•Œé¢ç®€æ´äº›, å¯èƒ½å…¶ä»–æ’­æ”¾å™¨(VLCä¹‹ç±»)ä¹Ÿå·®ä¸åˆ°å“ªé‡Œå».&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;QQ: wine-TM2009&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ°å€åœ¨&lt;a href="http://www.mintos.org/network/wineqq.html"&gt;è¿™é‡Œ&lt;/a&gt;, æ ¹æ®æˆ‘çš„ç»éªŒ, åˆ«å†æŠ˜è…¾äº†, è¿™ä¸ªå°±æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ...&lt;/p&gt;
&lt;h2 id="pei-zhi"&gt;é…ç½®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;zipä¹±ç è§£å†³&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¹‹å‰&lt;a href="http://x-wei.github.io/zip%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3.html"&gt;ä»‹ç»è¿‡&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="wai-guan"&gt;å¤–è§‚&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;globalmenu+windowbuttons&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®‰è£…è¿™ä¸¤ä¸ªæ’ä»¶ä»¥å, å¯ä»¥çœŸçš„&lt;strong&gt;æœ€å¤§åŒ–&lt;/strong&gt;åˆ©ç”¨å±å¹•ç©ºé—´, å¾ˆç§‘å­¦...(è²Œä¼¼æ˜¯è·Ÿè‹¹æœå­¦çš„?)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªå®šä¹‰çš„ä¸»é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Faenzaå›¾æ ‡ä¸»é¢˜; elementaryçª—å£ä¸»é¢˜; ComixCursorsé¼ æ ‡ä¸»é¢˜; clearlooksæ§ä»¶...
æ€»ä¹‹è¿™å¤§æ¦‚å°±æ˜¯æˆ‘è§‰å¾—æœ€èˆ’æœçš„å¤–è§‚ä¸»é¢˜äº†...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¾¹ç¼˜è§¦å‘åŠ¨ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;compizçš„è®¾ç½®, æŠŠé¼ æ ‡ç§»åŠ¨åˆ°å·¦ä¸‹è§’ä¼šæ˜¾ç¤ºæ¡Œé¢, å¾ˆæ–¹ä¾¿...(è²Œä¼¼æ˜¯è·Ÿè‹¹æœå­¦çš„?)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;compizç‰¹æ•ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç«‹æ–¹ä½“ç‰¹æ•ˆ, å¼€å››ä¸ªæ¡Œé¢(è¿™ä¸ªå…¶å®å¾ˆå®ç”¨, å°¤å…¶æ˜¯å¼€åä¸ªä»¥ä¸Šçª—å£æ—¶......);
åŠ¨ç”»ç‰¹æ•ˆ, "å¯¹æ‰€æœ‰äº‹ä»¶ä½¿ç”¨éšæœºåŠ¨ç”»"(è¿™ä¸ªå¼€äº†ä»¥åæ•ˆæœæƒŠè‰³, è€Œä¸”å³ä½¿è€ç”µè„‘å¼€äº†è¿™ä¸ªä¸€ç‚¹ä¹Ÿä¸ä¼šå¡, å®Œçˆ†win...);
å…¶ä»–ç‰¹æ•ˆè¿˜æ²¡å…¨å¼€...... &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŠ¤çœ¼èƒŒæ™¯è‰²(gnome+chrome)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="http://x-wei.github.io/gnome-background.html"&gt;gnomeçš„è®¾ç½®&lt;/a&gt;;
&lt;a href="http://x-wei.github.io/gnome-background.html"&gt;chromeçš„è®¾ç½®&lt;/a&gt;;&lt;/p&gt;
&lt;h3 id="kuai-jie-jian"&gt;å¿«æ·é”®&lt;/h3&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹é…ç½®çš„å¿«æ·é”®: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¾ç¤ºæ¡Œé¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;win+D&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€æµè§ˆå™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;win+B (å–"&lt;strong&gt;B&lt;/strong&gt;rowser"ä¹‹æ„)
å…³è”çš„å‘½ä»¤æ˜¯&lt;code&gt;google-chrome&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;win+F (å–"&lt;strong&gt;F&lt;/strong&gt;ile"ä¹‹æ„)
å‘½ä»¤: &lt;code&gt;nautilus --browser /home/your_username&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€goldendict&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ctrl+alt+D&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆªå›¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;win+S
å‘½ä»¤æ˜¯: &lt;code&gt;gnome-screenshot -ia&lt;/code&gt;
è¿™ä¸ªä¹‹å‰ä¹Ÿ&lt;a href="http://x-wei.github.io/scrshot-shortcut.html"&gt;å†™è¿‡&lt;/a&gt;.&lt;/p&gt;</summary><category term="ubuntu"></category><category term="å¤–è§‚"></category><category term="å¿«æ·é”®"></category></entry><entry><title>ç½‘é¡µå›¾ç‰‡è‡ªåŠ¨é€‚åº”æµè§ˆå™¨å®½åº¦</title><link href="https://x-wei.github.io/tech/%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87%E8%87%AA%E5%8A%A8%E9%80%82%E5%BA%94%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%BD%E5%BA%A6.html" rel="alternate"></link><published>2013-03-28T20:36:00+01:00</published><updated>2013-03-28T20:36:00+01:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2013-03-28:tech/ç½‘é¡µå›¾ç‰‡è‡ªåŠ¨é€‚åº”æµè§ˆå™¨å®½åº¦.html</id><summary type="html">&lt;p&gt;çœ¼çœ‹ä¸‰æœˆåˆè¦ç»“æŸäº†, blogè¿˜æ²¡æœ‰æ›´æ–°, æ‹¿æ¥ä»¥å‰å†™åœ¨zimé‡Œçš„ä¸€æ¡ç¬”è®°å……æ•°... &lt;/p&gt;
&lt;p&gt;æœ‰äº†zimä»¥å, å‡ ä¹ä¸å†ç”¨officeäº†, å¸¸ç”¨å®ƒç¼–è¾‘ä¸€äº›å¯Œæ–‡æœ¬, æ¯”å¦‚åŠ ç²—, ä¸‹åˆ’çº¿, æ–œä½“ä»€ä¹ˆçš„, æœ‰å¿«æ·é”®æ“ä½œ, å¾ˆæ–¹ä¾¿, æ’å›¾ä¹Ÿå¾ˆç®€å•. zimæ˜¯æˆ‘è®¤ä¸ºçš„ç¥å™¨(ç¥å™¨=å°å·§+å¼ºå¤§)ä¹‹ä¸€. &lt;/p&gt;
&lt;p&gt;æœ‰æ—¶å€™ç”¨zimå†™å¥½çš„ç¬”è®°ç»™åˆ«äººçœ‹æ—¶, ç›´æ¥æŒ‰"ctrl+p"å°±å¯ä»¥æ‰“å°æˆç½‘é¡µçš„æ ¼å¼äº†, éå¸¸æ–¹ä¾¿(è€Œä¸”å¾—æ‰¿è®¤, å•è®ºå¯Œæ–‡æœ¬çš„æ˜¾ç¤ºæ•ˆæœ, ç½‘é¡µæ ¼å¼ &amp;gt; pdfæ ¼å¼ &amp;gt; docæ ¼å¼). åªæ˜¯æœ‰ä¸€ç‚¹ä¸å¤ªå¥½, å°±æ˜¯æœ‰æ—¶æ’å…¥çš„ç…§ç‰‡å¾ˆå¤§, åœ¨æµè§ˆå™¨é‡ŒæŸ¥çœ‹çš„æ—¶å€™æ˜¾ç¤ºçš„è¿˜æ˜¯åŸå°ºå¯¸å›¾åƒ, éå¸¸æ–¹ä¾¿...&lt;/p&gt;
&lt;p&gt;æŸ¥äº†ä¸€ä¸‹, å…¶å®åªè¦åœ¨htmlæ–‡ä»¶å…³äºæ’å…¥å›¾ç‰‡é‚£ä¸€è¡ŒåŠ å…¥&lt;code&gt;width="100%" height="100%" style="z-index:-100"&lt;/code&gt;å°±å¯ä»¥äº†.&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚, åœ¨zimç”Ÿæˆçš„htmlæ–‡ä»¶é‡Œ, è¿™æ ·æ›¿æ¢å°±å¯ä»¥äº†: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;img src="./xxxç½‘é¡µ_files/IMG_1186.JPG" alt="" &amp;gt;&amp;lt;br&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â‡’&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;img src="./xxxç½‘é¡µ_files/IMG_1186.JPG" alt="" width="100%" height="100%" style="z-index:-100"&amp;gt;&amp;lt;br&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å³è¿›è¡Œæ›¿æ¢:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;" alt=""&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â‡’&lt;/p&gt;
&lt;p&gt;&lt;code&gt;" alt="" width="100%" height="100%" style="z-index:-100"&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªæˆ‘å€’æ˜¯æ—¶å¸¸ç”¨åˆ°, æ¯”å¦‚ç»™å®¶äººå‘æœ€è¿‘æ´»åŠ¨çš„ç…§ç‰‡æ—¶ , å¯ä»¥ç”¨zimå†™ä¸Šä¸€äº›æ–‡å­—ä½œä¸ºç…§ç‰‡çš„æ³¨é‡Š, ç„¶åç”Ÿæˆç½‘é¡µæ–‡ä»¶ç„¶åæ‰“åŒ…å‘æ‰...&lt;/p&gt;
&lt;p&gt;OK, æ°´æ–‡ç»“æŸ...&lt;/p&gt;</summary></entry><entry><title>æ°´æºPPPæ¿å›¾ç‰‡ä¸‹è½½å™¨</title><link href="https://x-wei.github.io/tech/%E6%B0%B4%E6%BA%90PPP%E6%9D%BF%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%99%A8.html" rel="alternate"></link><published>2012-06-07T20:14:00+02:00</published><updated>2012-06-07T20:14:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2012-06-07:tech/æ°´æºPPPæ¿å›¾ç‰‡ä¸‹è½½å™¨.html</id><summary type="html">&lt;p&gt;è¿™ä¸ªå…¶å®æ˜¯ä¸‰æœˆä»½çš„æ—¶å€™åšçš„, å½“æ—¶åˆšåˆšå­¦ä¼šç”¨urllibå’Œæ­£åˆ™è¡¨è¾¾å¼åšä¸€äº›çˆ¬è™«, äºæ˜¯ç»“åˆäººæ°‘ç¾¤ä¼—çš„éœ€è¦, å†™äº†ä¸ªå°è„šæœ¬(ç¦åˆ©~) &lt;/p&gt;
&lt;p&gt;ä¸è¿‡ç°åœ¨æˆ‘è¿˜åªæ˜¯ä¼šç…§è‘«èŠ¦ç”»ç“¢é‚£æ ·ç”¨urllib, æ²¡ä»€ä¹ˆé•¿è¿›...&lt;/p&gt;
&lt;p&gt;githubåœ°å€: &lt;a href="https://github.com/X-Wei/yssy_ppp_pic_downloader"&gt;https://github.com/X-Wei/yssy_ppp_pic_downloader&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1.&lt;/p&gt;
&lt;p&gt;åŠŸèƒ½å°±æ˜¯ä¸‹è½½æ°´æºpppersonæ¿é‡Œå¸–å­çš„å›¾ç‰‡, å¹¶ä¸”æ¯ä¸ªå¸–å­ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾å¥½. é€šè¿‡ä¿®æ”¹mainå‡½æ•°å¯ä»¥é€‰æ‹©ä¸‹è½½æœ€è¿‘ä¸€é¡µçš„å¸–å­è¿˜æ˜¯ä¸‹è½½å…¨éƒ¨å¸–å­(æˆ–è€…æœ€è¿‘å‡ é¡µçš„å¸–å­)&lt;/p&gt;
&lt;p&gt;åŸç†å¾ˆç®€å•, åˆ†æç½‘é¡µçš„htmlä»£ç , ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰¾å‡ºå›¾ç‰‡çš„åœ°å€ç„¶åä¸‹è½½åˆ°æœ¬åœ°. å½“æ—¶æˆ‘å·²ç»å†™äº†ä¸¤ä¸‰ä¸ªç®€å•çš„çˆ¬è™«, æ‰€ä»¥è¿™ä¸ªå†™å¾—è›®å¿«, è€Œä¸”åªç”¨50è¡Œå°±æå®šäº†...&lt;/p&gt;
&lt;p&gt;ä¸ä¼šç”¨å¤šçº¿ç¨‹, åªèƒ½ä¸€å¼ ä¸€å¼ ä¸‹è½½, å¸–å­æ•°ç›®å®åœ¨å¤ªå¤šäº†, æˆ‘è®©å®ƒè·‘äº†ä¸€æ™šä¸Š, ç¬¬äºŒå¤©è·‘å®Œ, ä¸‹è½½äº†8ä¸ªGçš„å›¾, å‡ åƒä¸ªæ–‡ä»¶å¤¹(å›§)......&lt;/p&gt;
&lt;p&gt;2.&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜, æ¯”è¾ƒè€çš„å¸–å­ä¼šæœ‰äº›å›¾ç‰‡404, è¿™æ—¶æˆ–è€…è¿™ä¸ªå¸–å­å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸ºç©º, æˆ–è€…é‡Œé¢çš„å›¾ç‰‡å…¶å®ä¸æ˜¯å›¾ç‰‡, è€Œæ˜¯å‡ºé”™ä¿¡æ¯çš„htmlä»£ç (è™½ç„¶çœ‹åç¼€æ˜¯ä¸ªå›¾ç‰‡). æˆ‘éœ€è¦æŠŠé‚£äº›ä¸æ˜¯å›¾ç‰‡çš„æ–‡ä»¶åˆ æ‰, è€Œä¸”è¦åˆ æ‰æ‰€æœ‰çš„ç©ºæ–‡ä»¶å¤¹. &lt;/p&gt;
&lt;p&gt;åˆ é™¤ä¸æ˜¯å›¾ç‰‡çš„æ–‡ä»¶(å…¶å®åº”è¯¥æ˜¯åˆ é™¤çº¯æ–‡æœ¬æ–‡ä»¶), åœ¨æ°´æºå‘è´´é—®, ç”¨shellå‘½ä»¤(perl)åšåˆ°äº†(è™½ç„¶ä¸æ˜ç™½ä¸ºä»€ä¹ˆè¿™æ ·å†™...):&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find yssy_ppp/ -type f | perl -ne 'chomp;unlink "$_" if -T $_'&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…³äºåˆ é™¤ç©ºç›®å½•, å‘ç°&lt;code&gt;rmdir&lt;/code&gt;å‘½ä»¤å°±å·²ç»å¯ä»¥äº†, ä¼šåˆ é™¤ç©ºæ–‡ä»¶å¤¹, éç©ºæ–‡ä»¶å¤¹ä¸ä¼šåˆ é™¤(è™½ç„¶ä¼šæ˜¾ç¤ºè­¦å‘Š).&lt;/p&gt;
&lt;p&gt;pythoné‡Œé¢è°ƒç”¨shellå‘½ä»¤åªéœ€è¦:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;os.system("shell_command")&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥, åªéœ€è¦åœ¨ç¨‹åºçš„æœ€ååŠ ä¸Šä¸¤è¡Œ:
    os.system('''find yssy_ppp/ -type f | perl -ne 'chomp;unlink "$&lt;em&gt;" if -T $&lt;/em&gt;' ''')
    os.system('rmdir yssy_ppp/*')&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç»ˆç«¯é‡Œè¿è¡Œæ—¶æœ€åä¼šå› ä¸ºé‚£ä¸ª&lt;code&gt;rmdir&lt;/code&gt;å‘½ä»¤å‡ºä¸€å †è­¦å‘Š, ä½†æ˜¯æ—¢ç„¶åŠŸèƒ½å®ç°äº†å°±æ‡’å¾—æ”¹äº†...&lt;/p&gt;
&lt;p&gt;3.&lt;/p&gt;
&lt;p&gt;è¿˜å†™(æ”¹å†™)è¿‡ä¸€ä¸ªäººäººç›¸å†Œä¸‹è½½çš„è„šæœ¬, ä¸è¿‡éœ€è¦æ”¹è¿›, ä¸çŸ¥æ¯•ä¸šå‰èƒ½ä¸èƒ½æå®š......&lt;/p&gt;</summary><category term="git"></category><category term="python"></category><category term="shell"></category></entry><entry><title>äº¤å¤§beameræ¨¡æ¿</title><link href="https://x-wei.github.io/tech/beamer_template.html" rel="alternate"></link><published>2012-06-02T00:00:00+02:00</published><updated>2012-06-02T00:00:00+02:00</updated><author><name>mx</name></author><id>tag:x-wei.github.io,2012-06-02:tech/beamer_template.html</id><summary type="html">&lt;p&gt;æ¯•è®¾å®Œäº†, æŠŠç­”è¾©æ—¶ç”¨çš„beameræ¨¡æ¿æ‹¿å‡ºæ¥åˆ†äº«ä¸‹.&lt;/p&gt;
&lt;p&gt;githubé¡¹ç›®åœ°å€:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/X-Wei/aBeamerTemplate4SJTU"&gt;https://github.com/X-Wei/aBeamerTemplate4SJTU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘æ˜¯texèœé¸Ÿ, åŸºæœ¬æ˜¯é‡è§ä»€ä¹ˆé—®é¢˜ç„¶åä¸Šç½‘æœä¸€é€šæ‰¾åˆ°è§£å†³æ–¹æ¡ˆ... è¿™ä¸ªæ¨¡æ¿è‡ªç„¶ä¹Ÿæ˜¯å‚è€ƒçš„åˆ«äººçš„äº†...&lt;/p&gt;
&lt;p&gt;å‚è€ƒè‡ª&lt;a href="http://yixf.name/2011/06/21/%E4%BD%BF%E7%94%A8xetex%E7%9A%84beamer%E6%A8%A1%E7%89%88/"&gt;Yixfâ€™s blog&lt;/a&gt;, æˆ‘åªæ˜¯ä¿®æ”¹äº†ä¸€ä¸‹ä¸»é¢˜, æ¢äº†ä¸€ä¸‹äº¤å¤§çš„å›¾æ ‡, å¹¶ä¸”åšäº†ä¸€äº›å¸¸ç”¨åŠŸèƒ½çš„ä¾‹å­...&lt;/p&gt;
&lt;p&gt;æ•ˆæœæˆªå›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" class="img-responsive" src="../images/./beamer_template/Screenshot.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨xelatexç¼–è¯‘ç”Ÿæˆ, latexä¼°è®¡ä¸è¡Œ, xelatexçš„é…ç½®å‚è€ƒ&lt;a href="http://x-wei.github.com/xelatex_zh.html"&gt;è¿™é‡Œ&lt;/a&gt;;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¾‘å†…å®¹ç›´æ¥ä¿®æ”¹beame_body.texå³å¯, æ”¹å˜è®¾ç½®ä¸€èˆ¬åœ¨beamer_header.texé‡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ç”¨çš„æ˜¯æ–‡æ³‰é©¿çš„å­—ä½“, å¯ä»¥ä¿®æ”¹beamer_header.texæ”¹å˜å­—ä½“è®¾ç½®, æŸ¥çœ‹å·²å®‰è£…çš„ä¸­æ–‡å­—ä½“çš„å‘½ä»¤ä¸º: &lt;code&gt;fc-list :lang=zh-cn&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ªäººä¸€ç‚¹æ„Ÿè§‰: ç”¨texå†™pptæœ‰æ—¶ä¹Ÿä¼šå› ä¸ºå°‘äº›æ‹¬å·æˆ–è€…ä»€ä¹ˆåœ°æ–¹æ²¡æ³¨æ„è€ç¼–è¯‘ä¸è¿‡, æ‰€ä»¥ç”¨texå†™ä¹Ÿä¸ä¸€å®šèƒ½æ¯”ç”¨powerpointæ–¹ä¾¿, ä¸è®ºå•¥å·¥å…·, åªè¦èƒ½&lt;strong&gt;get things done&lt;/strong&gt;,å°±æ˜¯å¥½å·¥å…·~&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="tex"></category><category term="git"></category></entry></feed>